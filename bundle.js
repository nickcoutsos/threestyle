!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}var o=n(1),a=i(o),s=n(3),l=i(s),c=n(5),u=r(c),h=n(6);n(68),n(79),n(80),n(81);var d=n(82),f=i(d),p=n(83),m=i(p);new l.default({el:"#app",data:{scene:new u.Scene,camera:new u.PerspectiveCamera(70,1,1,1e3),sceneCode:f.default,styleCode:m.default,sceneBuilder:function(){},style:m.default},created:function(){this.camera.position.set(15,15,15),this.camera.lookAt(new u.Vector3(0,0,0))},mounted:function(){this.updateScene(this.sceneCode)},methods:{updateScene:(0,a.default)(function(e){var t=this;try{!function(){var n=new Function("three","scene",'"use strict";\n'+e),r=function(){var e=new u.Scene;return n(u,e),e};r(),t.sceneBuilder=r}()}catch(e){console.error("Exception in scene code, could not update"),console.error(e)}},200),updateStyle:(0,a.default)(function(e){this.style=e},200),onPanelResize:function(){this.$refs.renderer.onResize()},refresh:function(){var e=this.sceneBuilder();(0,h.applyStyle)(e,{style:this.style,update:"node"}),e.add(this.camera),this.scene=e}},watch:{sceneBuilder:function(){this.refresh()},style:function(){this.refresh()}}})},function(e,t,n){var r=n(2);e.exports=function(e,t,n){function i(){var u=r()-l;u<t&&u>0?o=setTimeout(i,t-u):(o=null,n||(c=e.apply(s,a),o||(s=a=null)))}var o,a,s,l,c;return null==t&&(t=100),function(){s=this,a=arguments,l=r();var u=n&&!o;return o||(o=setTimeout(i,t)),u&&(c=e.apply(s,a),s=a=null),c}}},function(e,t){function n(){return(new Date).getTime()}e.exports=Date.now||n},function(e,t,n){(function(t,n){/*!
	 * Vue.js v2.1.8
	 * (c) 2014-2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function r(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function i(e){var t=parseFloat(e,10);return t||0===t?t:e}function o(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}function a(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}function s(e,t){return mi.call(e,t)}function l(e){return"string"==typeof e||"number"==typeof e}function c(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}function u(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function h(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function d(e,t){for(var n in t)e[n]=t[n];return e}function f(e){return null!==e&&"object"==typeof e}function p(e){return wi.call(e)===_i}function m(e){for(var t={},n=0;n<e.length;n++)e[n]&&d(t,e[n]);return t}function v(){}function g(e){return e.reduce(function(e,t){return e.concat(t.staticKeys||[])},[]).join(",")}function y(e,t){var n=f(e),r=f(t);return n&&r?JSON.stringify(e)===JSON.stringify(t):!n&&!r&&String(e)===String(t)}function b(e,t){for(var n=0;n<e.length;n++)if(y(e[n],t))return n;return-1}function x(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function w(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}function _(e){if(!Ti.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}function M(e){return/native code/.test(e.toString())}function S(e){Hi.target&&Vi.push(Hi.target),Hi.target=e}function E(){Hi.target=Vi.pop()}function T(e,t){e.__proto__=t}function C(e,t,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];w(e,o,t[o])}}function A(e,t){if(f(e)){var n;return s(e,"__ob__")&&e.__ob__ instanceof $i?n=e.__ob__:Yi.shouldConvert&&!Di()&&(Array.isArray(e)||p(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new $i(e)),t&&n&&n.vmCount++,n}}function L(e,n,r,i){var o=new Hi,a=Object.getOwnPropertyDescriptor(e,n);if(!a||a.configurable!==!1){var s=a&&a.get,l=a&&a.set,c=A(r);Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(e):r;return Hi.target&&(o.depend(),c&&c.dep.depend(),Array.isArray(t)&&k(t)),t},set:function(n){var a=s?s.call(e):r;n===a||n!==n&&a!==a||("production"!==t.env.NODE_ENV&&i&&i(),l?l.call(e,n):r=n,c=A(n),o.notify())}})}}function R(e,n,r){if(Array.isArray(e))return e.length=Math.max(e.length,n),e.splice(n,1,r),r;if(s(e,n))return void(e[n]=r);var i=e.__ob__;return e._isVue||i&&i.vmCount?void("production"!==t.env.NODE_ENV&&Bi("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option.")):i?(L(i.value,n,r),i.dep.notify(),r):void(e[n]=r)}function P(e,n){var r=e.__ob__;return e._isVue||r&&r.vmCount?void("production"!==t.env.NODE_ENV&&Bi("Avoid deleting properties on a Vue instance or its root $data - just set it to null.")):void(s(e,n)&&(delete e[n],r&&r.dep.notify()))}function k(e){for(var t=void 0,n=0,r=e.length;n<r;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&k(t)}function O(e,t){if(!t)return e;for(var n,r,i,o=Object.keys(t),a=0;a<o.length;a++)n=o[a],r=e[n],i=t[n],s(e,n)?p(r)&&p(i)&&O(r,i):R(e,n,i);return e}function N(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function D(e,t){var n=Object.create(e||null);return t?d(n,t):n}function I(e){for(var t in e.components){var n=t.toLowerCase();(pi(n)||Ei.isReservedTag(n))&&Bi("Do not use built-in or reserved HTML elements as component id: "+t)}}function U(e){var n=e.props;if(n){var r,i,o,a={};if(Array.isArray(n))for(r=n.length;r--;)i=n[r],"string"==typeof i?(o=gi(i),a[o]={type:null}):"production"!==t.env.NODE_ENV&&Bi("props must be strings when using array syntax.");else if(p(n))for(var s in n)i=n[s],o=gi(s),a[o]=p(i)?i:{type:i};e.props=a}}function F(e){var t=e.directives;if(t)for(var n in t){var r=t[n];"function"==typeof r&&(t[n]={bind:r,update:r})}}function B(e,n,r){function i(t){var i=Zi[t]||Ji;h[t]=i(e[t],n[t],r,t)}"production"!==t.env.NODE_ENV&&I(n),U(n),F(n);var o=n.extends;if(o&&(e="function"==typeof o?B(e,o.options,r):B(e,o,r)),n.mixins)for(var a=0,l=n.mixins.length;a<l;a++){var c=n.mixins[a];c.prototype instanceof Ye&&(c=c.options),e=B(e,c,r)}var u,h={};for(u in e)i(u);for(u in n)s(e,u)||i(u);return h}function z(e,n,r,i){if("string"==typeof r){var o=e[n];if(s(o,r))return o[r];var a=gi(r);if(s(o,a))return o[a];var l=yi(a);if(s(o,l))return o[l];var c=o[r]||o[a]||o[l];return"production"!==t.env.NODE_ENV&&i&&!c&&Bi("Failed to resolve "+n.slice(0,-1)+": "+r,e),c}}function j(e,n,r,i){var o=n[e],a=!s(r,e),l=r[e];if(X(Boolean,o.type)&&(a&&!s(o,"default")?l=!1:X(String,o.type)||""!==l&&l!==xi(e)||(l=!0)),void 0===l){l=G(i,o,e);var c=Yi.shouldConvert;Yi.shouldConvert=!0,A(l),Yi.shouldConvert=c}return"production"!==t.env.NODE_ENV&&H(o,e,l,i,a),l}function G(e,n,r){if(s(n,"default")){var i=n.default;return f(i)&&"production"!==t.env.NODE_ENV&&Bi('Invalid default value for prop "'+r+'": Props with type Object/Array must use a factory function to return the default value.',e),e&&e.$options.propsData&&void 0===e.$options.propsData[r]&&void 0!==e[r]?e[r]:"function"==typeof i&&n.type!==Function?i.call(e):i}}function H(e,t,n,r,i){if(e.required&&i)return void Bi('Missing required prop: "'+t+'"',r);if(null!=n||e.required){var o=e.type,a=!o||o===!0,s=[];if(o){Array.isArray(o)||(o=[o]);for(var l=0;l<o.length&&!a;l++){var c=V(n,o[l]);s.push(c.expectedType||""),a=c.valid}}if(!a)return void Bi('Invalid prop: type check failed for prop "'+t+'". Expected '+s.map(yi).join(", ")+", got "+Object.prototype.toString.call(n).slice(8,-1)+".",r);var u=e.validator;u&&(u(n)||Bi('Invalid prop: custom validator check failed for prop "'+t+'".',r))}}function V(e,t){var n,r=W(t);return n="String"===r?typeof e==(r="string"):"Number"===r?typeof e==(r="number"):"Boolean"===r?typeof e==(r="boolean"):"Function"===r?typeof e==(r="function"):"Object"===r?p(e):"Array"===r?Array.isArray(e):e instanceof t,{valid:n,expectedType:r}}function W(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t&&t[1]}function X(e,t){if(!Array.isArray(t))return W(t)===W(e);for(var n=0,r=t.length;n<r;n++)if(W(t[n])===W(e))return!0;return!1}function q(){ao.length=0,so={},"production"!==t.env.NODE_ENV&&(lo={}),co=uo=!1}function Y(){for(uo=!0,ao.sort(function(e,t){return e.id-t.id}),ho=0;ho<ao.length;ho++){var e=ao[ho],n=e.id;if(so[n]=null,e.run(),"production"!==t.env.NODE_ENV&&null!=so[n]&&(lo[n]=(lo[n]||0)+1,lo[n]>Ei._maxUpdateCount)){Bi("You may have an infinite update loop "+(e.user?'in watcher with expression "'+e.expression+'"':"in a component render function."),e.vm);break}}Ii&&Ei.devtools&&Ii.emit("flush"),q()}function $(e){var t=e.id;if(null==so[t]){if(so[t]=!0,uo){for(var n=ao.length-1;n>=0&&ao[n].id>e.id;)n--;ao.splice(Math.max(n,ho)+1,0,e)}else ao.push(e);co||(co=!0,Ui(Y))}}function Z(e){vo.clear(),K(e,vo)}function K(e,t){var n,r,i=Array.isArray(e);if((i||f(e))&&Object.isExtensible(e)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(i)for(n=e.length;n--;)K(e[n],t);else for(r=Object.keys(e),n=r.length;n--;)K(e[r[n]],t)}}function J(e){e._watchers=[];var t=e.$options;t.props&&Q(e,t.props),t.methods&&re(e,t.methods),t.data?ee(e):A(e._data={},!0),t.computed&&te(e,t.computed),t.watch&&ie(e,t.watch)}function Q(e,n){var r=e.$options.propsData||{},i=e.$options._propKeys=Object.keys(n),o=!e.$parent;Yi.shouldConvert=o;for(var a=function(o){var a=i[o];"production"!==t.env.NODE_ENV?(go[a]&&Bi('"'+a+'" is a reserved attribute and cannot be used as component prop.',e),L(e,a,j(a,n,r,e),function(){e.$parent&&!Yi.isSettingProps&&Bi("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+a+'"',e)})):L(e,a,j(a,n,r,e))},s=0;s<i.length;s++)a(s);Yi.shouldConvert=!0}function ee(e){var n=e.$options.data;n=e._data="function"==typeof n?n.call(e):n||{},p(n)||(n={},"production"!==t.env.NODE_ENV&&Bi("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",e));for(var r=Object.keys(n),i=e.$options.props,o=r.length;o--;)i&&s(i,r[o])?"production"!==t.env.NODE_ENV&&Bi('The data property "'+r[o]+'" is already declared as a prop. Use prop default value instead.',e):se(e,r[o]);A(n,!0)}function te(e,n){for(var r in n){"production"!==t.env.NODE_ENV&&r in e&&Bi('existing instance property "'+r+'" will be overwritten by a computed property with the same name.',e);var i=n[r];"function"==typeof i?(yo.get=ne(i,e),yo.set=v):(yo.get=i.get?i.cache!==!1?ne(i.get,e):u(i.get,e):v,yo.set=i.set?u(i.set,e):v),Object.defineProperty(e,r,yo)}}function ne(e,t){var n=new po(t,e,v,{lazy:!0});return function(){return n.dirty&&n.evaluate(),Hi.target&&n.depend(),n.value}}function re(e,n){for(var r in n)e[r]=null==n[r]?v:u(n[r],e),"production"!==t.env.NODE_ENV&&null==n[r]&&Bi('method "'+r+'" has an undefined value in the component definition. Did you reference the function correctly?',e)}function ie(e,t){for(var n in t){var r=t[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)oe(e,n,r[i]);else oe(e,n,r)}}function oe(e,t,n){var r;p(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}function ae(e){var n={};n.get=function(){return this._data},"production"!==t.env.NODE_ENV&&(n.set=function(e){Bi("Avoid replacing instance root $data. Use nested data properties instead.",this)}),Object.defineProperty(e.prototype,"$data",n),e.prototype.$set=R,e.prototype.$delete=P,e.prototype.$watch=function(e,t,n){var r=this;n=n||{},n.user=!0;var i=new po(r,e,t,n);return n.immediate&&t.call(r,i.value),function(){i.teardown()}}}function se(e,t){x(t)||Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(n){e._data[t]=n}})}function le(e){return new bo(void 0,void 0,void 0,String(e))}function ce(e){var t=new bo(e.tag,e.data,e.children,e.text,e.elm,e.context,e.componentOptions);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isCloned=!0,t}function ue(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=ce(e[n]);return t}function he(e,t,n,r){r+=t;var i=e.__injected||(e.__injected={});if(!i[r]){i[r]=!0;var o=e[t];o?e[t]=function(){o.apply(this,arguments),n.apply(this,arguments)}:e[t]=n}}function de(e,n,r,i,o){var a,s,l,c,u,h,d;for(a in e)if(s=e[a],l=n[a],s)if(l){if(s!==l)if(Array.isArray(l)){l.length=s.length;for(var f=0;f<l.length;f++)l[f]=s[f];e[a]=l}else l.fn=s,e[a]=l}else d="~"===a.charAt(0),u=d?a.slice(1):a,h="!"===u.charAt(0),u=h?u.slice(1):u,Array.isArray(s)?r(u,s.invoker=fe(s),d,h):(s.invoker||(c=s,s=e[a]={},s.fn=c,s.invoker=pe(s)),r(u,s.invoker,d,h));else"production"!==t.env.NODE_ENV&&Bi('Invalid handler for event "'+a+'": got '+String(s),o);for(a in n)e[a]||(d="~"===a.charAt(0),u=d?a.slice(1):a,h="!"===u.charAt(0),u=h?u.slice(1):u,i(u,n[a].invoker,h))}function fe(e){return function(t){for(var n=arguments,r=1===arguments.length,i=0;i<e.length;i++)r?e[i](t):e[i].apply(null,n)}}function pe(e){return function(t){var n=1===arguments.length;n?e.fn(t):e.fn.apply(null,arguments)}}function me(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function ve(e){return l(e)?[le(e)]:Array.isArray(e)?ge(e):void 0}function ge(e,t){var n,r,i,o=[];for(n=0;n<e.length;n++)r=e[n],null!=r&&"boolean"!=typeof r&&(i=o[o.length-1],Array.isArray(r)?o.push.apply(o,ge(r,(t||"")+"_"+n)):l(r)?i&&i.text?i.text+=String(r):""!==r&&o.push(le(r)):r.text&&i&&i.text?o[o.length-1]=le(i.text+r.text):(r.tag&&null==r.key&&null!=t&&(r.key="__vlist"+t+"_"+n+"__"),o.push(r)));return o}function ye(e){return e&&e.filter(function(e){return e&&e.componentOptions})[0]}function be(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&_e(e,t)}function xe(e,t,n){n?mo.$once(e,t):mo.$on(e,t)}function we(e,t){mo.$off(e,t)}function _e(e,t,n){mo=e,de(t,n||{},xe,we,e)}function Me(e){var t=/^hook:/;e.prototype.$on=function(e,n){var r=this;return(r._events[e]||(r._events[e]=[])).push(n),t.test(e)&&(r._hasHookEvent=!0),r},e.prototype.$once=function(e,t){function n(){r.$off(e,n),t.apply(r,arguments)}var r=this;return n.fn=t,r.$on(e,n),r},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;var r=n._events[e];if(!r)return n;if(1===arguments.length)return n._events[e]=null,n;for(var i,o=r.length;o--;)if(i=r[o],i===t||i.fn===t){r.splice(o,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?h(n):n;for(var r=h(arguments,1),i=0,o=n.length;i<o;i++)n[i].apply(t,r)}return t}}function Se(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Ee(e){e.prototype._mount=function(e,n){var r=this;return r.$el=e,r.$options.render||(r.$options.render=xo,"production"!==t.env.NODE_ENV&&(r.$options.template&&"#"!==r.$options.template.charAt(0)?Bi("You are using the runtime-only build of Vue where the template option is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",r):Bi("Failed to mount component: template or render function not defined.",r))),Te(r,"beforeMount"),r._watcher=new po(r,function(){r._update(r._render(),n)},v),n=!1,null==r.$vnode&&(r._isMounted=!0,Te(r,"mounted")),r},e.prototype._update=function(e,t){var n=this;n._isMounted&&Te(n,"beforeUpdate");var r=n.$el,i=n._vnode,o=wo;wo=n,n._vnode=e,i?n.$el=n.__patch__(i,e):n.$el=n.__patch__(n.$el,e,t,!1,n.$options._parentElm,n.$options._refElm),wo=o,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el),n._isMounted&&Te(n,"updated")},e.prototype._updateFromParent=function(e,n,r,i){var o=this,a=!(!o.$options._renderChildren&&!i);if(o.$options._parentVnode=r,o.$vnode=r,o._vnode&&(o._vnode.parent=r),o.$options._renderChildren=i,e&&o.$options.props){Yi.shouldConvert=!1,"production"!==t.env.NODE_ENV&&(Yi.isSettingProps=!0);for(var s=o.$options._propKeys||[],l=0;l<s.length;l++){var c=s[l];o[c]=j(c,o.$options.props,e,o)}Yi.shouldConvert=!0,"production"!==t.env.NODE_ENV&&(Yi.isSettingProps=!1),o.$options.propsData=e}if(n){var u=o.$options._parentListeners;o.$options._parentListeners=n,_e(o,n,u)}a&&(o.$slots=Ve(i,r.context),o.$forceUpdate())},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Te(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||a(t.$children,e),e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,Te(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.__patch__(e._vnode,null)}}}function Te(e,t){var n=e.$options[t];if(n)for(var r=0,i=n.length;r<i;r++)n[r].call(e);e._hasHookEvent&&e.$emit("hook:"+t)}function Ce(e,n,r,i,o){if(e){var a=r.$options._base;if(f(e)&&(e=a.extend(e)),"function"!=typeof e)return void("production"!==t.env.NODE_ENV&&Bi("Invalid Component definition: "+String(e),r));if(!e.cid)if(e.resolved)e=e.resolved;else if(e=Ne(e,a,function(){r.$forceUpdate()}),!e)return;qe(e),n=n||{};var s=De(n,e);if(e.options.functional)return Ae(e,s,n,r,i);var l=n.on;n.on=n.nativeOn,e.options.abstract&&(n={}),Ue(n);var c=e.options.name||o,u=new bo("vue-component-"+e.cid+(c?"-"+c:""),n,void 0,void 0,void 0,r,{Ctor:e,propsData:s,listeners:l,tag:o,children:i});return u}}function Ae(e,t,n,r,i){var o={},a=e.options.props;if(a)for(var s in a)o[s]=j(s,a,t);var l=Object.create(r),c=function(e,t,n,r){return Be(l,e,t,n,r,!0)},u=e.options.render.call(null,c,{props:o,data:n,parent:r,children:i,slots:function(){return Ve(i,r)}});return u instanceof bo&&(u.functionalContext=r,n.slot&&((u.data||(u.data={})).slot=n.slot)),u}function Le(e,t,n,r){var i=e.componentOptions,o={_isComponent:!0,parent:t,propsData:i.propsData,_componentTag:i.tag,_parentVnode:e,_parentListeners:i.listeners,_renderChildren:i.children,_parentElm:n||null,_refElm:r||null},a=e.data.inlineTemplate;return a&&(o.render=a.render,o.staticRenderFns=a.staticRenderFns),new i.Ctor(o)}function Re(e,t,n,r){if(!e.child||e.child._isDestroyed){var i=e.child=Le(e,wo,n,r);i.$mount(t?e.elm:void 0,t)}else if(e.data.keepAlive){var o=e;Pe(o,o)}}function Pe(e,t){var n=t.componentOptions,r=t.child=e.child;r._updateFromParent(n.propsData,n.listeners,t,n.children)}function ke(e){e.child._isMounted||(e.child._isMounted=!0,Te(e.child,"mounted")),e.data.keepAlive&&(e.child._inactive=!1,Te(e.child,"activated"))}function Oe(e){e.child._isDestroyed||(e.data.keepAlive?(e.child._inactive=!0,Te(e.child,"deactivated")):e.child.$destroy())}function Ne(e,n,r){if(!e.requested){e.requested=!0;var i=e.pendingCallbacks=[r],o=!0,a=function(t){if(f(t)&&(t=n.extend(t)),e.resolved=t,!o)for(var r=0,a=i.length;r<a;r++)i[r](t)},s=function(n){"production"!==t.env.NODE_ENV&&Bi("Failed to resolve async component: "+String(e)+(n?"\nReason: "+n:""))},l=e(a,s);return l&&"function"==typeof l.then&&!e.resolved&&l.then(a,s),o=!1,e.resolved}e.pendingCallbacks.push(r)}function De(e,t){var n=t.options.props;if(n){var r={},i=e.attrs,o=e.props,a=e.domProps;if(i||o||a)for(var s in n){var l=xi(s);Ie(r,o,s,l,!0)||Ie(r,i,s,l)||Ie(r,a,s,l)}return r}}function Ie(e,t,n,r,i){if(t){if(s(t,n))return e[n]=t[n],i||delete t[n],!0;if(s(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function Ue(e){e.hook||(e.hook={});for(var t=0;t<Mo.length;t++){var n=Mo[t],r=e.hook[n],i=_o[n];e.hook[n]=r?Fe(i,r):i}}function Fe(e,t){return function(n,r,i,o){e(n,r,i,o),t(n,r,i,o)}}function Be(e,t,n,r,i,o){return(Array.isArray(n)||l(n))&&(i=r,r=n,n=void 0),o&&(i=Eo),ze(e,t,n,r,i)}function ze(e,n,r,i,o){if(r&&r.__ob__)return"production"!==t.env.NODE_ENV&&Bi("Avoid using observed data object as vnode data: "+JSON.stringify(r)+"\nAlways create fresh vnode data objects in each render!",e),xo();if(!n)return xo();Array.isArray(i)&&"function"==typeof i[0]&&(r=r||{},r.scopedSlots={default:i[0]},i.length=0),o===Eo?i=ve(i):o===So&&(i=me(i));var a,s;if("string"==typeof n){var l;s=Ei.getTagNamespace(n),a=Ei.isReservedTag(n)?new bo(Ei.parsePlatformTagName(n),r,i,void 0,void 0,e):(l=z(e.$options,"components",n))?Ce(l,r,e,i,n):new bo(n,r,i,void 0,void 0,e)}else a=Ce(n,r,e,i);return a?(s&&je(a,s),a):xo()}function je(e,t){if(e.ns=t,"foreignObject"!==e.tag&&e.children)for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];i.tag&&!i.ns&&je(i,t)}}function Ge(e){e.$vnode=null,e._vnode=null,e._staticTrees=null;var t=e.$options._parentVnode,n=t&&t.context;e.$slots=Ve(e.$options._renderChildren,n),e.$scopedSlots={},e._c=function(t,n,r,i){return Be(e,t,n,r,i,!1)},e.$createElement=function(t,n,r,i){return Be(e,t,n,r,i,!0)},e.$options.el&&e.$mount(e.$options.el)}function He(e){function n(e,t,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&o(e[r],t+"_"+r,n);else o(e,t,n)}function o(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}e.prototype.$nextTick=function(e){return Ui(e,this)},e.prototype._render=function(){var e=this,n=e.$options,r=n.render,i=n.staticRenderFns,o=n._parentVnode;if(e._isMounted)for(var a in e.$slots)e.$slots[a]=ue(e.$slots[a]);o&&o.data.scopedSlots&&(e.$scopedSlots=o.data.scopedSlots),i&&!e._staticTrees&&(e._staticTrees=[]),e.$vnode=o;var s;try{s=r.call(e._renderProxy,e.$createElement)}catch(n){if(!Ei.errorHandler)throw"production"!==t.env.NODE_ENV&&Bi("Error when rendering "+Fi(e)+":"),n;Ei.errorHandler.call(null,n,e),s=e._vnode}return s instanceof bo||("production"!==t.env.NODE_ENV&&Array.isArray(s)&&Bi("Multiple root nodes returned from render function. Render function should return a single root node.",e),s=xo()),s.parent=o,s},e.prototype._s=r,e.prototype._v=le,e.prototype._n=i,e.prototype._e=xo,e.prototype._q=y,e.prototype._i=b,e.prototype._m=function(e,t){var r=this._staticTrees[e];return r&&!t?Array.isArray(r)?ue(r):ce(r):(r=this._staticTrees[e]=this.$options.staticRenderFns[e].call(this._renderProxy),n(r,"__static__"+e,!1),r)},e.prototype._o=function(e,t,r){return n(e,"__once__"+t+(r?"_"+r:""),!0),e},e.prototype._f=function(e){return z(this.$options,"filters",e,!0)||Si},e.prototype._l=function(e,t){var n,r,i,o,a;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t(r+1,r);else if(f(e))for(o=Object.keys(e),n=new Array(o.length),r=0,i=o.length;r<i;r++)a=o[r],n[r]=t(e[a],a,r);return n},e.prototype._t=function(e,n,r,i){var o=this.$scopedSlots[e];if(o)return r=r||{},i&&d(r,i),o(r)||n;var a=this.$slots[e];return a&&"production"!==t.env.NODE_ENV&&(a._rendered&&Bi('Duplicate presence of slot "'+e+'" found in the same render tree - this will likely cause render errors.',this),a._rendered=!0),a||n},e.prototype._b=function(e,n,r,i){if(r)if(f(r)){Array.isArray(r)&&(r=m(r));for(var o in r)if("class"===o||"style"===o)e[o]=r[o];else{var a=i||Ei.mustUseProp(n,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={});a[o]=r[o]}}else"production"!==t.env.NODE_ENV&&Bi("v-bind without argument expects an Object or Array value",this);return e},e.prototype._k=function(e,t,n){var r=Ei.keyCodes[t]||n;return Array.isArray(r)?r.indexOf(e)===-1:r!==e}}function Ve(e,t){var n={};if(!e)return n;for(var r,i,o=[],a=0,s=e.length;a<s;a++)if(i=e[a],(i.context===t||i.functionalContext===t)&&i.data&&(r=i.data.slot)){var l=n[r]||(n[r]=[]);"template"===i.tag?l.push.apply(l,i.children):l.push(i)}else o.push(i);return o.length&&(1!==o.length||" "!==o[0].text&&!o[0].isComment)&&(n.default=o),n}function We(e){e.prototype._init=function(e){var n=this;n._uid=To++,n._isVue=!0,e&&e._isComponent?Xe(n,e):n.$options=B(qe(n.constructor),e||{},n),"production"!==t.env.NODE_ENV?Ki(n):n._renderProxy=n,n._self=n,Se(n),be(n),Te(n,"beforeCreate"),J(n),Te(n,"created"),Ge(n)}}function Xe(e,t){var n=e.$options=Object.create(e.constructor.options);n.parent=t.parent,n.propsData=t.propsData,n._parentVnode=t._parentVnode,n._parentListeners=t._parentListeners,n._renderChildren=t._renderChildren,n._componentTag=t._componentTag,n._parentElm=t._parentElm,n._refElm=t._refElm,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function qe(e){var t=e.options;if(e.super){var n=e.super.options,r=e.superOptions,i=e.extendOptions;n!==r&&(e.superOptions=n,i.render=t.render,i.staticRenderFns=t.staticRenderFns,i._scopeId=t._scopeId,t=e.options=B(n,i),t.name&&(t.components[t.name]=e))}return t}function Ye(e){"production"===t.env.NODE_ENV||this instanceof Ye||Bi("Vue is a constructor and should be called with the `new` keyword"),this._init(e)}function $e(e){e.use=function(e){if(!e.installed){var t=h(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}}}function Ze(e){e.mixin=function(e){this.options=B(this.options,e)}}function Ke(e){e.cid=0;var n=1;e.extend=function(e){e=e||{};var r=this,i=r.cid,o=e._Ctor||(e._Ctor={});if(o[i])return o[i];var a=e.name||r.options.name;"production"!==t.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(a)||Bi('Invalid component name: "'+a+'". Component names can only contain alphanumeric characters and the hyphen, and must start with a letter.'));var s=function(e){this._init(e)};return s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.cid=n++,s.options=B(r.options,e),s.super=r,s.extend=r.extend,s.mixin=r.mixin,s.use=r.use,Ei._assetTypes.forEach(function(e){s[e]=r[e]}),a&&(s.options.components[a]=s),s.superOptions=r.options,s.extendOptions=e,o[i]=s,s}}function Je(e){Ei._assetTypes.forEach(function(n){e[n]=function(e,r){return r?("production"!==t.env.NODE_ENV&&"component"===n&&Ei.isReservedTag(e)&&Bi("Do not use built-in or reserved HTML elements as component id: "+e),"component"===n&&p(r)&&(r.name=r.name||e,r=this.options._base.extend(r)),"directive"===n&&"function"==typeof r&&(r={bind:r,update:r}),this.options[n+"s"][e]=r,r):this.options[n+"s"][e]}})}function Qe(e,t){return"string"==typeof e?e.split(",").indexOf(t)>-1:e.test(t)}function et(e){var n={};n.get=function(){return Ei},"production"!==t.env.NODE_ENV&&(n.set=function(){Bi("Do not replace the Vue.config object, set individual fields instead.")}),Object.defineProperty(e,"config",n),e.util=Qi,e.set=R,e.delete=P,e.nextTick=Ui,e.options=Object.create(null),Ei._assetTypes.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,d(e.options.components,Lo),$e(e),Ze(e),Ke(e),Je(e)}function tt(e){for(var t=e.data,n=e,r=e;r.child;)r=r.child._vnode,r.data&&(t=nt(r.data,t));for(;n=n.parent;)n.data&&(t=nt(t,n.data));return rt(t)}function nt(e,t){return{staticClass:it(e.staticClass,t.staticClass),class:e.class?[e.class,t.class]:t.class}}function rt(e){var t=e.class,n=e.staticClass;return n||t?it(n,ot(t)):""}function it(e,t){return e?t?e+" "+t:e:t||""}function ot(e){var t="";if(!e)return t;if("string"==typeof e)return e;if(Array.isArray(e)){for(var n,r=0,i=e.length;r<i;r++)e[r]&&(n=ot(e[r]))&&(t+=n+" ");return t.slice(0,-1)}if(f(e)){for(var o in e)e[o]&&(t+=o+" ");return t.slice(0,-1)}return t}function at(e){return Go(e)?"svg":"math"===e?"math":void 0}function st(e){if(!Ai)return!0;if(Vo(e))return!1;if(e=e.toLowerCase(),null!=Wo[e])return Wo[e];var t=document.createElement(e);return e.indexOf("-")>-1?Wo[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Wo[e]=/HTMLUnknownElement/.test(t.toString())}function lt(e){if("string"==typeof e){var n=e;if(e=document.querySelector(e),!e)return"production"!==t.env.NODE_ENV&&Bi("Cannot find element: "+n),document.createElement("div")}return e}function ct(e,t){var n=document.createElement(e);return"select"!==e?n:(t.data&&t.data.attrs&&"multiple"in t.data.attrs&&n.setAttribute("multiple","multiple"),n)}function ut(e,t){return document.createElementNS(zo[e],t)}function ht(e){return document.createTextNode(e)}function dt(e){return document.createComment(e)}function ft(e,t,n){e.insertBefore(t,n)}function pt(e,t){e.removeChild(t)}function mt(e,t){e.appendChild(t)}function vt(e){return e.parentNode}function gt(e){return e.nextSibling}function yt(e){return e.tagName}function bt(e,t){e.textContent=t}function xt(e,t,n){e.setAttribute(t,n)}function wt(e,t){var n=e.data.ref;if(n){var r=e.context,i=e.child||e.elm,o=r.$refs;t?Array.isArray(o[n])?a(o[n],i):o[n]===i&&(o[n]=void 0):e.data.refInFor?Array.isArray(o[n])&&o[n].indexOf(i)<0?o[n].push(i):o[n]=[i]:o[n]=i}}function _t(e){return null==e}function Mt(e){return null!=e}function St(e,t){return e.key===t.key&&e.tag===t.tag&&e.isComment===t.isComment&&!e.data==!t.data}function Et(e,t,n){var r,i,o={};for(r=t;r<=n;++r)i=e[r].key,Mt(i)&&(o[i]=r);return o}function Tt(e){function n(e){return new bo(L.tagName(e).toLowerCase(),{},[],void 0,e)}function r(e,t){function n(){0===--n.listeners&&i(e)}return n.listeners=t,n}function i(e){var t=L.parentNode(e);t&&L.removeChild(t,e)}function a(e,n,r,i,o){if(e.isRootInsert=!o,!s(e,n,r,i)){var a=e.data,l=e.children,c=e.tag;Mt(c)?("production"!==t.env.NODE_ENV&&(a&&a.pre&&R++,R||e.ns||Ei.ignoredElements.length&&Ei.ignoredElements.indexOf(c)>-1||!Ei.isUnknownElement(c)||Bi("Unknown custom element: <"+c+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',e.context)),e.elm=e.ns?L.createElementNS(e.ns,c):L.createElement(c,e),m(e),h(e,l,n),Mt(a)&&f(e,n),u(r,e.elm,i),"production"!==t.env.NODE_ENV&&a&&a.pre&&R--):e.isComment?(e.elm=L.createComment(e.text),u(r,e.elm,i)):(e.elm=L.createTextNode(e.text),u(r,e.elm,i))}}function s(e,t,n,r){var i=e.data;if(Mt(i)){var o=Mt(e.child)&&i.keepAlive;if(Mt(i=i.hook)&&Mt(i=i.init)&&i(e,!1,n,r),Mt(e.child))return p(e,t),o&&c(e,t,n,r),!0}}function c(e,t,n,r){for(var i,o=e;o.child;)if(o=o.child._vnode,Mt(i=o.data)&&Mt(i=i.transition)){for(i=0;i<C.activate.length;++i)C.activate[i](Yo,o);t.push(o);break}u(n,e.elm,r)}function u(e,t,n){e&&(n?L.insertBefore(e,t,n):L.appendChild(e,t))}function h(e,t,n){if(Array.isArray(t))for(var r=0;r<t.length;++r)a(t[r],n,e.elm,null,!0);else l(e.text)&&L.appendChild(e.elm,L.createTextNode(e.text))}function d(e){for(;e.child;)e=e.child._vnode;return Mt(e.tag)}function f(e,t){for(var n=0;n<C.create.length;++n)C.create[n](Yo,e);E=e.data.hook,Mt(E)&&(E.create&&E.create(Yo,e),E.insert&&t.push(e))}function p(e,t){e.data.pendingInsert&&t.push.apply(t,e.data.pendingInsert),e.elm=e.child.$el,d(e)?(f(e,t),m(e)):(wt(e),t.push(e))}function m(e){var t;Mt(t=e.context)&&Mt(t=t.$options._scopeId)&&L.setAttribute(e.elm,t,""),Mt(t=wo)&&t!==e.context&&Mt(t=t.$options._scopeId)&&L.setAttribute(e.elm,t,"")}function v(e,t,n,r,i,o){for(;r<=i;++r)a(n[r],o,e,t)}function g(e){var t,n,r=e.data;if(Mt(r))for(Mt(t=r.hook)&&Mt(t=t.destroy)&&t(e),t=0;t<C.destroy.length;++t)C.destroy[t](e);if(Mt(t=e.children))for(n=0;n<e.children.length;++n)g(e.children[n])}function y(e,t,n,r){for(;n<=r;++n){var o=t[n];Mt(o)&&(Mt(o.tag)?(b(o),g(o)):i(o.elm))}}function b(e,t){if(t||Mt(e.data)){var n=C.remove.length+1;for(t?t.listeners+=n:t=r(e.elm,n),Mt(E=e.child)&&Mt(E=E._vnode)&&Mt(E.data)&&b(E,t),E=0;E<C.remove.length;++E)C.remove[E](e,t);Mt(E=e.data.hook)&&Mt(E=E.remove)?E(e,t):t()}else i(e.elm)}function x(e,n,r,i,o){for(var s,l,c,u,h=0,d=0,f=n.length-1,p=n[0],m=n[f],g=r.length-1,b=r[0],x=r[g],_=!o;h<=f&&d<=g;)_t(p)?p=n[++h]:_t(m)?m=n[--f]:St(p,b)?(w(p,b,i),p=n[++h],b=r[++d]):St(m,x)?(w(m,x,i),m=n[--f],x=r[--g]):St(p,x)?(w(p,x,i),_&&L.insertBefore(e,p.elm,L.nextSibling(m.elm)),p=n[++h],x=r[--g]):St(m,b)?(w(m,b,i),_&&L.insertBefore(e,m.elm,p.elm),m=n[--f],b=r[++d]):(_t(s)&&(s=Et(n,h,f)),l=Mt(b.key)?s[b.key]:null,_t(l)?(a(b,i,e,p.elm),b=r[++d]):(c=n[l],"production"===t.env.NODE_ENV||c||Bi("It seems there are duplicate keys that is causing an update error. Make sure each v-for item has a unique key."),St(c,b)?(w(c,b,i),n[l]=void 0,_&&L.insertBefore(e,b.elm,p.elm),b=r[++d]):(a(b,i,e,p.elm),b=r[++d])));h>f?(u=_t(r[g+1])?null:r[g+1].elm,v(e,u,r,d,g,i)):d>g&&y(e,n,h,f)}function w(e,t,n,r){if(e!==t){if(t.isStatic&&e.isStatic&&t.key===e.key&&(t.isCloned||t.isOnce))return t.elm=e.elm,void(t.child=e.child);var i,o=t.data,a=Mt(o);a&&Mt(i=o.hook)&&Mt(i=i.prepatch)&&i(e,t);var s=t.elm=e.elm,l=e.children,c=t.children;if(a&&d(t)){for(i=0;i<C.update.length;++i)C.update[i](e,t);Mt(i=o.hook)&&Mt(i=i.update)&&i(e,t)}_t(t.text)?Mt(l)&&Mt(c)?l!==c&&x(s,l,c,n,r):Mt(c)?(Mt(e.text)&&L.setTextContent(s,""),v(s,null,c,0,c.length-1,n)):Mt(l)?y(s,l,0,l.length-1):Mt(e.text)&&L.setTextContent(s,""):e.text!==t.text&&L.setTextContent(s,t.text),a&&Mt(i=o.hook)&&Mt(i=i.postpatch)&&i(e,t)}}function _(e,t,n){if(n&&e.parent)e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}function M(e,n,r){if("production"!==t.env.NODE_ENV&&!S(e,n))return!1;n.elm=e;var i=n.tag,o=n.data,a=n.children;if(Mt(o)&&(Mt(E=o.hook)&&Mt(E=E.init)&&E(n,!0),Mt(E=n.child)))return p(n,r),!0;if(Mt(i)){if(Mt(a))if(e.hasChildNodes()){for(var s=!0,l=e.firstChild,c=0;c<a.length;c++){if(!l||!M(l,a[c],r)){s=!1;break}l=l.nextSibling}if(!s||l)return"production"===t.env.NODE_ENV||"undefined"==typeof console||P||(P=!0,console.warn("Parent: ",e),console.warn("Mismatching childNodes vs. VNodes: ",e.childNodes,a)),!1}else h(n,a,r);if(Mt(o))for(var u in o)if(!k(u)){f(n,r);break}}else e.data!==n.text&&(e.data=n.text);return!0}function S(e,t){return t.tag?0===t.tag.indexOf("vue-component")||t.tag.toLowerCase()===(e.tagName&&e.tagName.toLowerCase()):e.nodeType===(t.isComment?8:3)}var E,T,C={},A=e.modules,L=e.nodeOps;for(E=0;E<$o.length;++E)for(C[$o[E]]=[],T=0;T<A.length;++T)void 0!==A[T][$o[E]]&&C[$o[E]].push(A[T][$o[E]]);
var R=0,P=!1,k=o("attrs,style,class,staticClass,staticStyle,key");return function(e,r,i,o,s,l){if(!r)return void(e&&g(e));var c,u,h=!1,f=[];if(e){var p=Mt(e.nodeType);if(!p&&St(e,r))w(e,r,f,o);else{if(p){if(1===e.nodeType&&e.hasAttribute("server-rendered")&&(e.removeAttribute("server-rendered"),i=!0),i){if(M(e,r,f))return _(r,f,!0),e;"production"!==t.env.NODE_ENV&&Bi("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}e=n(e)}if(c=e.elm,u=L.parentNode(c),a(r,f,u,L.nextSibling(c)),r.parent){for(var m=r.parent;m;)m.elm=r.elm,m=m.parent;if(d(r))for(var v=0;v<C.create.length;++v)C.create[v](Yo,r.parent)}null!==u?y(u,[e],0,0):Mt(e.tag)&&g(e)}}else h=!0,a(r,f,s,l);return _(r,f,h),r.elm}}function Ct(e,t){(e.data.directives||t.data.directives)&&At(e,t)}function At(e,t){var n,r,i,o=e===Yo,a=t===Yo,s=Lt(e.data.directives,e.context),l=Lt(t.data.directives,t.context),c=[],u=[];for(n in l)r=s[n],i=l[n],r?(i.oldValue=r.value,Pt(i,"update",t,e),i.def&&i.def.componentUpdated&&u.push(i)):(Pt(i,"bind",t,e),i.def&&i.def.inserted&&c.push(i));if(c.length){var h=function(){for(var n=0;n<c.length;n++)Pt(c[n],"inserted",t,e)};o?he(t.data.hook||(t.data.hook={}),"insert",h,"dir-insert"):h()}if(u.length&&he(t.data.hook||(t.data.hook={}),"postpatch",function(){for(var n=0;n<u.length;n++)Pt(u[n],"componentUpdated",t,e)},"dir-postpatch"),!o)for(n in s)l[n]||Pt(s[n],"unbind",e,e,a)}function Lt(e,t){var n=Object.create(null);if(!e)return n;var r,i;for(r=0;r<e.length;r++)i=e[r],i.modifiers||(i.modifiers=Ko),n[Rt(i)]=i,i.def=z(t.$options,"directives",i.name,!0);return n}function Rt(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Pt(e,t,n,r,i){var o=e.def&&e.def[t];o&&o(n.elm,e,n,r,i)}function kt(e,t){if(e.data.attrs||t.data.attrs){var n,r,i,o=t.elm,a=e.data.attrs||{},s=t.data.attrs||{};s.__ob__&&(s=t.data.attrs=d({},s));for(n in s)r=s[n],i=a[n],i!==r&&Ot(o,n,r);Pi&&s.value!==a.value&&Ot(o,"value",s.value);for(n in a)null==s[n]&&(Uo(n)?o.removeAttributeNS(Io,Fo(n)):No(n)||o.removeAttribute(n))}}function Ot(e,t,n){Do(t)?Bo(n)?e.removeAttribute(t):e.setAttribute(t,t):No(t)?e.setAttribute(t,Bo(n)||"false"===n?"false":"true"):Uo(t)?Bo(n)?e.removeAttributeNS(Io,Fo(t)):e.setAttributeNS(Io,t,n):Bo(n)?e.removeAttribute(t):e.setAttribute(t,n)}function Nt(e,t){var n=t.elm,r=t.data,i=e.data;if(r.staticClass||r.class||i&&(i.staticClass||i.class)){var o=tt(t),a=n._transitionClasses;a&&(o=it(o,ot(a))),o!==n._prevClass&&(n.setAttribute("class",o),n._prevClass=o)}}function Dt(e,t,n,r){if(n){var i=t;t=function(n){It(e,t,r),1===arguments.length?i(n):i.apply(null,arguments)}}Ro.addEventListener(e,t,r)}function It(e,t,n){Ro.removeEventListener(e,t,n)}function Ut(e,t){if(e.data.on||t.data.on){var n=t.data.on||{},r=e.data.on||{};Ro=t.elm,de(n,r,Dt,It,t.context)}}function Ft(e,t){if(e.data.domProps||t.data.domProps){var n,r,i=t.elm,o=e.data.domProps||{},a=t.data.domProps||{};a.__ob__&&(a=t.data.domProps=d({},a));for(n in o)null==a[n]&&(i[n]="");for(n in a)if(r=a[n],("textContent"!==n&&"innerHTML"!==n||(t.children&&(t.children.length=0),r!==o[n]))&&("checked"!==n||zt(i,r)))if("value"===n){i._value=r;var s=null==r?"":String(r);Bt(i,t,s)&&(i.value=s)}else i[n]=r}}function Bt(e,t,n){return!(e.composing||"option"!==t.tag&&!zt(e,n)&&!jt(t,n))}function zt(e,t){return document.activeElement!==e&&e.value!==t}function jt(e,t){var n=e.elm.value,r=e.elm._vModifiers;return r&&r.number||"number"===e.elm.type?i(n)!==i(t):r&&r.trim?n.trim()!==t.trim():n!==t}function Gt(e){var t=Ht(e.style);return e.staticStyle?d(e.staticStyle,t):t}function Ht(e){return Array.isArray(e)?m(e):"string"==typeof e?ra(e):e}function Vt(e,t){var n,r={};if(t)for(var i=e;i.child;)i=i.child._vnode,i.data&&(n=Gt(i.data))&&d(r,n);(n=Gt(e.data))&&d(r,n);for(var o=e;o=o.parent;)o.data&&(n=Gt(o.data))&&d(r,n);return r}function Wt(e,t){var n=t.data,r=e.data;if(n.staticStyle||n.style||r.staticStyle||r.style){var i,o,a=t.elm,s=e.data.staticStyle,l=e.data.style||{},c=s||l,u=Ht(t.data.style)||{};t.data.style=u.__ob__?d({},u):u;var h=Vt(t,!0);for(o in c)null==h[o]&&aa(a,o,"");for(o in h)i=h[o],i!==c[o]&&aa(a,o,null==i?"":i)}}function Xt(e,t){if(t&&t.trim())if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var n=" "+e.getAttribute("class")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function qt(e,t){if(t&&t.trim())if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t);else{for(var n=" "+e.getAttribute("class")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");e.setAttribute("class",n.trim())}}function Yt(e){ga(function(){ga(e)})}function $t(e,t){(e._transitionClasses||(e._transitionClasses=[])).push(t),Xt(e,t)}function Zt(e,t){e._transitionClasses&&a(e._transitionClasses,t),qt(e,t)}function Kt(e,t,n){var r=Jt(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===ha?pa:va,l=0,c=function(){e.removeEventListener(s,u),n()},u=function(t){t.target===e&&++l>=a&&c()};setTimeout(function(){l<a&&c()},o+1),e.addEventListener(s,u)}function Jt(e,t){var n,r=window.getComputedStyle(e),i=r[fa+"Delay"].split(", "),o=r[fa+"Duration"].split(", "),a=Qt(i,o),s=r[ma+"Delay"].split(", "),l=r[ma+"Duration"].split(", "),c=Qt(s,l),u=0,h=0;t===ha?a>0&&(n=ha,u=a,h=o.length):t===da?c>0&&(n=da,u=c,h=l.length):(u=Math.max(a,c),n=u>0?a>c?ha:da:null,h=n?n===ha?o.length:l.length:0);var d=n===ha&&ya.test(r[fa+"Property"]);return{type:n,timeout:u,propCount:h,hasTransform:d}}function Qt(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map(function(t,n){return en(t)+en(e[n])}))}function en(e){return 1e3*Number(e.slice(0,-1))}function tn(e,t){var n=e.elm;n._leaveCb&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=rn(e.data.transition);if(r&&!n._enterCb&&1===n.nodeType){for(var i=r.css,o=r.type,a=r.enterClass,s=r.enterToClass,l=r.enterActiveClass,c=r.appearClass,u=r.appearToClass,h=r.appearActiveClass,d=r.beforeEnter,f=r.enter,p=r.afterEnter,m=r.enterCancelled,v=r.beforeAppear,g=r.appear,y=r.afterAppear,b=r.appearCancelled,x=wo,w=wo.$vnode;w&&w.parent;)w=w.parent,x=w.context;var _=!x._isMounted||!e.isRootInsert;if(!_||g||""===g){var M=_?c:a,S=_?h:l,E=_?u:s,T=_?v||d:d,C=_&&"function"==typeof g?g:f,A=_?y||p:p,L=_?b||m:m,R=i!==!1&&!Pi,P=C&&(C._length||C.length)>1,k=n._enterCb=on(function(){R&&(Zt(n,E),Zt(n,S)),k.cancelled?(R&&Zt(n,M),L&&L(n)):A&&A(n),n._enterCb=null});e.data.show||he(e.data.hook||(e.data.hook={}),"insert",function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.context===e.context&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),C&&C(n,k)},"transition-insert"),T&&T(n),R&&($t(n,M),$t(n,S),Yt(function(){$t(n,E),Zt(n,M),k.cancelled||P||Kt(n,o,k)})),e.data.show&&(t&&t(),C&&C(n,k)),R||P||k()}}}function nn(e,t){function n(){g.cancelled||(e.data.show||((r.parentNode._pending||(r.parentNode._pending={}))[e.key]=e),u&&u(r),m&&($t(r,s),$t(r,c),Yt(function(){$t(r,l),Zt(r,s),g.cancelled||v||Kt(r,a,g)})),h&&h(r,g),m||v||g())}var r=e.elm;r._enterCb&&(r._enterCb.cancelled=!0,r._enterCb());var i=rn(e.data.transition);if(!i)return t();if(!r._leaveCb&&1===r.nodeType){var o=i.css,a=i.type,s=i.leaveClass,l=i.leaveToClass,c=i.leaveActiveClass,u=i.beforeLeave,h=i.leave,d=i.afterLeave,f=i.leaveCancelled,p=i.delayLeave,m=o!==!1&&!Pi,v=h&&(h._length||h.length)>1,g=r._leaveCb=on(function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[e.key]=null),m&&(Zt(r,l),Zt(r,c)),g.cancelled?(m&&Zt(r,s),f&&f(r)):(t(),d&&d(r)),r._leaveCb=null});p?p(n):n()}}function rn(e){if(e){if("object"==typeof e){var t={};return e.css!==!1&&d(t,ba(e.name||"v")),d(t,e),t}return"string"==typeof e?ba(e):void 0}}function on(e){var t=!1;return function(){t||(t=!0,e())}}function an(e,t){t.data.show||tn(t)}function sn(e,n,r){var i=n.value,o=e.multiple;if(o&&!Array.isArray(i))return void("production"!==t.env.NODE_ENV&&Bi('<select multiple v-model="'+n.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(i).slice(8,-1),r));for(var a,s,l=0,c=e.options.length;l<c;l++)if(s=e.options[l],o)a=b(i,cn(s))>-1,s.selected!==a&&(s.selected=a);else if(y(cn(s),i))return void(e.selectedIndex!==l&&(e.selectedIndex=l));o||(e.selectedIndex=-1)}function ln(e,t){for(var n=0,r=t.length;n<r;n++)if(y(cn(t[n]),e))return!1;return!0}function cn(e){return"_value"in e?e._value:e.value}function un(e){e.target.composing=!0}function hn(e){e.target.composing=!1,dn(e.target,"input")}function dn(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function fn(e){return!e.child||e.data&&e.data.transition?e:fn(e.child._vnode)}function pn(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?pn(ye(t.children)):e}function mn(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var o in i)t[gi(o)]=i[o].fn;return t}function vn(e,t){return/\d-keep-alive$/.test(t.tag)?e("keep-alive"):null}function gn(e){for(;e=e.parent;)if(e.data.transition)return!0}function yn(e,t){return t.key===e.key&&t.tag===e.tag}function bn(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function xn(e){e.data.newPos=e.elm.getBoundingClientRect()}function wn(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}function _n(e,t){var n=document.createElement("div");return n.innerHTML='<div a="'+e+'">',n.innerHTML.indexOf(t)>0}function Mn(e){return Oa=Oa||document.createElement("div"),Oa.innerHTML=e,Oa.textContent}function Sn(e,t){return t&&(e=e.replace(As,"\n")),e.replace(Ts,"<").replace(Cs,">").replace(Ls,"&").replace(Rs,'"')}function En(e,t){function n(t){h+=t,e=e.substring(t)}function r(){var t=e.match(Va);if(t){var r={tagName:t[1],attrs:[],start:h};n(t[0].length);for(var i,o;!(i=e.match(Wa))&&(o=e.match(ja));)n(o[0].length),r.attrs.push(o);if(i)return r.unarySlash=i[1],n(i[0].length),r.end=h,r}}function i(e){var n=e.tagName,r=e.unarySlash;c&&("p"===s&&Ua(n)&&o("",s),Ia(n)&&s===n&&o("",n));for(var i=u(n)||"html"===n&&"head"===s||!!r,a=e.attrs.length,h=new Array(a),d=0;d<a;d++){var f=e.attrs[d];Za&&f[0].indexOf('""')===-1&&(""===f[3]&&delete f[3],""===f[4]&&delete f[4],""===f[5]&&delete f[5]);var p=f[3]||f[4]||f[5]||"";h[d]={name:f[1],value:Sn(p,t.shouldDecodeNewlines)}}i||(l.push({tag:n,attrs:h}),s=n,r=""),t.start&&t.start(n,h,i,e.start,e.end)}function o(e,n,r,i){var o;if(null==r&&(r=h),null==i&&(i=h),n){var a=n.toLowerCase();for(o=l.length-1;o>=0&&l[o].tag.toLowerCase()!==a;o--);}else o=0;if(o>=0){for(var c=l.length-1;c>=o;c--)t.end&&t.end(l[c].tag,r,i);l.length=o,s=o&&l[o-1].tag}else"br"===n.toLowerCase()?t.start&&t.start(n,[],!0,r,i):"p"===n.toLowerCase()&&(t.start&&t.start(n,[],!1,r,i),t.end&&t.end(n,r,i))}for(var a,s,l=[],c=t.expectHTML,u=t.isUnaryTag||Mi,h=0;e;){if(a=e,s&&Ss(s,t.sfc,l)){var d=s.toLowerCase(),f=Es[d]||(Es[d]=new RegExp("([\\s\\S]*?)(</"+d+"[^>]*>)","i")),p=0,m=e.replace(f,function(e,n,r){return p=r.length,"script"!==d&&"style"!==d&&"noscript"!==d&&(n=n.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),t.chars&&t.chars(n),""});h+=e.length-m.length,e=m,o("</"+d+">",d,h-p,h)}else{var v=e.indexOf("<");if(0===v){if(Ya.test(e)){var g=e.indexOf("-->");if(g>=0){n(g+3);continue}}if($a.test(e)){var y=e.indexOf("]>");if(y>=0){n(y+2);continue}}var b=e.match(qa);if(b){n(b[0].length);continue}var x=e.match(Xa);if(x){var w=h;n(x[0].length),o(x[0],x[1],w,h);continue}var _=r();if(_){i(_);continue}}var M=void 0,S=void 0,E=void 0;if(v>0){for(S=e.slice(v);!(Xa.test(S)||Va.test(S)||Ya.test(S)||$a.test(S)||(E=S.indexOf("<",1),E<0));)v+=E,S=e.slice(v);M=e.substring(0,v),n(v)}v<0&&(M=e,e=""),t.chars&&M&&t.chars(M)}if(e===a&&t.chars){t.chars(e);break}}o()}function Tn(e){function t(){(a||(a=[])).push(e.slice(p,i).trim()),p=i+1}var n,r,i,o,a,s=!1,l=!1,c=!1,u=!1,h=0,d=0,f=0,p=0;for(i=0;i<e.length;i++)if(r=n,n=e.charCodeAt(i),s)39===n&&92!==r&&(s=!1);else if(l)34===n&&92!==r&&(l=!1);else if(c)96===n&&92!==r&&(c=!1);else if(u)47===n&&92!==r&&(u=!1);else if(124!==n||124===e.charCodeAt(i+1)||124===e.charCodeAt(i-1)||h||d||f){switch(n){case 34:l=!0;break;case 39:s=!0;break;case 96:c=!0;break;case 40:f++;break;case 41:f--;break;case 91:d++;break;case 93:d--;break;case 123:h++;break;case 125:h--}if(47===n){for(var m=i-1,v=void 0;m>=0&&(v=e.charAt(m)," "===v);m--);v&&/[\w$]/.test(v)||(u=!0)}}else void 0===o?(p=i+1,o=e.slice(0,i).trim()):t();if(void 0===o?o=e.slice(0,i).trim():0!==p&&t(),a)for(i=0;i<a.length;i++)o=Cn(o,a[i]);return o}function Cn(e,t){var n=t.indexOf("(");if(n<0)return'_f("'+t+'")('+e+")";var r=t.slice(0,n),i=t.slice(n+1);return'_f("'+r+'")('+e+","+i}function An(e,t){var n=t?Os(t):Ps;if(n.test(e)){for(var r,i,o=[],a=n.lastIndex=0;r=n.exec(e);){i=r.index,i>a&&o.push(JSON.stringify(e.slice(a,i)));var s=Tn(r[1].trim());o.push("_s("+s+")"),a=i+r[0].length}return a<e.length&&o.push(JSON.stringify(e.slice(a))),o.join("+")}}function Ln(e){console.error("[Vue parser]: "+e)}function Rn(e,t){return e?e.map(function(e){return e[t]}).filter(function(e){return e}):[]}function Pn(e,t,n){(e.props||(e.props=[])).push({name:t,value:n})}function kn(e,t,n){(e.attrs||(e.attrs=[])).push({name:t,value:n})}function On(e,t,n,r,i,o){(e.directives||(e.directives=[])).push({name:t,rawName:n,value:r,arg:i,modifiers:o})}function Nn(e,t,n,r,i){r&&r.capture&&(delete r.capture,t="!"+t),r&&r.once&&(delete r.once,t="~"+t);var o;r&&r.native?(delete r.native,o=e.nativeEvents||(e.nativeEvents={})):o=e.events||(e.events={});var a={value:n,modifiers:r},s=o[t];Array.isArray(s)?i?s.unshift(a):s.push(a):s?o[t]=i?[a,s]:[s,a]:o[t]=a}function Dn(e,t,n){var r=In(e,":"+t)||In(e,"v-bind:"+t);if(null!=r)return Tn(r);if(n!==!1){var i=In(e,t);if(null!=i)return JSON.stringify(i)}}function In(e,t){var n;if(null!=(n=e.attrsMap[t]))for(var r=e.attrsList,i=0,o=r.length;i<o;i++)if(r[i].name===t){r.splice(i,1);break}return n}function Un(e){if(Ja=e,Ka=Ja.length,es=ts=ns=0,e.indexOf("[")<0||e.lastIndexOf("]")<Ka-1)return{exp:e,idx:null};for(;!Bn();)Qa=Fn(),zn(Qa)?Gn(Qa):91===Qa&&jn(Qa);return{exp:e.substring(0,ts),idx:e.substring(ts+1,ns)}}function Fn(){return Ja.charCodeAt(++es)}function Bn(){return es>=Ka}function zn(e){return 34===e||39===e}function jn(e){var t=1;for(ts=es;!Bn();)if(e=Fn(),zn(e))Gn(e);else if(91===e&&t++,93===e&&t--,0===t){ns=es;break}}function Gn(e){for(var t=e;!Bn()&&(e=Fn(),e!==t););}function Hn(e,n){rs=n.warn||Ln,is=n.getTagNamespace||Mi,os=n.mustUseProp||Mi,as=n.isPreTag||Mi,ss=Rn(n.modules,"preTransformNode"),ls=Rn(n.modules,"transformNode"),cs=Rn(n.modules,"postTransformNode"),us=n.delimiters;var r,i,o=[],a=n.preserveWhitespace!==!1,s=!1,l=!1,c=!1;return En(e,{expectHTML:n.expectHTML,isUnaryTag:n.isUnaryTag,shouldDecodeNewlines:n.shouldDecodeNewlines,start:function(a,u,h){function d(n){"production"===t.env.NODE_ENV||c||("slot"!==n.tag&&"template"!==n.tag||(c=!0,rs("Cannot use <"+n.tag+"> as component root element because it may contain multiple nodes:\n"+e)),n.attrsMap.hasOwnProperty("v-for")&&(c=!0,rs("Cannot use v-for on stateful component root element because it renders multiple elements:\n"+e)))}var f=i&&i.ns||is(a);Ri&&"svg"===f&&(u=sr(u));var p={type:1,tag:a,attrsList:u,attrsMap:or(u),parent:i,children:[]};f&&(p.ns=f),ar(p)&&!Di()&&(p.forbidden=!0,"production"!==t.env.NODE_ENV&&rs("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as <"+a+">, as they will not be parsed."));for(var m=0;m<ss.length;m++)ss[m](p,n);if(s||(Vn(p),p.pre&&(s=!0)),as(p.tag)&&(l=!0),s)Wn(p);else{Yn(p),$n(p),Qn(p),Xn(p),p.plain=!p.key&&!u.length,qn(p),er(p),tr(p);for(var v=0;v<ls.length;v++)ls[v](p,n);nr(p)}if(r?o.length||(r.if&&(p.elseif||p.else)?(d(p),Jn(r,{exp:p.elseif,block:p})):"production"===t.env.NODE_ENV||c||(c=!0,rs("Component template should contain exactly one root element:\n\n"+e+"\n\nIf you are using v-if on multiple elements, use v-else-if to chain them instead."))):(r=p,d(r)),i&&!p.forbidden)if(p.elseif||p.else)Zn(p,i);else if(p.slotScope){i.plain=!1;var g=p.slotTarget||"default";(i.scopedSlots||(i.scopedSlots={}))[g]=p}else i.children.push(p),p.parent=i;h||(i=p,o.push(p));for(var y=0;y<cs.length;y++)cs[y](p,n)},end:function(){var e=o[o.length-1],t=e.children[e.children.length-1];t&&3===t.type&&" "===t.text&&e.children.pop(),o.length-=1,i=o[o.length-1],e.pre&&(s=!1),as(e.tag)&&(l=!1)},chars:function(n){if(!i)return void("production"===t.env.NODE_ENV||c||n!==e||(c=!0,rs("Component template requires a root element, rather than just text:\n\n"+e)));if(!Ri||"textarea"!==i.tag||i.attrsMap.placeholder!==n){var r=i.children;if(n=l||n.trim()?js(n):a&&r.length?" ":""){var o;!s&&" "!==n&&(o=An(n,us))?r.push({type:2,expression:o,text:n}):" "===n&&" "===r[r.length-1].text||i.children.push({type:3,text:n})}}}}),r}function Vn(e){null!=In(e,"v-pre")&&(e.pre=!0)}function Wn(e){var t=e.attrsList.length;if(t)for(var n=e.attrs=new Array(t),r=0;r<t;r++)n[r]={name:e.attrsList[r].name,value:JSON.stringify(e.attrsList[r].value)};else e.pre||(e.plain=!0)}function Xn(e){var n=Dn(e,"key");n&&("production"!==t.env.NODE_ENV&&"template"===e.tag&&rs("<template> cannot be keyed. Place the key on real elements instead."),e.key=n)}function qn(e){var t=Dn(e,"ref");t&&(e.ref=t,e.refInFor=rr(e))}function Yn(e){var n;if(n=In(e,"v-for")){var r=n.match(Ds);if(!r)return void("production"!==t.env.NODE_ENV&&rs("Invalid v-for expression: "+n));e.for=r[2].trim();var i=r[1].trim(),o=i.match(Is);o?(e.alias=o[1].trim(),e.iterator1=o[2].trim(),o[3]&&(e.iterator2=o[3].trim())):e.alias=i}}function $n(e){var t=In(e,"v-if");if(t)e.if=t,Jn(e,{exp:t,block:e});else{null!=In(e,"v-else")&&(e.else=!0);var n=In(e,"v-else-if");n&&(e.elseif=n)}}function Zn(e,n){var r=Kn(n.children);r&&r.if?Jn(r,{exp:e.elseif,block:e}):"production"!==t.env.NODE_ENV&&rs("v-"+(e.elseif?'else-if="'+e.elseif+'"':"else")+" used on element <"+e.tag+"> without corresponding v-if.")}function Kn(e){for(var n=e.length;n--;){if(1===e[n].type)return e[n];"production"!==t.env.NODE_ENV&&" "!==e[n].text&&rs('text "'+e[n].text.trim()+'" between v-if and v-else(-if) will be ignored.'),e.pop()}}function Jn(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function Qn(e){var t=In(e,"v-once");null!=t&&(e.once=!0)}function er(e){if("slot"===e.tag)e.slotName=Dn(e,"name"),"production"!==t.env.NODE_ENV&&e.key&&rs("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.");else{var n=Dn(e,"slot");n&&(e.slotTarget='""'===n?'"default"':n),"template"===e.tag&&(e.slotScope=In(e,"scope"))}}function tr(e){var t;(t=Dn(e,"is"))&&(e.component=t),null!=In(e,"inline-template")&&(e.inlineTemplate=!0)}function nr(e){var n,r,i,o,a,s,l,c,u=e.attrsList;for(n=0,r=u.length;n<r;n++)if(i=o=u[n].name,a=u[n].value,Ns.test(i))if(e.hasBindings=!0,l=ir(i),l&&(i=i.replace(zs,"")),Us.test(i))i=i.replace(Us,""),a=Tn(a),c=!1,l&&(l.prop&&(c=!0,i=gi(i),"innerHtml"===i&&(i="innerHTML")),l.camel&&(i=gi(i))),c||os(e.tag,i)?Pn(e,i,a):kn(e,i,a);else if(Fs.test(i))i=i.replace(Fs,""),Nn(e,i,a,l);else{i=i.replace(Ns,"");var h=i.match(Bs);h&&(s=h[1])&&(i=i.slice(0,-(s.length+1))),On(e,i,o,a,s,l),"production"!==t.env.NODE_ENV&&"model"===i&&lr(e,a)}else{if("production"!==t.env.NODE_ENV){var d=An(a,us);d&&rs(i+'="'+a+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.')}kn(e,i,JSON.stringify(a)),os(e.tag,i)&&("value"===i?Pn(e,i,JSON.stringify(a)):Pn(e,i,"true"))}}function rr(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}function ir(e){var t=e.match(zs);if(t){var n={};return t.forEach(function(e){n[e.slice(1)]=!0}),n}}function or(e){for(var n={},r=0,i=e.length;r<i;r++)"production"!==t.env.NODE_ENV&&n[e[r].name]&&!Ri&&rs("duplicate attribute: "+e[r].name),n[e[r].name]=e[r].value;return n}function ar(e){return"style"===e.tag||"script"===e.tag&&(!e.attrsMap.type||"text/javascript"===e.attrsMap.type)}function sr(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];Gs.test(r.name)||(r.name=r.name.replace(Hs,""),t.push(r))}return t}function lr(e,t){for(var n=e;n;)n.for&&n.alias===t&&rs("<"+e.tag+' v-model="'+t+'">: You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.'),n=n.parent}function cr(e,t){e&&(hs=Vs(t.staticKeys||""),ds=t.isReservedTag||Mi,hr(e),dr(e,!1))}function ur(e){return o("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(e?","+e:""))}function hr(e){if(e.static=pr(e),1===e.type){if(!ds(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,n=e.children.length;t<n;t++){var r=e.children[t];hr(r),r.static||(e.static=!1)}}}function dr(e,t){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=t),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var n=0,r=e.children.length;n<r;n++)dr(e.children[n],t||!!e.for);e.ifConditions&&fr(e.ifConditions,t)}}function fr(e,t){for(var n=1,r=e.length;n<r;n++)dr(e[n].block,t)}function pr(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||pi(e.tag)||!ds(e.tag)||mr(e)||!Object.keys(e).every(hs))))}function mr(e){for(;e.parent;){if(e=e.parent,"template"!==e.tag)return!1;if(e.for)return!0}return!1}function vr(e,t){var n=t?"nativeOn:{":"on:{";for(var r in e)n+='"'+r+'":'+gr(r,e[r])+",";return n.slice(0,-1)+"}"}function gr(e,t){if(t){if(Array.isArray(t))return"["+t.map(function(t){return gr(e,t)}).join(",")+"]";if(t.modifiers){var n="",r=[];for(var i in t.modifiers)Ys[i]?n+=Ys[i]:r.push(i);r.length&&(n=yr(r)+n);var o=Xs.test(t.value)?t.value+"($event)":t.value;return"function($event){"+n+o+"}"}return Ws.test(t.value)||Xs.test(t.value)?t.value:"function($event){"+t.value+"}"}return"function(){}"}function yr(e){return"if("+e.map(br).join("&&")+")return;"}function br(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var n=qs[e];return"_k($event.keyCode,"+JSON.stringify(e)+(n?","+JSON.stringify(n):"")+")"}function xr(e,t){e.wrapData=function(n){return"_b("+n+",'"+e.tag+"',"+t.value+(t.modifiers&&t.modifiers.prop?",true":"")+")"}}function wr(e,t){var n=ys,r=ys=[],i=bs;bs=0,xs=t,fs=t.warn||Ln,ps=Rn(t.modules,"transformCode"),ms=Rn(t.modules,"genData"),vs=t.directives||{},gs=t.isReservedTag||Mi;var o=e?_r(e):'_c("div")';return ys=n,bs=i,{render:"with(this){return "+o+"}",staticRenderFns:r}}function _r(e){if(e.staticRoot&&!e.staticProcessed)return Mr(e);if(e.once&&!e.onceProcessed)return Sr(e);if(e.for&&!e.forProcessed)return Cr(e);if(e.if&&!e.ifProcessed)return Er(e);if("template"!==e.tag||e.slotTarget){if("slot"===e.tag)return Br(e);var t;if(e.component)t=zr(e.component,e);else{var n=e.plain?void 0:Ar(e),r=e.inlineTemplate?null:Or(e,!0);t="_c('"+e.tag+"'"+(n?","+n:"")+(r?","+r:"")+")"}for(var i=0;i<ps.length;i++)t=ps[i](e,t);return t}return Or(e)||"void 0"}function Mr(e){return e.staticProcessed=!0,ys.push("with(this){return "+_r(e)+"}"),"_m("+(ys.length-1)+(e.staticInFor?",true":"")+")"}function Sr(e){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return Er(e);if(e.staticInFor){for(var n="",r=e.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o("+_r(e)+","+bs++ +(n?","+n:"")+")":("production"!==t.env.NODE_ENV&&fs("v-once can only be used inside v-for that is keyed. "),_r(e))}return Mr(e)}function Er(e){return e.ifProcessed=!0,Tr(e.ifConditions.slice())}function Tr(e){function t(e){return e.once?Sr(e):_r(e)}if(!e.length)return"_e()";var n=e.shift();return n.exp?"("+n.exp+")?"+t(n.block)+":"+Tr(e):""+t(n.block)}function Cr(e){var t=e.for,n=e.alias,r=e.iterator1?","+e.iterator1:"",i=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+t+"),function("+n+r+i+"){return "+_r(e)+"})"}function Ar(e){var t="{",n=Lr(e);n&&(t+=n+","),e.key&&(t+="key:"+e.key+","),e.ref&&(t+="ref:"+e.ref+","),e.refInFor&&(t+="refInFor:true,"),e.pre&&(t+="pre:true,"),e.component&&(t+='tag:"'+e.tag+'",');for(var r=0;r<ms.length;r++)t+=ms[r](e);if(e.attrs&&(t+="attrs:{"+jr(e.attrs)+"},"),e.props&&(t+="domProps:{"+jr(e.props)+"},"),e.events&&(t+=vr(e.events)+","),e.nativeEvents&&(t+=vr(e.nativeEvents,!0)+","),e.slotTarget&&(t+="slot:"+e.slotTarget+","),e.scopedSlots&&(t+=Pr(e.scopedSlots)+","),e.inlineTemplate){var i=Rr(e);i&&(t+=i+",")}return t=t.replace(/,$/,"")+"}",e.wrapData&&(t=e.wrapData(t)),t}function Lr(e){var t=e.directives;if(t){var n,r,i,o,a="directives:[",s=!1;for(n=0,r=t.length;n<r;n++){i=t[n],o=!0;var l=vs[i.name]||$s[i.name];l&&(o=!!l(e,i,fs)),o&&(s=!0,a+='{name:"'+i.name+'",rawName:"'+i.rawName+'"'+(i.value?",value:("+i.value+"),expression:"+JSON.stringify(i.value):"")+(i.arg?',arg:"'+i.arg+'"':"")+(i.modifiers?",modifiers:"+JSON.stringify(i.modifiers):"")+"},")}return s?a.slice(0,-1)+"]":void 0}}function Rr(e){var n=e.children[0];if("production"!==t.env.NODE_ENV&&(e.children.length>1||1!==n.type)&&fs("Inline-template components must have exactly one child element."),1===n.type){var r=wr(n,xs);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(e){return"function(){"+e+"}"}).join(",")+"]}"}}function Pr(e){return"scopedSlots:{"+Object.keys(e).map(function(t){return kr(t,e[t])}).join(",")+"}"}function kr(e,t){return e+":function("+String(t.attrsMap.scope)+"){return "+("template"===t.tag?Or(t)||"void 0":_r(t))+"}"}function Or(e,t){var n=e.children;if(n.length){var r=n[0];if(1===n.length&&r.for&&"template"!==r.tag&&"slot"!==r.tag)return _r(r);var i=Nr(n);return"["+n.map(Ur).join(",")+"]"+(t&&i?","+i:"")}}function Nr(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(Dr(r)||r.if&&r.ifConditions.some(function(e){return Dr(e.block)})){t=2;break}(Ir(r)||r.if&&r.ifConditions.some(function(e){return Ir(e.block)}))&&(t=1)}return t}function Dr(e){return e.for||"template"===e.tag||"slot"===e.tag}function Ir(e){return 1===e.type&&!gs(e.tag)}function Ur(e){return 1===e.type?_r(e):Fr(e)}function Fr(e){return"_v("+(2===e.type?e.expression:Gr(JSON.stringify(e.text)))+")"}function Br(e){var t=e.slotName||'"default"',n=Or(e),r="_t("+t+(n?","+n:""),i=e.attrs&&"{"+e.attrs.map(function(e){return gi(e.name)+":"+e.value}).join(",")+"}",o=e.attrsMap["v-bind"];return!i&&!o||n||(r+=",null"),i&&(r+=","+i),o&&(r+=(i?"":",null")+","+o),r+")"}function zr(e,t){var n=t.inlineTemplate?null:Or(t,!0);return"_c("+e+","+Ar(t)+(n?","+n:"")+")"}function jr(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+='"'+r.name+'":'+Gr(r.value)+","}return t.slice(0,-1)}function Gr(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function Hr(e,t){var n=Hn(e.trim(),t);cr(n,t);var r=wr(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}}function Vr(e){var t=[];return e&&Wr(e,t),t}function Wr(e,t){if(1===e.type){for(var n in e.attrsMap)if(Ns.test(n)){var r=e.attrsMap[n];r&&("v-for"===n?Xr(e,'v-for="'+r+'"',t):Yr(r,n+'="'+r+'"',t))}if(e.children)for(var i=0;i<e.children.length;i++)Wr(e.children[i],t)}else 2===e.type&&Yr(e.expression,e.text,t)}function Xr(e,t,n){Yr(e.for||"",t,n),qr(e.alias,"v-for alias",t,n),qr(e.iterator1,"v-for iterator",t,n),qr(e.iterator2,"v-for iterator",t,n)}function qr(e,t,n,r){"string"!=typeof e||Ks.test(e)||r.push("- invalid "+t+' "'+e+'" in expression: '+n)}function Yr(e,t,n){try{new Function("return "+e)}catch(i){var r=e.replace(Js,"").match(Zs);r?n.push('- avoid using JavaScript keyword as property name: "'+r[0]+'" in expression '+t):n.push("- invalid expression: "+t)}}function $r(e,n){var r=n.warn||Ln,i=In(e,"class");if("production"!==t.env.NODE_ENV&&i){var o=An(i,n.delimiters);o&&r('class="'+i+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.')}i&&(e.staticClass=JSON.stringify(i));var a=Dn(e,"class",!1);a&&(e.classBinding=a)}function Zr(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}function Kr(e,n){var r=n.warn||Ln,i=In(e,"style");if(i){if("production"!==t.env.NODE_ENV){var o=An(i,n.delimiters);o&&r('style="'+i+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.')}e.staticStyle=JSON.stringify(ra(i))}var a=Dn(e,"style",!1);a&&(e.styleBinding=a)}function Jr(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}function Qr(e,n,r){ws=r;var i=n.value,o=n.modifiers,a=e.tag,s=e.attrsMap.type;if("production"!==t.env.NODE_ENV){var l=e.attrsMap["v-bind:type"]||e.attrsMap[":type"];"input"===a&&l&&ws('<input :type="'+l+'" v-model="'+i+'">:\nv-model does not support dynamic input types. Use v-if branches instead.')}return"select"===a?ri(e,i,o):"input"===a&&"checkbox"===s?ei(e,i,o):"input"===a&&"radio"===s?ti(e,i,o):ni(e,i,o),!0}function ei(e,n,r){"production"!==t.env.NODE_ENV&&null!=e.attrsMap.checked&&ws("<"+e.tag+' v-model="'+n+"\" checked>:\ninline checked attributes will be ignored when using v-model. Declare initial values in the component's data option instead.");var i=r&&r.number,o=Dn(e,"value")||"null",a=Dn(e,"true-value")||"true",s=Dn(e,"false-value")||"false";Pn(e,"checked","Array.isArray("+n+")?_i("+n+","+o+")>-1"+("true"===a?":("+n+")":":_q("+n+","+a+")")),Nn(e,"change","var $$a="+n+",$$el=$event.target,$$c=$$el.checked?("+a+"):("+s+");if(Array.isArray($$a)){var $$v="+(i?"_n("+o+")":o)+",$$i=_i($$a,$$v);if($$c){$$i<0&&("+n+"=$$a.concat($$v))}else{$$i>-1&&("+n+"=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{"+n+"=$$c}",null,!0)}function ti(e,n,r){"production"!==t.env.NODE_ENV&&null!=e.attrsMap.checked&&ws("<"+e.tag+' v-model="'+n+"\" checked>:\ninline checked attributes will be ignored when using v-model. Declare initial values in the component's data option instead.");var i=r&&r.number,o=Dn(e,"value")||"null";o=i?"_n("+o+")":o,Pn(e,"checked","_q("+n+","+o+")"),Nn(e,"change",oi(n,o),null,!0)}function ni(e,n,r){"production"!==t.env.NODE_ENV&&("input"===e.tag&&e.attrsMap.value&&ws("<"+e.tag+' v-model="'+n+'" value="'+e.attrsMap.value+"\">:\ninline value attributes will be ignored when using v-model. Declare initial values in the component's data option instead."),"textarea"===e.tag&&e.children.length&&ws('<textarea v-model="'+n+"\">:\ninline content inside <textarea> will be ignored when using v-model. Declare initial values in the component's data option instead."));var i=e.attrsMap.type,o=r||{},a=o.lazy,s=o.number,l=o.trim,c=a||Ri&&"range"===i?"change":"input",u=!a&&"range"!==i,h="input"===e.tag||"textarea"===e.tag,d=h?"$event.target.value"+(l?".trim()":""):l?"(typeof $event === 'string' ? $event.trim() : $event)":"$event";d=s||"number"===i?"_n("+d+")":d;var f=oi(n,d);h&&u&&(f="if($event.target.composing)return;"+f),"production"!==t.env.NODE_ENV&&"file"===i&&ws("<"+e.tag+' v-model="'+n+'" type="file">:\nFile inputs are read only. Use a v-on:change listener instead.'),Pn(e,"value",h?"_s("+n+")":"("+n+")"),Nn(e,c,f,null,!0),(l||s||"number"===i)&&Nn(e,"blur","$forceUpdate()")}function ri(e,n,r){"production"!==t.env.NODE_ENV&&e.children.some(ii);var i=r&&r.number,o='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(i?"_n(val)":"val")+"})"+(null==e.attrsMap.multiple?"[0]":""),a=oi(n,o);
Nn(e,"change",a,null,!0)}function ii(e){return 1===e.type&&"option"===e.tag&&null!=e.attrsMap.selected&&(ws('<select v-model="'+e.parent.attrsMap["v-model"]+"\">:\ninline selected attributes on <option> will be ignored when using v-model. Declare initial values in the component's data option instead."),!0)}function oi(e,t){var n=Un(e);return null===n.idx?e+"="+t:"var $$exp = "+n.exp+", $$idx = "+n.idx+";if (!Array.isArray($$exp)){"+e+"="+t+"}else{$$exp.splice($$idx, 1, "+t+")}"}function ai(e,t){t.value&&Pn(e,"textContent","_s("+t.value+")")}function si(e,t){t.value&&Pn(e,"innerHTML","_s("+t.value+")")}function li(e,t){return t=t?d(d({},il),t):il,Hr(e,t)}function ci(e,n,r){var i=n&&n.warn||Bi;if("production"!==t.env.NODE_ENV)try{new Function("return 1")}catch(e){e.toString().match(/unsafe-eval|CSP/)&&i("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var o=n&&n.delimiters?String(n.delimiters)+e:e;if(rl[o])return rl[o];var a={},s=li(e,n);a.render=ui(s.render);var l=s.staticRenderFns.length;a.staticRenderFns=new Array(l);for(var c=0;c<l;c++)a.staticRenderFns[c]=ui(s.staticRenderFns[c]);return"production"!==t.env.NODE_ENV&&(a.render===v||a.staticRenderFns.some(function(e){return e===v}))&&i("failed to compile template:\n\n"+e+"\n\n"+Vr(s.ast).join("\n")+"\n\n",r),rl[o]=a}function ui(e){try{return new Function(e)}catch(e){return v}}function hi(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}var di,fi,pi=o("slot,component",!0),mi=Object.prototype.hasOwnProperty,vi=/-(\w)/g,gi=c(function(e){return e.replace(vi,function(e,t){return t?t.toUpperCase():""})}),yi=c(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),bi=/([^-])([A-Z])/g,xi=c(function(e){return e.replace(bi,"$1-$2").replace(bi,"$1-$2").toLowerCase()}),wi=Object.prototype.toString,_i="[object Object]",Mi=function(){return!1},Si=function(e){return e},Ei={optionMergeStrategies:Object.create(null),silent:!1,devtools:"production"!==t.env.NODE_ENV,errorHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:Mi,isUnknownElement:Mi,getTagNamespace:v,parsePlatformTagName:Si,mustUseProp:Mi,_assetTypes:["component","directive","filter"],_lifecycleHooks:["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"],_maxUpdateCount:100},Ti=/[^\w.$]/,Ci="__proto__"in{},Ai="undefined"!=typeof window,Li=Ai&&window.navigator.userAgent.toLowerCase(),Ri=Li&&/msie|trident/.test(Li),Pi=Li&&Li.indexOf("msie 9.0")>0,ki=Li&&Li.indexOf("edge/")>0,Oi=Li&&Li.indexOf("android")>0,Ni=Li&&/iphone|ipad|ipod|ios/.test(Li),Di=function(){return void 0===di&&(di=!Ai&&"undefined"!=typeof n&&"server"===n.process.env.VUE_ENV),di},Ii=Ai&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Ui=function(){function e(){r=!1;var e=n.slice(0);n.length=0;for(var t=0;t<e.length;t++)e[t]()}var t,n=[],r=!1;if("undefined"!=typeof Promise&&M(Promise)){var i=Promise.resolve(),o=function(e){console.error(e)};t=function(){i.then(e).catch(o),Ni&&setTimeout(v)}}else if("undefined"==typeof MutationObserver||!M(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())t=function(){setTimeout(e,0)};else{var a=1,s=new MutationObserver(e),l=document.createTextNode(String(a));s.observe(l,{characterData:!0}),t=function(){a=(a+1)%2,l.data=String(a)}}return function(e,i){var o;if(n.push(function(){e&&e.call(i),o&&o(i)}),r||(r=!0,t()),!e&&"undefined"!=typeof Promise)return new Promise(function(e){o=e})}}();fi="undefined"!=typeof Set&&M(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return this.set[e]===!0},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var Fi,Bi=v;if("production"!==t.env.NODE_ENV){var zi="undefined"!=typeof console;Bi=function(e,t){zi&&!Ei.silent&&console.error("[Vue warn]: "+e+" "+(t?ji(Fi(t)):""))},Fi=function(e){if(e.$root===e)return"root instance";var t=e._isVue?e.$options.name||e.$options._componentTag:e.name;return(t?"component <"+t+">":"anonymous component")+(e._isVue&&e.$options.__file?" at "+e.$options.__file:"")};var ji=function(e){return"anonymous component"===e&&(e+=' - use the "name" option for better debugging messages.'),"\n(found in "+e+")"}}var Gi=0,Hi=function(){this.id=Gi++,this.subs=[]};Hi.prototype.addSub=function(e){this.subs.push(e)},Hi.prototype.removeSub=function(e){a(this.subs,e)},Hi.prototype.depend=function(){Hi.target&&Hi.target.addDep(this)},Hi.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()},Hi.target=null;var Vi=[],Wi=Array.prototype,Xi=Object.create(Wi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=Wi[e];w(Xi,e,function(){for(var n=arguments,r=arguments.length,i=new Array(r);r--;)i[r]=n[r];var o,a=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),a})});var qi=Object.getOwnPropertyNames(Xi),Yi={shouldConvert:!0,isSettingProps:!1},$i=function(e){if(this.value=e,this.dep=new Hi,this.vmCount=0,w(e,"__ob__",this),Array.isArray(e)){var t=Ci?T:C;t(e,Xi,qi),this.observeArray(e)}else this.walk(e)};$i.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)L(e,t[n],e[t[n]])},$i.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)A(e[t])};var Zi=Ei.optionMergeStrategies;"production"!==t.env.NODE_ENV&&(Zi.el=Zi.propsData=function(e,t,n,r){return n||Bi('option "'+r+'" can only be used during instance creation with the `new` keyword.'),Ji(e,t)}),Zi.data=function(e,n,r){return r?e||n?function(){var t="function"==typeof n?n.call(r):n,i="function"==typeof e?e.call(r):void 0;return t?O(t,i):i}:void 0:n?"function"!=typeof n?("production"!==t.env.NODE_ENV&&Bi('The "data" option should be a function that returns a per-instance value in component definitions.',r),e):e?function(){return O(n.call(this),e.call(this))}:n:e},Ei._lifecycleHooks.forEach(function(e){Zi[e]=N}),Ei._assetTypes.forEach(function(e){Zi[e+"s"]=D}),Zi.watch=function(e,t){if(!t)return e;if(!e)return t;var n={};d(n,e);for(var r in t){var i=n[r],o=t[r];i&&!Array.isArray(i)&&(i=[i]),n[r]=i?i.concat(o):[o]}return n},Zi.props=Zi.methods=Zi.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return d(n,e),d(n,t),n};var Ki,Ji=function(e,t){return void 0===t?e:t},Qi=Object.freeze({defineReactive:L,_toString:r,toNumber:i,makeMap:o,isBuiltInTag:pi,remove:a,hasOwn:s,isPrimitive:l,cached:c,camelize:gi,capitalize:yi,hyphenate:xi,bind:u,toArray:h,extend:d,isObject:f,isPlainObject:p,toObject:m,noop:v,no:Mi,identity:Si,genStaticKeys:g,looseEqual:y,looseIndexOf:b,isReserved:x,def:w,parsePath:_,hasProto:Ci,inBrowser:Ai,UA:Li,isIE:Ri,isIE9:Pi,isEdge:ki,isAndroid:Oi,isIOS:Ni,isServerRendering:Di,devtools:Ii,nextTick:Ui,get _Set(){return fi},mergeOptions:B,resolveAsset:z,get warn(){return Bi},get formatComponentName(){return Fi},validateProp:j});if("production"!==t.env.NODE_ENV){var eo=o("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),to=function(e,t){Bi('Property or method "'+t+'" is not defined on the instance but referenced during render. Make sure to declare reactive data properties in the data option.',e)},no="undefined"!=typeof Proxy&&Proxy.toString().match(/native code/);if(no){var ro=o("stop,prevent,self,ctrl,shift,alt,meta");Ei.keyCodes=new Proxy(Ei.keyCodes,{set:function(e,t,n){return ro(t)?(Bi("Avoid overwriting built-in modifier in config.keyCodes: ."+t),!1):(e[t]=n,!0)}})}var io={has:function e(t,n){var e=n in t,r=eo(n)||"_"===n.charAt(0);return e||r||to(t,n),e||!r}},oo={get:function(e,t){return"string"!=typeof t||t in e||to(e,t),e[t]}};Ki=function(e){if(no){var t=e.$options,n=t.render&&t.render._withStripped?oo:io;e._renderProxy=new Proxy(e,n)}else e._renderProxy=e}}var ao=[],so={},lo={},co=!1,uo=!1,ho=0,fo=0,po=function(e,n,r,i){this.vm=e,e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++fo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new fi,this.newDepIds=new fi,this.expression="production"!==t.env.NODE_ENV?n.toString():"","function"==typeof n?this.getter=n:(this.getter=_(n),this.getter||(this.getter=function(){},"production"!==t.env.NODE_ENV&&Bi('Failed watching path: "'+n+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',e))),this.value=this.lazy?void 0:this.get()};po.prototype.get=function(){S(this);var e=this.getter.call(this.vm,this.vm);return this.deep&&Z(e),E(),this.cleanupDeps(),e},po.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},po.prototype.cleanupDeps=function(){for(var e=this,t=this.deps.length;t--;){var n=e.deps[t];e.newDepIds.has(n.id)||n.removeSub(e)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},po.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():$(this)},po.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||f(e)||this.deep){var n=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,n)}catch(e){if(!Ei.errorHandler)throw"production"!==t.env.NODE_ENV&&Bi('Error in watcher "'+this.expression+'"',this.vm),e;Ei.errorHandler.call(null,e,this.vm)}else this.cb.call(this.vm,e,n)}}},po.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},po.prototype.depend=function(){for(var e=this,t=this.deps.length;t--;)e.deps[t].depend()},po.prototype.teardown=function(){var e=this;if(this.active){this.vm._isBeingDestroyed||a(this.vm._watchers,this);for(var t=this.deps.length;t--;)e.deps[t].removeSub(e);this.active=!1}};var mo,vo=new fi,go={key:1,ref:1,slot:1},yo={enumerable:!0,configurable:!0,get:v,set:v},bo=function(e,t,n,r,i,o,a){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.functionalContext=void 0,this.key=t&&t.key,this.componentOptions=a,this.child=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1},xo=function(){var e=new bo;return e.text="",e.isComment=!0,e},wo=null,_o={init:Re,prepatch:Pe,insert:ke,destroy:Oe},Mo=Object.keys(_o),So=1,Eo=2,To=0;We(Ye),ae(Ye),Me(Ye),Ee(Ye),He(Ye);var Co=[String,RegExp],Ao={name:"keep-alive",abstract:!0,props:{include:Co,exclude:Co},created:function(){this.cache=Object.create(null)},render:function(){var e=ye(this.$slots.default);if(e&&e.componentOptions){var t=e.componentOptions,n=t.Ctor.options.name||t.tag;if(n&&(this.include&&!Qe(this.include,n)||this.exclude&&Qe(this.exclude,n)))return e;var r=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;this.cache[r]?e.child=this.cache[r].child:this.cache[r]=e,e.data.keepAlive=!0}return e},destroyed:function(){var e=this;for(var t in this.cache){var n=e.cache[t];Te(n.child,"deactivated"),n.child.$destroy()}}},Lo={KeepAlive:Ao};et(Ye),Object.defineProperty(Ye.prototype,"$isServer",{get:Di}),Ye.version="2.1.8";var Ro,Po,ko=o("input,textarea,option,select"),Oo=function(e,t){return"value"===t&&ko(e)||"selected"===t&&"option"===e||"checked"===t&&"input"===e||"muted"===t&&"video"===e},No=o("contenteditable,draggable,spellcheck"),Do=o("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Io="http://www.w3.org/1999/xlink",Uo=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Fo=function(e){return Uo(e)?e.slice(6,e.length):""},Bo=function(e){return null==e||e===!1},zo={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},jo=o("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template"),Go=o("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Ho=function(e){return"pre"===e},Vo=function(e){return jo(e)||Go(e)},Wo=Object.create(null),Xo=Object.freeze({createElement:ct,createElementNS:ut,createTextNode:ht,createComment:dt,insertBefore:ft,removeChild:pt,appendChild:mt,parentNode:vt,nextSibling:gt,tagName:yt,setTextContent:bt,setAttribute:xt}),qo={create:function(e,t){wt(t)},update:function(e,t){e.data.ref!==t.data.ref&&(wt(e,!0),wt(t))},destroy:function(e){wt(e,!0)}},Yo=new bo("",{},[]),$o=["create","activate","update","remove","destroy"],Zo={create:Ct,update:Ct,destroy:function(e){Ct(e,Yo)}},Ko=Object.create(null),Jo=[qo,Zo],Qo={create:kt,update:kt},ea={create:Nt,update:Nt},ta={create:Ut,update:Ut},na={create:Ft,update:Ft},ra=c(function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach(function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}),ia=/^--/,oa=/\s*!important$/,aa=function(e,t,n){ia.test(t)?e.style.setProperty(t,n):oa.test(n)?e.style.setProperty(t,n.replace(oa,""),"important"):e.style[la(t)]=n},sa=["Webkit","Moz","ms"],la=c(function(e){if(Po=Po||document.createElement("div"),e=gi(e),"filter"!==e&&e in Po.style)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<sa.length;n++){var r=sa[n]+t;if(r in Po.style)return r}}),ca={create:Wt,update:Wt},ua=Ai&&!Pi,ha="transition",da="animation",fa="transition",pa="transitionend",ma="animation",va="animationend";ua&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(fa="WebkitTransition",pa="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ma="WebkitAnimation",va="webkitAnimationEnd"));var ga=Ai&&window.requestAnimationFrame||setTimeout,ya=/\b(transform|all)(,|$)/,ba=c(function(e){return{enterClass:e+"-enter",leaveClass:e+"-leave",appearClass:e+"-enter",enterToClass:e+"-enter-to",leaveToClass:e+"-leave-to",appearToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveActiveClass:e+"-leave-active",appearActiveClass:e+"-enter-active"}}),xa=Ai?{create:an,activate:an,remove:function(e,t){e.data.show?t():nn(e,t)}}:{},wa=[Qo,ea,ta,na,ca,xa],_a=wa.concat(Jo),Ma=Tt({nodeOps:Xo,modules:_a}),Sa=/^input|select|textarea|vue-component-[0-9]+(-[0-9a-zA-Z_-]*)?$/;Pi&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&dn(e,"input")});var Ea={inserted:function(e,n,r){if("production"!==t.env.NODE_ENV&&(Sa.test(r.tag)||Bi("v-model is not supported on element type: <"+r.tag+">. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.",r.context)),"select"===r.tag){var i=function(){sn(e,n,r.context)};i(),(Ri||ki)&&setTimeout(i,0)}else"textarea"!==r.tag&&"text"!==e.type||(e._vModifiers=n.modifiers,n.modifiers.lazy||(Oi||(e.addEventListener("compositionstart",un),e.addEventListener("compositionend",hn)),Pi&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){sn(e,t,n.context);var r=e.multiple?t.value.some(function(t){return ln(t,e.options)}):t.value!==t.oldValue&&ln(t.value,e.options);r&&dn(e,"change")}}},Ta={bind:function(e,t,n){var r=t.value;n=fn(n);var i=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i&&!Pi?(n.data.show=!0,tn(n,function(){e.style.display=o})):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value,i=t.oldValue;if(r!==i){n=fn(n);var o=n.data&&n.data.transition;o&&!Pi?(n.data.show=!0,r?tn(n,function(){e.style.display=e.__vOriginalDisplay}):nn(n,function(){e.style.display="none"})):e.style.display=r?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},Ca={model:Ea,show:Ta},Aa={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String},La={name:"transition",props:Aa,abstract:!0,render:function(e){var n=this,r=this.$slots.default;if(r&&(r=r.filter(function(e){return e.tag}),r.length)){"production"!==t.env.NODE_ENV&&r.length>1&&Bi("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var i=this.mode;"production"!==t.env.NODE_ENV&&i&&"in-out"!==i&&"out-in"!==i&&Bi("invalid <transition> mode: "+i,this.$parent);var o=r[0];if(gn(this.$vnode))return o;var a=pn(o);if(!a)return o;if(this._leaving)return vn(e,o);var s=a.key=null==a.key||a.isStatic?"__v"+(a.tag+this._uid)+"__":a.key,l=(a.data||(a.data={})).transition=mn(this),c=this._vnode,u=pn(c);if(a.data.directives&&a.data.directives.some(function(e){return"show"===e.name})&&(a.data.show=!0),u&&u.data&&!yn(a,u)){var h=u&&(u.data.transition=d({},l));if("out-in"===i)return this._leaving=!0,he(h,"afterLeave",function(){n._leaving=!1,n.$forceUpdate()},s),vn(e,o);if("in-out"===i){var f,p=function(){f()};he(l,"afterEnter",p,s),he(l,"enterCancelled",p,s),he(h,"delayLeave",function(e){f=e},s)}}return o}}},Ra=d({tag:String,moveClass:String},Aa);delete Ra.mode;var Pa={props:Ra,render:function(e){for(var n=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),i=this.prevChildren=this.children,o=this.$slots.default||[],a=this.children=[],s=mn(this),l=0;l<o.length;l++){var c=o[l];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))a.push(c),r[c.key]=c,(c.data||(c.data={})).transition=s;else if("production"!==t.env.NODE_ENV){var u=c.componentOptions,h=u?u.Ctor.options.name||u.tag:c.tag;Bi("<transition-group> children must be keyed: <"+h+">")}}if(i){for(var d=[],f=[],p=0;p<i.length;p++){var m=i[p];m.data.transition=s,m.data.pos=m.elm.getBoundingClientRect(),r[m.key]?d.push(m):f.push(m)}this.kept=e(n,null,d),this.removed=f}return e(n,null,a)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";if(e.length&&this.hasMove(e[0].elm,t)){e.forEach(bn),e.forEach(xn),e.forEach(wn);document.body.offsetHeight;e.forEach(function(e){if(e.data.moved){var n=e.elm,r=n.style;$t(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(pa,n._moveCb=function e(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(pa,e),n._moveCb=null,Zt(n,t))})}})}},methods:{hasMove:function(e,t){if(!ua)return!1;if(null!=this._hasMove)return this._hasMove;$t(e,t);var n=Jt(e);return Zt(e,t),this._hasMove=n.hasTransform}}},ka={Transition:La,TransitionGroup:Pa};Ye.config.isUnknownElement=st,Ye.config.isReservedTag=Vo,Ye.config.getTagNamespace=at,Ye.config.mustUseProp=Oo,d(Ye.options.directives,Ca),d(Ye.options.components,ka),Ye.prototype.__patch__=Ai?Ma:v,Ye.prototype.$mount=function(e,t){return e=e&&Ai?lt(e):void 0,this._mount(e,t)},"production"!==t.env.NODE_ENV&&Ai&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html"),setTimeout(function(){Ei.devtools&&(Ii?Ii.emit("init",Ye):"production"!==t.env.NODE_ENV&&Ai&&!ki&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0);var Oa,Na=!!Ai&&_n("\n","&#10;"),Da=o("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr",!0),Ia=o("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source",!0),Ua=o("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track",!0),Fa=/([^\s"'<>\/=]+)/,Ba=/(?:=)/,za=[/"([^"]*)"+/.source,/'([^']*)'+/.source,/([^\s"'=<>`]+)/.source],ja=new RegExp("^\\s*"+Fa.source+"(?:\\s*("+Ba.source+")\\s*(?:"+za.join("|")+"))?"),Ga="[a-zA-Z_][\\w\\-\\.]*",Ha="((?:"+Ga+"\\:)?"+Ga+")",Va=new RegExp("^<"+Ha),Wa=/^\s*(\/?)>/,Xa=new RegExp("^<\\/"+Ha+"[^>]*>"),qa=/^<!DOCTYPE [^>]+>/i,Ya=/^<!--/,$a=/^<!\[/,Za=!1;"x".replace(/x(.)?/g,function(e,t){Za=""===t});var Ka,Ja,Qa,es,ts,ns,rs,is,os,as,ss,ls,cs,us,hs,ds,fs,ps,ms,vs,gs,ys,bs,xs,ws,_s=o("script,style",!0),Ms=function(e){return"lang"===e.name&&"html"!==e.value},Ss=function(e,t,n){return!!_s(e)||!(!t||1!==n.length)&&!("template"===e&&!n[0].attrs.some(Ms))},Es={},Ts=/&lt;/g,Cs=/&gt;/g,As=/&#10;/g,Ls=/&amp;/g,Rs=/&quot;/g,Ps=/\{\{((?:.|\n)+?)\}\}/g,ks=/[-.*+?^${}()|[\]\/\\]/g,Os=c(function(e){var t=e[0].replace(ks,"\\$&"),n=e[1].replace(ks,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}),Ns=/^v-|^@|^:/,Ds=/(.*?)\s+(?:in|of)\s+(.*)/,Is=/\((\{[^}]*\}|[^,]*),([^,]*)(?:,([^,]*))?\)/,Us=/^:|^v-bind:/,Fs=/^@|^v-on:/,Bs=/:(.*)$/,zs=/\.[^.]+/g,js=c(Mn),Gs=/^xmlns:NS\d+/,Hs=/^NS\d+:/,Vs=c(ur),Ws=/^\s*([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,Xs=/^\s*[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?']|\[".*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*\s*$/,qs={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Ys={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:"if($event.target !== $event.currentTarget)return;",ctrl:"if(!$event.ctrlKey)return;",shift:"if(!$event.shiftKey)return;",alt:"if(!$event.altKey)return;",meta:"if(!$event.metaKey)return;"},$s={bind:xr,cloak:v},Zs=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),Ks=/[A-Za-z_$][\w$]*/,Js=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g,Qs={staticKeys:["staticClass"],transformNode:$r,genData:Zr},el={staticKeys:["staticStyle"],transformNode:Kr,genData:Jr},tl=[Qs,el],nl={model:Qr,text:ai,html:si},rl=Object.create(null),il={expectHTML:!0,modules:tl,staticKeys:g(tl),directives:nl,isReservedTag:Vo,isUnaryTag:Da,mustUseProp:Oo,getTagNamespace:at,isPreTag:Ho},ol=c(function(e){var t=lt(e);return t&&t.innerHTML}),al=Ye.prototype.$mount;Ye.prototype.$mount=function(e,n){if(e=e&&lt(e),e===document.body||e===document.documentElement)return"production"!==t.env.NODE_ENV&&Bi("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var r=this.$options;if(!r.render){var i=r.template;if(i)if("string"==typeof i)"#"===i.charAt(0)&&(i=ol(i),"production"===t.env.NODE_ENV||i||Bi("Template element not found or is empty: "+r.template,this));else{if(!i.nodeType)return"production"!==t.env.NODE_ENV&&Bi("invalid template option:"+i,this),this;i=i.innerHTML}else e&&(i=hi(e));if(i){var o=ci(i,{warn:Bi,shouldDecodeNewlines:Na,delimiters:r.delimiters},this),a=o.render,s=o.staticRenderFns;r.render=a,r.staticRenderFns=s}}return al.call(this,e,n)},Ye.compile=ci,e.exports=Ye}).call(t,n(4),function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){m&&f&&(m=!1,f.length?p=f.concat(p):v=-1,p.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=p.length;t;){for(f=p,p=[];++v<t;)f&&f[v].run();v=-1,t=p.length}f=null,m=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,h,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var f,p=[],m=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){}function n(e,t){this.x=e||0,this.y=t||0}function r(e,t,o,a,s,l,c,u,h,d){Object.defineProperty(this,"id",{value:i()}),this.uuid=Ua.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==e?e:r.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:r.DEFAULT_MAPPING,this.wrapS=void 0!==o?o:Ro,this.wrapT=void 0!==a?a:Ro,this.magFilter=void 0!==s?s:Io,this.minFilter=void 0!==l?l:Fo,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:ea,this.type=void 0!==u?u:zo,this.offset=new n(0,0),this.repeat=new n(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:Ca,this.version=0,this.onUpdate=null}function i(){return Fa++}function o(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function a(e,t,n){this.uuid=Ua.generateUUID(),this.width=e,this.height=t,this.scissor=new o(0,0,e,t),this.scissorTest=!1,this.viewport=new o(0,0,e,t),n=n||{},void 0===n.minFilter&&(n.minFilter=Io),this.texture=new r(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function s(e,t,n){a.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function l(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function c(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function u(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(e,t,n,i,o,a,s,l,c,u){e=void 0!==e?e:[],t=void 0!==t?t:wo,r.call(this,e,t,n,i,o,a,s,l,c,u),this.flipY=!1}function d(){this.seq=[],this.map={}}function f(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=ja[i];if(void 0===o&&(o=new Float32Array(i),ja[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function p(e,t){var n=Ga[t];void 0===n&&(n=new Int32Array(t),Ga[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function m(e,t){e.uniform1f(this.addr,t)}function v(e,t){e.uniform1i(this.addr,t)}function g(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function y(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function b(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function x(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function w(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function _(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function M(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||Ba,r)}function S(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||za,r)}function E(e,t){e.uniform2iv(this.addr,t)}function T(e,t){e.uniform3iv(this.addr,t)}function C(e,t){e.uniform4iv(this.addr,t)}function A(e){switch(e){case 5126:return m;case 35664:return g;case 35665:return y;case 35666:return b;case 35674:return x;case 35675:return w;case 35676:return _;case 35678:return M;case 35680:return S;case 5124:case 35670:return v;case 35667:case 35671:return E;case 35668:case 35672:return T;case 35669:case 35673:return C}}function L(e,t){e.uniform1fv(this.addr,t)}function R(e,t){e.uniform1iv(this.addr,t)}function P(e,t){e.uniform2fv(this.addr,f(t,this.size,2))}function k(e,t){e.uniform3fv(this.addr,f(t,this.size,3))}function O(e,t){e.uniform4fv(this.addr,f(t,this.size,4))}function N(e,t){e.uniformMatrix2fv(this.addr,!1,f(t,this.size,4))}function D(e,t){e.uniformMatrix3fv(this.addr,!1,f(t,this.size,9))}function I(e,t){e.uniformMatrix4fv(this.addr,!1,f(t,this.size,16))}function U(e,t,n){var r=t.length,i=p(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(t[o]||Ba,i[o])}function F(e,t,n){var r=t.length,i=p(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(t[o]||za,i[o])}function B(e){switch(e){case 5126:return L;case 35664:return P;case 35665:return k;case 35666:return O;case 35674:return N;case 35675:return D;case 35676:return I;case 35678:return U;case 35680:return F;case 5124:case 35670:return R;case 35667:case 35671:return E;case 35668:case 35672:return T;case 35669:case 35673:return C}}function z(e,t,n){this.id=e,this.addr=n,this.setValue=A(t.type)}function j(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=B(t.type)}function G(e){this.id=e,d.call(this)}function H(e,t){e.seq.push(t),e.map[t.id]=t}function V(e,t,n){var r=e.name,i=r.length;for(Ha.lastIndex=0;;){var o=Ha.exec(r),a=Ha.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){H(n,void 0===c?new z(s,e,t):new j(s,e,t));break}var u=n.map,h=u[s];void 0===h&&(h=new G(s),H(n,h)),n=h}}function W(e,t,n){d.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i!==r;++i){var o=e.getActiveUniform(t,i),a=o.name,s=e.getUniformLocation(t,a);V(o,s,this)}}function X(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function q(e,t){this.min=void 0!==e?e:new n(+(1/0),+(1/0)),this.max=void 0!==t?t:new n(-(1/0),-(1/0))}function Y(e,t){function r(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);o=p.createBuffer(),a=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,o),p.bufferData(p.ARRAY_BUFFER,e,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),p.bufferData(p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),d=p.createTexture(),f=p.createTexture(),m.bindTexture(p.TEXTURE_2D,d),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),
p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),m.bindTexture(p.TEXTURE_2D,f),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},l=i(s),u={vertex:p.getAttribLocation(l,"position"),uv:p.getAttribLocation(l,"uv")},h={renderType:p.getUniformLocation(l,"renderType"),map:p.getUniformLocation(l,"map"),occlusionMap:p.getUniformLocation(l,"occlusionMap"),opacity:p.getUniformLocation(l,"opacity"),color:p.getUniformLocation(l,"color"),scale:p.getUniformLocation(l,"scale"),rotation:p.getUniformLocation(l,"rotation"),screenPosition:p.getUniformLocation(l,"screenPosition")}}function i(t){var n=p.createProgram(),r=p.createShader(p.FRAGMENT_SHADER),i=p.createShader(p.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return p.shaderSource(r,o+t.fragmentShader),p.shaderSource(i,o+t.vertexShader),p.compileShader(r),p.compileShader(i),p.attachShader(n,r),p.attachShader(n,i),p.linkProgram(n),n}var o,a,s,l,u,h,d,f,p=e.context,m=e.state;this.render=function(i,s,v){if(0!==t.length){var g=new c,y=v.w/v.z,b=.5*v.z,x=.5*v.w,w=16/v.w,_=new n(w*y,w),M=new c(1,1,0),S=new n(1,1),E=new q;E.min.set(v.x,v.y),E.max.set(v.x+(v.z-16),v.y+(v.w-16)),void 0===l&&r(),p.useProgram(l),m.initAttributes(),m.enableAttribute(u.vertex),m.enableAttribute(u.uv),m.disableUnusedAttributes(),p.uniform1i(h.occlusionMap,0),p.uniform1i(h.map,1),p.bindBuffer(p.ARRAY_BUFFER,o),p.vertexAttribPointer(u.vertex,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(u.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),m.disable(p.CULL_FACE),m.setDepthWrite(!1);for(var T=0,C=t.length;T<C;T++){w=16/v.w,_.set(w*y,w);var A=t[T];if(g.set(A.matrixWorld.elements[12],A.matrixWorld.elements[13],A.matrixWorld.elements[14]),g.applyMatrix4(s.matrixWorldInverse),g.applyProjection(s.projectionMatrix),M.copy(g),S.x=v.x+M.x*b+b-8,S.y=v.y+M.y*x+x-8,E.containsPoint(S)===!0){m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,null),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,d),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,S.x,S.y,16,16,0),p.uniform1i(h.renderType,0),p.uniform2f(h.scale,_.x,_.y),p.uniform3f(h.screenPosition,M.x,M.y,M.z),m.disable(p.BLEND),m.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,f),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,S.x,S.y,16,16,0),p.uniform1i(h.renderType,1),m.disable(p.DEPTH_TEST),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,d),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),A.positionScreen.copy(M),A.customUpdateCallback?A.customUpdateCallback(A):A.updateLensFlares(),p.uniform1i(h.renderType,2),m.enable(p.BLEND);for(var L=0,R=A.lensFlares.length;L<R;L++){var P=A.lensFlares[L];P.opacity>.001&&P.scale>.001&&(M.x=P.x,M.y=P.y,M.z=P.z,w=P.size*P.scale/v.w,_.x=w*y,_.y=w,p.uniform3f(h.screenPosition,M.x,M.y,M.z),p.uniform2f(h.scale,_.x,_.y),p.uniform1f(h.rotation,P.rotation),p.uniform1f(h.opacity,P.opacity),p.uniform3f(h.color,P.color.r,P.color.g,P.color.b),m.setBlending(P.blending,P.blendEquation,P.blendSrc,P.blendDst),e.setTexture2D(P.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}m.enable(p.CULL_FACE),m.enable(p.DEPTH_TEST),m.setDepthWrite(!0),e.resetGLState()}}}function $(e,t){function n(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),s=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,e,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.bufferData(p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),u=i(),h={position:p.getAttribLocation(u,"position"),uv:p.getAttribLocation(u,"uv")},d={uvOffset:p.getUniformLocation(u,"uvOffset"),uvScale:p.getUniformLocation(u,"uvScale"),rotation:p.getUniformLocation(u,"rotation"),scale:p.getUniformLocation(u,"scale"),color:p.getUniformLocation(u,"color"),map:p.getUniformLocation(u,"map"),opacity:p.getUniformLocation(u,"opacity"),modelViewMatrix:p.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(u,"projectionMatrix"),fogType:p.getUniformLocation(u,"fogType"),fogDensity:p.getUniformLocation(u,"fogDensity"),fogNear:p.getUniformLocation(u,"fogNear"),fogFar:p.getUniformLocation(u,"fogFar"),fogColor:p.getUniformLocation(u,"fogColor"),alphaTest:p.getUniformLocation(u,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var o=n.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),f=new r(n),f.needsUpdate=!0}function i(){var t=p.createProgram(),n=p.createShader(p.VERTEX_SHADER),r=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(n),p.compileShader(r),p.attachShader(t,n),p.attachShader(t,r),p.linkProgram(t),t}function o(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var a,s,u,h,d,f,p=e.context,m=e.state,v=new c,g=new l,y=new c;this.render=function(r,i){if(0!==t.length){void 0===u&&n(),p.useProgram(u),m.initAttributes(),m.enableAttribute(h.position),m.enableAttribute(h.uv),m.disableUnusedAttributes(),m.disable(p.CULL_FACE),m.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(h.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(h.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,s),p.uniformMatrix4fv(d.projectionMatrix,!1,i.projectionMatrix.elements),m.activeTexture(p.TEXTURE0),p.uniform1i(d.map,0);var l=0,c=0,b=r.fog;b?(p.uniform3f(d.fogColor,b.color.r,b.color.g,b.color.b),b&&b.isFog?(p.uniform1f(d.fogNear,b.near),p.uniform1f(d.fogFar,b.far),p.uniform1i(d.fogType,1),l=1,c=1):b&&b.isFogExp2&&(p.uniform1f(d.fogDensity,b.density),p.uniform1i(d.fogType,2),l=2,c=2)):(p.uniform1i(d.fogType,0),l=0,c=0);for(var x=0,w=t.length;x<w;x++){var _=t[x];_.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,_.matrixWorld),_.z=-_.modelViewMatrix.elements[14]}t.sort(o);for(var M=[],x=0,w=t.length;x<w;x++){var _=t[x],S=_.material;if(S.visible!==!1){p.uniform1f(d.alphaTest,S.alphaTest),p.uniformMatrix4fv(d.modelViewMatrix,!1,_.modelViewMatrix.elements),_.matrixWorld.decompose(v,g,y),M[0]=y.x,M[1]=y.y;var E=0;r.fog&&S.fog&&(E=c),l!==E&&(p.uniform1i(d.fogType,E),l=E),null!==S.map?(p.uniform2f(d.uvOffset,S.map.offset.x,S.map.offset.y),p.uniform2f(d.uvScale,S.map.repeat.x,S.map.repeat.y)):(p.uniform2f(d.uvOffset,0,0),p.uniform2f(d.uvScale,1,1)),p.uniform1f(d.opacity,S.opacity),p.uniform3f(d.color,S.color.r,S.color.g,S.color.b),p.uniform1f(d.rotation,S.rotation),p.uniform2fv(d.scale,M),m.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),m.setDepthTest(S.depthTest),m.setDepthWrite(S.depthWrite),S.map?e.setTexture2D(S.map,0):e.setTexture2D(f,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}}m.enable(p.CULL_FACE),e.resetGLState()}}}function Z(){Object.defineProperty(this,"id",{value:K()}),this.uuid=Ua.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Di,this.side=Ti,this.shading=Ri,this.vertexColors=Pi,this.opacity=1,this.transparent=!1,this.blendSrc=Zi,this.blendDst=Ki,this.blendEquation=ji,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ao,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function K(){return Xl++}function J(e){Z.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Q(e){Z.call(this),this.type="MeshDepthMaterial",this.depthPacking=Da,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function ee(e,t){this.min=void 0!==e?e:new c(+(1/0),+(1/0),+(1/0)),this.max=void 0!==t?t:new c(-(1/0),-(1/0),-(1/0))}function te(e,t){this.center=void 0!==e?e:new c,this.radius=void 0!==t?t:0}function ne(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function re(e,t){this.normal=void 0!==e?e:new c(1,0,0),this.constant=void 0!==t?t:0}function ie(e,t,n,r,i,o){this.planes=[void 0!==e?e:new re,void 0!==t?t:new re,void 0!==n?n:new re,void 0!==r?r:new re,void 0!==i?i:new re,void 0!==o?o:new re]}function oe(e,t,r,i){function s(t,n,r,i){var o=t.geometry,a=null,s=S,l=t.customDepthMaterial;if(r&&(s=E,l=t.customDistanceMaterial),l)a=l;else{var c=!1;n.morphTargets&&(o&&o.isBufferGeometry?c=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(c=o.morphTargets&&o.morphTargets.length>0));var u=t.isSkinnedMesh&&n.skinning,h=0;c&&(h|=w),u&&(h|=_),a=s[h]}if(e.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var d=a.uuid,f=n.uuid,p=T[d];void 0===p&&(p={},T[d]=p);var m=p[f];void 0===m&&(m=a.clone(),p[f]=m),a=m}a.visible=n.visible,a.wireframe=n.wireframe;var v=n.side;return F.renderSingleSided&&v==Ai&&(v=Ti),F.renderReverseSided&&(v===Ti?v=Ci:v===Ci&&(v=Ti)),a.side=v,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,r&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(i),a}function l(e,t,n){if(e.visible!==!1){var r=0!==(e.layers.mask&t.layers.mask);if(r&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(e.frustumCulled===!1||f.intersectsObject(e)===!0)){var i=e.material;i.visible===!0&&(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),x.push(e))}for(var o=e.children,a=0,s=o.length;a<s;a++)l(o[a],t,n)}}var h=e.context,d=e.state,f=new ie,p=new u,m=t.shadows,v=new n,g=new n(i.maxTextureSize,i.maxTextureSize),y=new c,b=new c,x=[],w=1,_=2,M=(w|_)+1,S=new Array(M),E=new Array(M),T={},C=[new c(1,0,0),new c(-1,0,0),new c(0,0,1),new c(0,0,-1),new c(0,1,0),new c(0,-1,0)],A=[new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,0,1),new c(0,0,-1)],L=[new o,new o,new o,new o,new o,new o],R=new Q;R.depthPacking=Ia,R.clipping=!0;for(var P=Wl.distanceRGBA,k=Va.clone(P.uniforms),O=0;O!==M;++O){var N=0!==(O&w),D=0!==(O&_),I=R.clone();I.morphTargets=N,I.skinning=D,S[O]=I;var U=new J({defines:{USE_SHADOWMAP:""},uniforms:k,vertexShader:P.vertexShader,fragmentShader:P.fragmentShader,morphTargets:N,skinning:D,clipping:!0});E[O]=U}var F=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Si,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,n){if(F.enabled!==!1&&(F.autoUpdate!==!1||F.needsUpdate!==!1)&&0!==m.length){d.clearColor(1,1,1,1),d.disable(h.BLEND),d.setDepthTest(!0),d.setScissorTest(!1);for(var i,o,c=0,u=m.length;c<u;c++){var w=m[c],_=w.shadow;if(void 0!==_){var M=_.camera;if(v.copy(_.mapSize),v.min(g),w&&w.isPointLight){i=6,o=!0;var S=v.x,E=v.y;L[0].set(2*S,E,S,E),L[1].set(0,E,S,E),L[2].set(3*S,E,S,E),L[3].set(S,E,S,E),L[4].set(3*S,0,S,E),L[5].set(S,0,S,E),v.x*=4,v.y*=2}else i=1,o=!1;if(null===_.map){var T={minFilter:Oo,magFilter:Oo,format:ea};_.map=new a(v.x,v.y,T),M.updateProjectionMatrix()}_&&_.isSpotLightShadow&&_.update(w);var R=_.map,P=_.matrix;b.setFromMatrixPosition(w.matrixWorld),M.position.copy(b),e.setRenderTarget(R),e.clear();for(var k=0;k<i;k++){if(o){y.copy(M.position),y.add(C[k]),M.up.copy(A[k]),M.lookAt(y);var O=L[k];d.viewport(O)}else y.setFromMatrixPosition(w.target.matrixWorld),M.lookAt(y);M.updateMatrixWorld(),M.matrixWorldInverse.getInverse(M.matrixWorld),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(M.projectionMatrix),P.multiply(M.matrixWorldInverse),p.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),f.setFromMatrix(p),x.length=0,l(t,n,M);for(var N=0,D=x.length;N<D;N++){var I=x[N],U=r.update(I),B=I.material;if(B&&B.isMultiMaterial)for(var z=U.groups,j=B.materials,G=0,H=z.length;G<H;G++){var V=z[G],W=j[V.materialIndex];if(W.visible===!0){var X=s(I,W,o,b);e.renderBufferDirect(M,null,U,X,I,V)}}else{var X=s(I,B,o,b);e.renderBufferDirect(M,null,U,X,I,null)}}}}else console.warn("THREE.WebGLShadowMap:",w,"has no shadow.")}var q=e.getClearColor(),Y=e.getClearAlpha();e.setClearColor(q,Y),F.needsUpdate=!1}}}function ae(e,t){this.origin=void 0!==e?e:new c,this.direction=void 0!==t?t:new c}function se(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||se.DefaultOrder}function le(){this.mask=1}function ce(){function e(){i.setFromEuler(r,!1)}function t(){r.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:ue()}),this.uuid=Ua.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ce.DefaultUp.clone();var n=new c,r=new se,i=new l,o=new c(1,1,1);r.onChange(e),i.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:o},modelViewMatrix:{value:new u},normalMatrix:{value:new ne}}),this.matrix=new u,this.matrixWorld=new u,this.matrixAutoUpdate=ce.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new le,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function ue(){return ql++}function he(e,t){this.start=void 0!==e?e:new c,this.end=void 0!==t?t:new c}function de(e,t,n){this.a=void 0!==e?e:new c,this.b=void 0!==t?t:new c,this.c=void 0!==n?n:new c}function fe(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new c,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new X,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function pe(e){Z.call(this),this.type="MeshBasicMaterial",this.color=new X(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ho,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function me(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Ua.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ve(e,t){return new me(new Int8Array(e),t)}function ge(e,t){return new me(new Uint8Array(e),t)}function ye(e,t){return new me(new Uint8ClampedArray(e),t)}function be(e,t){return new me(new Int16Array(e),t)}function xe(e,t){return new me(new Uint16Array(e),t)}function we(e,t){return new me(new Int32Array(e),t)}function _e(e,t){return new me(new Uint32Array(e),t)}function Me(e,t){return new me(new Float32Array(e),t)}function Se(e,t){return new me(new Float64Array(e),t)}function Ee(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new me(e,t).setDynamic(!0)}function Te(){Object.defineProperty(this,"id",{value:Ce()}),this.uuid=Ua.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ce(){return Yl++}function Ae(){Object.defineProperty(this,"id",{value:Ce()}),this.uuid=Ua.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Le(){Object.defineProperty(this,"id",{value:Ce()}),this.uuid=Ua.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Re(e,t){ce.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Le,this.material=void 0!==t?t:new pe({color:16777215*Math.random()}),this.drawMode=Sa,this.updateMorphTargets()}function Pe(e,t,n,r,i,o){function a(e,t,n){var r=0;return r+=(e+1)*(t+1)*2,r+=(e+1)*(n+1)*2,r+=(n+1)*(t+1)*2}function s(e,t,n){var r=0;return r+=e*t*2,r+=e*n*2,r+=n*t*2,6*r}function l(e,t,n,r,i,o,a,s,l,h,d){for(var _=o/l,M=a/h,S=o/2,E=a/2,T=s/2,C=l+1,A=h+1,L=0,R=0,P=new c,k=0;k<A;k++)for(var O=k*M-E,N=0;N<C;N++){var D=N*_-S;P[e]=D*r,P[t]=O*i,P[n]=T,p[g]=P.x,p[g+1]=P.y,p[g+2]=P.z,P[e]=0,P[t]=0,P[n]=s>0?1:-1,m[g]=P.x,m[g+1]=P.y,m[g+2]=P.z,v[y]=N/l,v[y+1]=1-k/h,g+=3,y+=2,L+=1}for(k=0;k<h;k++)for(N=0;N<l;N++){var I=x+N+C*k,U=x+N+C*(k+1),F=x+(N+1)+C*(k+1),B=x+(N+1)+C*k;f[b]=I,f[b+1]=U,f[b+2]=B,f[b+3]=U,f[b+4]=F,f[b+5]=B,b+=6,R+=6}u.addGroup(w,R,d),w+=R,x+=L}Le.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var u=this;r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var h=a(r,i,o),d=s(r,i,o),f=new(d>65535?Uint32Array:Uint16Array)(d),p=new Float32Array(3*h),m=new Float32Array(3*h),v=new Float32Array(2*h),g=0,y=0,b=0,x=0,w=0;l("z","y","x",-1,-1,n,t,e,o,i,0),l("z","y","x",1,-1,n,t,-e,o,i,1),l("x","z","y",1,1,e,n,t,r,o,2),l("x","z","y",1,-1,e,n,-t,r,o,3),l("x","y","z",1,-1,e,t,n,r,i,4),l("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(new me(f,1)),this.addAttribute("position",new me(p,3)),this.addAttribute("normal",new me(m,3)),this.addAttribute("uv",new me(v,2))}function ke(e,t,n,r){Le.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};for(var i=e/2,o=t/2,a=Math.floor(n)||1,s=Math.floor(r)||1,l=a+1,c=s+1,u=e/a,h=t/s,d=new Float32Array(l*c*3),f=new Float32Array(l*c*3),p=new Float32Array(l*c*2),m=0,v=0,g=0;g<c;g++)for(var y=g*h-o,b=0;b<l;b++){var x=b*u-i;d[m]=x,d[m+1]=-y,f[m+2]=1,p[v]=b/a,p[v+1]=1-g/s,m+=3,v+=2}m=0;for(var w=new(d.length/3>65535?Uint32Array:Uint16Array)(a*s*6),g=0;g<s;g++)for(var b=0;b<a;b++){var _=b+l*g,M=b+l*(g+1),S=b+1+l*(g+1),E=b+1+l*g;w[m]=_,w[m+1]=M,w[m+2]=E,w[m+3]=M,w[m+4]=S,w[m+5]=E,m+=6}this.setIndex(new me(w,1)),this.addAttribute("position",new me(d,3)),this.addAttribute("normal",new me(f,3)),this.addAttribute("uv",new me(p,2))}function Oe(){ce.call(this),this.type="Camera",this.matrixWorldInverse=new u,this.projectionMatrix=new u}function Ne(e,t,n,r){Oe.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function De(e,t,n,r,i,o){Oe.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ie(e,t,n){function r(e){s=e}function i(n){n.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(l=e.UNSIGNED_INT,c=4):(l=e.UNSIGNED_SHORT,c=2)}function o(t,r){e.drawElements(s,r,l,t*c),n.calls++,n.vertices+=r,s===e.TRIANGLES&&(n.faces+=r/3)}function a(r,i,o){var a=t.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(a.drawElementsInstancedANGLE(s,o,l,i*c,r.maxInstancedCount),n.calls++,n.vertices+=o*r.maxInstancedCount,void(s===e.TRIANGLES&&(n.faces+=r.maxInstancedCount*o/3)))}var s,l,c;return{setMode:r,setIndex:i,render:o,renderInstances:a}}function Ue(e,t,n){function r(e){a=e}function i(t,r){e.drawArrays(a,t,r),n.calls++,n.vertices+=r,a===e.TRIANGLES&&(n.faces+=r/3)}function o(r){var i=t.get("ANGLE_instanced_arrays");if(null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var o=r.attributes.position,s=0;o&&o.isInterleavedBufferAttribute?(s=o.data.count,i.drawArraysInstancedANGLE(a,0,s,r.maxInstancedCount)):(s=o.count,i.drawArraysInstancedANGLE(a,0,s,r.maxInstancedCount)),n.calls++,n.vertices+=s*r.maxInstancedCount,a===e.TRIANGLES&&(n.faces+=r.maxInstancedCount*s/3)}var a;return{setMode:r,render:i,renderInstances:o}}function Fe(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new c,color:new X,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":r={position:new c,direction:new c,color:new X,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":r={position:new c,color:new X,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"HemisphereLight":r={direction:new c,skyColor:new X,groundColor:new X}}return e[t.id]=r,r}}}function Be(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function ze(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),Be(n)),r}function je(e){switch(e){case Ca:return["Linear","( value )"];case Aa:return["sRGB","( value )"];case Ra:return["RGBE","( value )"];case ka:return["RGBM","( value, 7.0 )"];case Oa:return["RGBM","( value, 16.0 )"];case Na:return["RGBD","( value, 256.0 )"];case La:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ge(e,t){var n=je(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function He(e,t){var n=je(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ve(e,t){var n;switch(t){case vo:n="Linear";break;case go:n="Reinhard";break;case yo:n="Uncharted2";break;case bo:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function We(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(Ye).join("\n")}function Xe(e){var t=[];for(var n in e){var r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join("\n")}function qe(e,t,n){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=e.getActiveAttrib(t,o),s=a.name;r[s]=e.getAttribLocation(t,s)}return r}function Ye(e){return""!==e}function $e(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Ze(e){function t(e,t){var n=Gl[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ze(n)}var n=/#include +<([\w\d.]+)>/g;return e.replace(n,t)}function Ke(e){function t(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(n,t)}function Je(e,t,n,r){var i=e.context,o=n.extensions,a=n.defines,s=n.__webglShader.vertexShader,l=n.__webglShader.fragmentShader,c="SHADOWMAP_TYPE_BASIC";r.shadowMapType===Si?c="SHADOWMAP_TYPE_PCF":r.shadowMapType===Ei&&(c="SHADOWMAP_TYPE_PCF_SOFT");var u="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case wo:case _o:u="ENVMAP_TYPE_CUBE";break;case To:case Co:u="ENVMAP_TYPE_CUBE_UV";break;case Mo:case So:u="ENVMAP_TYPE_EQUIREC";break;case Eo:u="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case _o:case So:h="ENVMAP_MODE_REFRACTION"}switch(n.combine){case ho:d="ENVMAP_BLENDING_MULTIPLY";break;case fo:d="ENVMAP_BLENDING_MIX";break;case po:d="ENVMAP_BLENDING_ADD"}}var f,p,m=e.gammaFactor>0?e.gammaFactor:1,v=We(o,r,e.extensions),g=Xe(a),y=i.createProgram();n.isRawShaderMaterial?(f=[g,"\n"].filter(Ye).join("\n"),p=[v,g,"\n"].filter(Ye).join("\n")):(f=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,g,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ye).join("\n"),p=[v,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,g,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+m,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+h:"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==mo?"#define TONE_MAPPING":"",r.toneMapping!==mo?Gl.tonemapping_pars_fragment:"",r.toneMapping!==mo?Ve("toneMapping",r.toneMapping):"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?Gl.encodings_pars_fragment:"",r.mapEncoding?Ge("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?Ge("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Ge("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?He("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ye).join("\n")),
s=Ze(s,r),s=$e(s,r),l=Ze(l,r),l=$e(l,r),n.isShaderMaterial||(s=Ke(s),l=Ke(l));var b=f+s,x=p+l,w=ze(i,i.VERTEX_SHADER,b),_=ze(i,i.FRAGMENT_SHADER,x);i.attachShader(y,w),i.attachShader(y,_),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):r.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);var M=i.getProgramInfoLog(y),S=i.getShaderInfoLog(w),E=i.getShaderInfoLog(_),T=!0,C=!0;i.getProgramParameter(y,i.LINK_STATUS)===!1?(T=!1,console.error("THREE.WebGLProgram: shader error: ",i.getError(),"gl.VALIDATE_STATUS",i.getProgramParameter(y,i.VALIDATE_STATUS),"gl.getProgramInfoLog",M,S,E)):""!==M?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",M):""!==S&&""!==E||(C=!1),C&&(this.diagnostics={runnable:T,material:n,programLog:M,vertexShader:{log:S,prefix:f},fragmentShader:{log:E,prefix:p}}),i.deleteShader(w),i.deleteShader(_);var A;this.getUniforms=function(){return void 0===A&&(A=new W(i,y,e)),A};var L;return this.getAttributes=function(){return void 0===L&&(L=qe(i,y)),L},this.destroy=function(){i.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=$l++,this.code=t,this.usedTimes=1,this.program=y,this.vertexShader=w,this.fragmentShader=_,this}function Qe(e,t){function n(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var n=t.maxVertexUniforms,r=Math.floor((n-20)/4),i=r;return void 0!==e&&e&&e.isSkinnedMesh&&(i=Math.min(e.skeleton.bones.length,i),i<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)")),i}function r(e,t){var n;return e?e&&e.isTexture?n=e.encoding:e&&e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Ca,n===Ca&&t&&(n=La),n}var i=[],o={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];this.getParameters=function(i,a,s,l,c,u){var h=o[i.type],d=n(u),f=e.getPrecision();null!==i.precision&&(f=t.getMaxPrecision(i.precision),f!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",f,"instead."));var p=e.getCurrentRenderTarget(),m={shaderID:h,precision:f,supportsVertexTextures:t.vertexTextures,outputEncoding:r(p?p.texture:null,e.gammaOutput),map:!!i.map,mapEncoding:r(i.map,e.gammaInput),envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,envMapEncoding:r(i.envMap,e.gammaInput),envMapCubeUV:!!i.envMap&&(i.envMap.mapping===To||i.envMap.mapping===Co),lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:r(i.emissiveMap,e.gammaInput),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,combine:i.combine,vertexColors:i.vertexColors,fog:!!s,useFog:i.fog,fogExp:s&&s.isFogExp2,flatShading:i.shading===Li,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:i.skinning,maxBones:d,useVertexTexture:t.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numHemiLights:a.hemi.length,numClippingPlanes:l,numClipIntersection:c,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&a.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===Ai,flipSided:i.side===Ci,depthPacking:void 0!==i.depthPacking&&i.depthPacking};return m},this.getProgramCode=function(e,t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var i=0;i<a.length;i++)n.push(t[a[i]]);return n.join()},this.acquireProgram=function(t,n,r){for(var o,a=0,s=i.length;a<s;a++){var l=i[a];if(l.code===r){o=l,++o.usedTimes;break}}return void 0===o&&(o=new Je(e,r,t,n),i.push(o)),o},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function et(e,t,n){function r(e){var i=e.target,s=l[i.id];null!==s.index&&o(s.index),a(s.attributes),i.removeEventListener("dispose",r),delete l[i.id];var c=t.get(i);c.wireframe&&o(c.wireframe),t.delete(i);var u=t.get(s);u.wireframe&&o(u.wireframe),t.delete(s),n.memory.geometries--}function i(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function o(t){var n=i(t);void 0!==n&&(e.deleteBuffer(n),s(t))}function a(e){for(var t in e)o(e[t])}function s(e){e.isInterleavedBufferAttribute?t.delete(e.data):t.delete(e)}var l={};return{get:function(e){var t=e.geometry;if(void 0!==l[t.id])return l[t.id];t.addEventListener("dispose",r);var i;return t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Le).setFromObject(e)),i=t._bufferGeometry),l[t.id]=i,n.memory.geometries++,i}}}function tt(e,t,n){function r(t){var n=c.get(t);t.geometry.isGeometry&&n.updateFromObject(t);var r=n.index,o=n.attributes;null!==r&&i(r,e.ELEMENT_ARRAY_BUFFER);for(var a in o)i(o[a],e.ARRAY_BUFFER);var s=n.morphAttributes;for(var a in s)for(var l=s[a],u=0,h=l.length;u<h;u++)i(l[u],e.ARRAY_BUFFER);return n}function i(e,n){var r=e.isInterleavedBufferAttribute?e.data:e,i=t.get(r);void 0===i.__webglBuffer?o(i,r,n):i.version!==r.version&&a(i,r,n)}function o(t,n,r){t.__webglBuffer=e.createBuffer(),e.bindBuffer(r,t.__webglBuffer);var i=n.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(r,n.array,i),t.version=n.version}function a(t,n,r){e.bindBuffer(r,t.__webglBuffer),n.dynamic===!1?e.bufferData(r,n.array,e.STATIC_DRAW):n.updateRange.count===-1?e.bufferSubData(r,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),t.version=n.version}function s(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function l(n){var r=t.get(n);if(void 0!==r.wireframe)return r.wireframe;var o=[],a=n.index,s=n.attributes,l=s.position;if(null!==a)for(var c=a.array,u=0,h=c.length;u<h;u+=3){var d=c[u+0],f=c[u+1],p=c[u+2];o.push(d,f,f,p,p,d)}else for(var c=s.position.array,u=0,h=c.length/3-1;u<h;u+=3){var d=u+0,f=u+1,p=u+2;o.push(d,f,f,p,p,d)}var m=l.count>65535?Uint32Array:Uint16Array,v=new me(new m(o),1);return i(v,e.ELEMENT_ARRAY_BUFFER),r.wireframe=v,v}var c=new et(e,t,n);return{getAttributeBuffer:s,getWireframeAttribute:l,update:r}}function nt(e,t,n,r,i,o,a){function s(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n);var i=r.getContext("2d");return i.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function l(e){return Ua.isPowerOfTwo(e.width)&&Ua.isPowerOfTwo(e.height)}function c(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=Ua.nearestPowerOfTwo(e.width),t.height=Ua.nearestPowerOfTwo(e.height);var n=t.getContext("2d");return n.drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function u(e){return e.wrapS!==Ro||e.wrapT!==Ro||e.minFilter!==Oo&&e.minFilter!==Io}function h(t){return t===Oo||t===No||t===Do?e.NEAREST:e.LINEAR}function d(e){var t=e.target;t.removeEventListener("dispose",d),p(t),C.textures--}function f(e){var t=e.target;t.removeEventListener("dispose",f),m(t),C.textures--}function p(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.delete(t)}function m(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t&&t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.delete(t.texture),r.delete(t)}}function v(t,i){var o=r.get(t);if(t.version>0&&o.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(a.complete!==!1)return void x(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function g(t,a){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",d),c.__image__webglTextureCube=e.createTexture(),C.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var u=t&&t.isCompressedTexture,h=t.image[0]&&t.image[0].isDataTexture,f=[],p=0;p<6;p++)u||h?f[p]=h?t.image[p].image:t.image[p]:f[p]=s(t.image[p],i.maxCubemapSize);var m=f[0],v=l(m),g=o(t.format),y=o(t.type);b(e.TEXTURE_CUBE_MAP,t,v);for(var p=0;p<6;p++)if(u)for(var x,w=f[p].mipmaps,_=0,M=w.length;_<M;_++)x=w[_],t.format!==ea&&t.format!==Qo?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,_,g,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,_,g,x.width,x.height,0,g,y,x.data);else h?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,g,f[p].width,f[p].height,0,g,y,f[p].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,g,g,y,f[p]);t.generateMipmaps&&v&&e.generateMipmap(e.TEXTURE_CUBE_MAP),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}function y(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)}function b(n,a,s){var l;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===Ro&&a.wrapT===Ro||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,h(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,h(a.minFilter)),a.minFilter!==Oo&&a.minFilter!==Io&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),l=t.get("EXT_texture_filter_anisotropic")){if(a.type===Xo&&null===t.get("OES_texture_float_linear"))return;if(a.type===qo&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function x(t,r,a){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",d),t.__webglTexture=e.createTexture(),C.textures++),n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var h=s(r.image,i.maxTextureSize);u(r)&&l(h)===!1&&(h=c(h));var f=l(h),p=o(r.format),m=o(r.type);b(e.TEXTURE_2D,r,f);var v,g=r.mipmaps;if(r&&r.isDepthTexture){var y=e.DEPTH_COMPONENT;if(r.type===Xo){if(!A)throw new Error("Float Depth Texture only supported in WebGL2.0");y=e.DEPTH_COMPONENT32F}else A&&(y=e.DEPTH_COMPONENT16);r.format===oa&&(y=e.DEPTH_STENCIL),n.texImage2D(e.TEXTURE_2D,0,y,h.width,h.height,0,p,m,null)}else if(r&&r.isDataTexture)if(g.length>0&&f){for(var x=0,w=g.length;x<w;x++)v=g[x],n.texImage2D(e.TEXTURE_2D,x,p,v.width,v.height,0,p,m,v.data);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,p,h.width,h.height,0,p,m,h.data);else if(r&&r.isCompressedTexture)for(var x=0,w=g.length;x<w;x++)v=g[x],r.format!==ea&&r.format!==Qo?n.getCompressedTextureFormats().indexOf(p)>-1?n.compressedTexImage2D(e.TEXTURE_2D,x,p,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,x,p,v.width,v.height,0,p,m,v.data);else if(g.length>0&&f){for(var x=0,w=g.length;x<w;x++)v=g[x],n.texImage2D(e.TEXTURE_2D,x,p,p,m,v);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,p,p,m,h);r.generateMipmaps&&f&&e.generateMipmap(e.TEXTURE_2D),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function w(t,i,a,s){var l=o(i.texture.format),c=o(i.texture.type);n.texImage2D(s,0,l,i.width,i.height,0,l,c,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function _(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function M(t,n){var i=n&&n.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===ia)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(n.depthTexture.format!==oa)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}function S(t){var n=r.get(t),i=t&&t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");M(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),_(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),_(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function E(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",f),o.__webglTexture=e.createTexture(),C.textures++;var a=t&&t.isWebGLRenderTargetCube,s=l(t);if(a){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(a){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),b(e.TEXTURE_CUBE_MAP,t.texture,s);for(var c=0;c<6;c++)w(i.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),b(e.TEXTURE_2D,t.texture,s),w(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&S(t)}function T(t){var i=t.texture;if(i.generateMipmaps&&l(t)&&i.minFilter!==Oo&&i.minFilter!==Io){var o=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),e.generateMipmap(o),n.bindTexture(o,null)}}var C=a.memory,A="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=v,this.setTextureCube=g,this.setTextureCubeDynamic=y,this.setupRenderTarget=E,this.updateRenderTargetMipmap=T}function rt(){var e={};return{get:function(t){var n=t.uuid,r=e[n];return void 0===r&&(r={},e[n]=r),r},delete:function(t){delete e[t.uuid]},clear:function(){e={}}}}function it(e,t,n){function r(){var t=!1,n=new o,r=null,i=new o;return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a){n.set(t,r,o,a),i.equals(n)===!1&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(0,0,0,1)}}}function i(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?f(e.DEPTH_TEST):p(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case ro:e.depthFunc(e.NEVER);break;case io:e.depthFunc(e.ALWAYS);break;case oo:e.depthFunc(e.LESS);break;case ao:e.depthFunc(e.LEQUAL);break;case so:e.depthFunc(e.EQUAL);break;case lo:e.depthFunc(e.GEQUAL);break;case co:e.depthFunc(e.GREATER);break;case uo:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function a(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){t?f(e.STENCIL_TEST):p(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}}function s(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}function l(){D(0,0,0,1),I(1),U(0),f(e.DEPTH_TEST),x(ao),E(!1),T(yi),f(e.CULL_FACE),f(e.BLEND),v(Di)}function c(){for(var e=0,t=W.length;e<t;e++)W[e]=0}function u(n){if(W[n]=1,0===X[n]&&(e.enableVertexAttribArray(n),X[n]=1),0!==q[n]){var r=t.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),q[n]=0}}function h(t,n,r){W[t]=1,0===X[t]&&(e.enableVertexAttribArray(t),X[t]=1),q[t]!==n&&(r.vertexAttribDivisorANGLE(t,n),q[t]=n)}function d(){for(var t=0,n=X.length;t!==n;++t)X[t]!==W[t]&&(e.disableVertexAttribArray(t),X[t]=0)}function f(t){Y[t]!==!0&&(e.enable(t),Y[t]=!0)}function p(t){Y[t]!==!1&&(e.disable(t),Y[t]=!1)}function m(){if(null===$&&($=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)$.push(n[r]);return $}function v(t,r,i,o,a,s,l,c){t!==Ni?f(e.BLEND):p(e.BLEND),t===Z&&c===re||(t===Ii?c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===Ui?c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===Fi?c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),Z=t,re=c),t===Bi?(a=a||r,s=s||i,l=l||o,r===K&&a===ee||(e.blendEquationSeparate(n(r),n(a)),K=r,ee=a),i===J&&o===Q&&s===te&&l===ne||(e.blendFuncSeparate(n(i),n(o),n(s),n(l)),J=i,Q=o,te=s,ne=l)):(K=null,J=null,Q=null,ee=null,te=null,ne=null)}function g(e){j.setMask(e)}function y(e){G.setTest(e)}function b(e){G.setMask(e)}function x(e){G.setFunc(e)}function w(e){H.setTest(e)}function _(e){H.setMask(e)}function M(e,t,n){H.setFunc(e,t,n)}function S(e,t,n){H.setOp(e,t,n)}function E(t){ie!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),ie=t)}function T(t){t!==gi?(f(e.CULL_FACE),t!==oe&&(t===yi?e.cullFace(e.BACK):t===bi?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):p(e.CULL_FACE),oe=t}function C(t){t!==ae&&(e.lineWidth(t),ae=t)}function A(t,n,r){t?(f(e.POLYGON_OFFSET_FILL),se===n&&le===r||(e.polygonOffset(n,r),se=n,le=r)):p(e.POLYGON_OFFSET_FILL)}function L(){return ce}function R(t){ce=t,t?f(e.SCISSOR_TEST):p(e.SCISSOR_TEST)}function P(t){void 0===t&&(t=e.TEXTURE0+ue-1),he!==t&&(e.activeTexture(t),he=t)}function k(t,n){null===he&&P();var r=de[he];void 0===r&&(r={type:void 0,texture:void 0},de[he]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||me[t]),r.type=t,r.texture=n)}function O(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}}function N(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}}function D(e,t,n,r){j.setClear(e,t,n,r)}function I(e){G.setClear(e)}function U(e){H.setClear(e)}function F(t){fe.equals(t)===!1&&(e.scissor(t.x,t.y,t.z,t.w),fe.copy(t))}function B(t){pe.equals(t)===!1&&(e.viewport(t.x,t.y,t.z,t.w),pe.copy(t))}function z(){for(var t=0;t<X.length;t++)1===X[t]&&(e.disableVertexAttribArray(t),X[t]=0);Y={},$=null,he=null,de={},Z=null,ie=null,oe=null,j.reset(),G.reset(),H.reset()}var j=new r,G=new i,H=new a,V=e.getParameter(e.MAX_VERTEX_ATTRIBS),W=new Uint8Array(V),X=new Uint8Array(V),q=new Uint8Array(V),Y={},$=null,Z=null,K=null,J=null,Q=null,ee=null,te=null,ne=null,re=!1,ie=null,oe=null,ae=null,se=null,le=null,ce=null,ue=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),he=null,de={},fe=new o,pe=new o,me={};return me[e.TEXTURE_2D]=s(e.TEXTURE_2D,e.TEXTURE_2D,1),me[e.TEXTURE_CUBE_MAP]=s(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:j,depth:G,stencil:H},init:l,initAttributes:c,enableAttribute:u,enableAttributeAndDivisor:h,disableUnusedAttributes:d,enable:f,disable:p,getCompressedTextureFormats:m,setBlending:v,setColorWrite:g,setDepthTest:y,setDepthWrite:b,setDepthFunc:x,setStencilTest:w,setStencilWrite:_,setStencilFunc:M,setStencilOp:S,setFlipSided:E,setCullFace:T,setLineWidth:C,setPolygonOffset:A,getScissorTest:L,setScissorTest:R,activeTexture:P,bindTexture:k,compressedTexImage2D:O,texImage2D:N,clearColor:D,clearDepth:I,clearStencil:U,scissor:F,viewport:B,reset:z}}function ot(e,t,n){function r(){if(void 0!==o)return o;var n=t.get("EXT_texture_filter_anisotropic");return o=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=n.logarithmicDepthBuffer===!0&&!!t.get("EXT_frag_depth"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=u>0,y=!!t.get("OES_texture_float"),b=g&&y;return{getMaxAnisotropy:r,getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:b}}function at(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function st(){function e(){c.value!==r&&(c.value=r,c.needsUpdate=i>0),n.numPlanes=i,n.numIntersection=0}function t(e,t,r,i){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=c.value,i!==!0||null===a){var u=r+4*o,h=t.matrixWorldInverse;l.getNormalMatrix(h),(null===a||a.length<u)&&(a=new Float32Array(u));for(var d=0,f=r;d!==o;++d,f+=4)s.copy(e[d]).applyMatrix4(h,l),s.normal.toArray(a,f),a[f+3]=s.constant}c.value=a,c.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,o=!1,a=!1,s=new re,l=new ne,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,a){var s=0!==e.length||n||0!==i||o;return o=n,r=t(e,a,0),i=e.length,s},this.beginShadows=function(){a=!0,t(null)},this.endShadows=function(){a=!1,e()},this.setState=function(n,s,l,u,h,d){if(!o||null===n||0===n.length||a&&!l)a?t(null):e();else{var f=a?0:i,p=4*f,m=h.clippingState||null;c.value=m,m=t(n,u,p,d);for(var v=0;v!==p;++v)m[v]=r[v];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=f}}}function lt(e){function t(){return null===he?Ee:1}function n(e,t,n,r){q===!0&&(e*=r,t*=r,n*=r),Ke.clearColor(e,t,n,r)}function r(){Ke.init(),Ke.scissor(ge.copy(Te).multiplyScalar(Ee)),Ke.viewport(be.copy(Ae).multiplyScalar(Ee)),n(we.r,we.g,we.b,_e)}function i(){ue=null,ve=null,me="",fe=-1,Ke.reset()}function a(e){e.preventDefault(),i(),r(),Je.clear()}function s(e){var t=e.target;t.removeEventListener("dispose",s),l(t)}function l(e){h(e),Je.delete(e)}function h(e){var t=Je.get(e).program;e.program=void 0,void 0!==t&&ct.releaseProgram(t)}function d(e,t,n,r){var i;if(n&&n.isInstancedBufferGeometry&&(i=$e.get("ANGLE_instanced_arrays"),null===i))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),Ke.initAttributes();var o=n.attributes,a=t.getAttributes(),s=e.defaultAttributeValues;for(var l in a){var c=a[l];if(c>=0){var u=o[l];if(void 0!==u){var h=qe.FLOAT,d=u.array,f=u.normalized;d instanceof Float32Array?h=qe.FLOAT:d instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):d instanceof Uint16Array?h=qe.UNSIGNED_SHORT:d instanceof Int16Array?h=qe.SHORT:d instanceof Uint32Array?h=qe.UNSIGNED_INT:d instanceof Int32Array?h=qe.INT:d instanceof Int8Array?h=qe.BYTE:d instanceof Uint8Array&&(h=qe.UNSIGNED_BYTE);var p=u.itemSize,m=lt.getAttributeBuffer(u);if(u.isInterleavedBufferAttribute){var v=u.data,g=v.stride,y=u.offset;v&&v.isInstancedInterleavedBuffer?(Ke.enableAttributeAndDivisor(c,v.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):Ke.enableAttribute(c),qe.bindBuffer(qe.ARRAY_BUFFER,m),qe.vertexAttribPointer(c,p,h,f,g*v.array.BYTES_PER_ELEMENT,(r*g+y)*v.array.BYTES_PER_ELEMENT)}else u.isInstancedBufferAttribute?(Ke.enableAttributeAndDivisor(c,u.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):Ke.enableAttribute(c),qe.bindBuffer(qe.ARRAY_BUFFER,m),qe.vertexAttribPointer(c,p,h,f,0,r*p*u.array.BYTES_PER_ELEMENT)}else if(void 0!==s){var b=s[l];if(void 0!==b)switch(b.length){case 2:qe.vertexAttrib2fv(c,b);break;case 3:qe.vertexAttrib3fv(c,b);break;case 4:qe.vertexAttrib4fv(c,b);break;default:qe.vertexAttrib1fv(c,b)}}}}Ke.disableUnusedAttributes()}function f(e,t){return Math.abs(t[0])-Math.abs(e[0])}function p(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function m(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function v(e,t,n,r,i){var o,a;n.transparent?(o=ne,a=++re):(o=Q,a=++ee);var s=o[a];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=n,s.z=Ve.z,s.group=i):(s={id:e.id,object:e,geometry:t,material:n,z:Ve.z,group:i},o.push(s))}function g(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ge.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),b(Ge)}function y(e){return Ge.center.set(0,0,0),Ge.radius=.7071067811865476,Ge.applyMatrix4(e.matrixWorld),b(Ge)}function b(e){if(!Oe.intersectsSphere(e))return!1;var t=Be.numPlanes;if(0===t)return!0;var n=ce.clippingPlanes,r=e.center,i=-e.radius,o=0;do if(n[o].distanceToPoint(r)<i)return!1;while(++o!==t);return!0}function x(e,t){if(e.visible!==!1){var n=0!==(e.layers.mask&t.layers.mask);
if(n)if(e.isLight)K.push(e);else if(e.isSprite)e.frustumCulled!==!1&&y(e)!==!0||se.push(e);else if(e.isLensFlare)le.push(e);else if(e.isImmediateRenderObject)ce.sortObjects===!0&&(Ve.setFromMatrixPosition(e.matrixWorld),Ve.applyProjection(He)),v(e,null,e.material,Ve.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),e.frustumCulled===!1||g(e)===!0)){var r=e.material;if(r.visible===!0){ce.sortObjects===!0&&(Ve.setFromMatrixPosition(e.matrixWorld),Ve.applyProjection(He));var i=lt.update(e);if(r.isMultiMaterial)for(var o=i.groups,a=r.materials,s=0,l=o.length;s<l;s++){var c=o[s],u=a[c.materialIndex];u.visible===!0&&v(e,i,u,Ve.z,c)}else v(e,i,r,Ve.z,null)}}for(var h=e.children,s=0,l=h.length;s<l;s++)x(h[s],t)}}function w(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,l=a.geometry,c=void 0===r?a.material:r,u=a.group;if(s.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(ce,t,n,l,c,u),s.isImmediateRenderObject){M(c);var h=S(n,t.fog,c,s);me="",s.render(function(e){ce.renderBufferImmediate(e,h,c)})}else ce.renderBufferDirect(n,t.fog,l,c,s,u);s.onAfterRender(ce,t,n,l,c,u)}}function _(e,t,n){var r=Je.get(e),i=ct.getParameters(e,We,t,Be.numPlanes,Be.numIntersection,n),o=ct.getProgramCode(e,i),a=r.program,l=!0;if(void 0===a)e.addEventListener("dispose",s);else if(a.code!==o)h(e);else{if(void 0!==i.shaderID)return;l=!1}if(l){if(i.shaderID){var c=Wl[i.shaderID];r.__webglShader={name:e.type,uniforms:Va.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else r.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=r.__webglShader,a=ct.acquireProgram(e,i,o),r.program=a,e.program=a}var u=a.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<ce.maxMorphTargets;d++)u["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var d=0;d<ce.maxMorphNormals;d++)u["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var f=r.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&e.clipping!==!0||(r.numClippingPlanes=Be.numPlanes,r.numIntersection=Be.numIntersection,f.clippingPlanes=Be.uniform),r.fog=t,r.lightsHash=We.hash,e.lights&&(f.ambientLightColor.value=We.ambient,f.directionalLights.value=We.directional,f.spotLights.value=We.spot,f.pointLights.value=We.point,f.hemisphereLights.value=We.hemi,f.directionalShadowMap.value=We.directionalShadowMap,f.directionalShadowMatrix.value=We.directionalShadowMatrix,f.spotShadowMap.value=We.spotShadowMap,f.spotShadowMatrix.value=We.spotShadowMatrix,f.pointShadowMap.value=We.pointShadowMap,f.pointShadowMatrix.value=We.pointShadowMatrix);var p=r.program.getUniforms(),m=W.seqWithValue(p.seq,f);r.uniformsList=m}function M(e){e.side===Ai?Ke.disable(qe.CULL_FACE):Ke.enable(qe.CULL_FACE),Ke.setFlipSided(e.side===Ci),e.transparent===!0?Ke.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):Ke.setBlending(Ni),Ke.setDepthFunc(e.depthFunc),Ke.setDepthTest(e.depthTest),Ke.setDepthWrite(e.depthWrite),Ke.setColorWrite(e.colorWrite),Ke.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function S(e,t,n,r){xe=0;var i=Je.get(n);if(ze&&(je||e!==ve)){var o=e===ve&&n.id===fe;Be.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,o)}n.needsUpdate===!1&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsHash!==We.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===Be.numPlanes&&i.numIntersection===Be.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(_(n,t,r),n.needsUpdate=!1);var a=!1,s=!1,l=!1,c=i.program,u=c.getUniforms(),h=i.__webglShader.uniforms;if(c.id!==ue&&(qe.useProgram(c.program),ue=c.id,a=!0,s=!0,l=!0),n.id!==fe&&(fe=n.id,s=!0),a||e!==ve){if(u.set(qe,e,"projectionMatrix"),Ze.logarithmicDepthBuffer&&u.setValue(qe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==ve&&(ve=e,s=!0,l=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var d=u.map.cameraPosition;void 0!==d&&d.setValue(qe,Ve.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&u.setValue(qe,"viewMatrix",e.matrixWorldInverse),u.set(qe,ce,"toneMappingExposure"),u.set(qe,ce,"toneMappingWhitePoint")}if(n.skinning){u.setOptional(qe,r,"bindMatrix"),u.setOptional(qe,r,"bindMatrixInverse");var f=r.skeleton;f&&(Ze.floatVertexTextures&&f.useVertexTexture?(u.set(qe,f,"boneTexture"),u.set(qe,f,"boneTextureWidth"),u.set(qe,f,"boneTextureHeight")):u.setOptional(qe,f,"boneMatrices"))}return s&&(n.lights&&N(h,l),t&&n.fog&&L(h,t),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshDepthMaterial)&&E(h,n),n.isLineBasicMaterial?T(h,n):n.isLineDashedMaterial?(T(h,n),C(h,n)):n.isPointsMaterial?A(h,n):n.isMeshLambertMaterial?R(h,n):n.isMeshPhongMaterial?P(h,n):n.isMeshPhysicalMaterial?O(h,n):n.isMeshStandardMaterial?k(h,n):n.isMeshDepthMaterial?n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&(h.opacity.value=n.opacity),W.upload(qe,i.uniformsList,h,ce)),u.set(qe,r,"modelViewMatrix"),u.set(qe,r,"normalMatrix"),u.setValue(qe,"modelMatrix",r.matrixWorld),c}function E(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var r=n.offset,i=n.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function T(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function C(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function A(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*Ee,e.scale.value=.5*Se,e.map.value=t.map,null!==t.map){var n=t.map.offset,r=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function L(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function R(e,t){t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function P(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function k(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function O(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,k(e,t)}function N(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function D(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];i.castShadow&&(We.shadows[t++]=i)}We.shadows.length=t}function I(e,t){var n,r,i,o,a,s,l,c=0,h=0,d=0,f=t.matrixWorldInverse,p=0,m=0,v=0,g=0;for(n=0,r=e.length;n<r;n++)if(i=e[n],o=i.color,a=i.intensity,s=i.distance,l=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i.isAmbientLight)c+=o.r*a,h+=o.g*a,d+=o.b*a;else if(i.isDirectionalLight){var y=ut.get(i);y.color.copy(i.color).multiplyScalar(i.intensity),y.direction.setFromMatrixPosition(i.matrixWorld),Ve.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Ve),y.direction.transformDirection(f),y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),We.directionalShadowMap[p]=l,We.directionalShadowMatrix[p]=i.shadow.matrix,We.directional[p++]=y}else if(i.isSpotLight){var y=ut.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(f),y.color.copy(o).multiplyScalar(a),y.distance=s,y.direction.setFromMatrixPosition(i.matrixWorld),Ve.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Ve),y.direction.transformDirection(f),y.coneCos=Math.cos(i.angle),y.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),We.spotShadowMap[v]=l,We.spotShadowMatrix[v]=i.shadow.matrix,We.spot[v++]=y}else if(i.isPointLight){var y=ut.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(f),y.color.copy(i.color).multiplyScalar(i.intensity),y.distance=i.distance,y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),We.pointShadowMap[m]=l,void 0===We.pointShadowMatrix[m]&&(We.pointShadowMatrix[m]=new u),Ve.setFromMatrixPosition(i.matrixWorld).negate(),We.pointShadowMatrix[m].identity().setPosition(Ve),We.point[m++]=y}else if(i.isHemisphereLight){var y=ut.get(i);y.direction.setFromMatrixPosition(i.matrixWorld),y.direction.transformDirection(f),y.direction.normalize(),y.skyColor.copy(i.color).multiplyScalar(a),y.groundColor.copy(i.groundColor).multiplyScalar(a),We.hemi[g++]=y}We.ambient[0]=c,We.ambient[1]=h,We.ambient[2]=d,We.directional.length=p,We.spot.length=v,We.point.length=m,We.hemi.length=g,We.hash=p+","+m+","+v+","+g+","+We.shadows.length}function U(){var e=xe;return e>=Ze.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Ze.maxTextures),xe+=1,e}function F(e){var t;if(e===Lo)return qe.REPEAT;if(e===Ro)return qe.CLAMP_TO_EDGE;if(e===Po)return qe.MIRRORED_REPEAT;if(e===Oo)return qe.NEAREST;if(e===No)return qe.NEAREST_MIPMAP_NEAREST;if(e===Do)return qe.NEAREST_MIPMAP_LINEAR;if(e===Io)return qe.LINEAR;if(e===Uo)return qe.LINEAR_MIPMAP_NEAREST;if(e===Fo)return qe.LINEAR_MIPMAP_LINEAR;if(e===zo)return qe.UNSIGNED_BYTE;if(e===Yo)return qe.UNSIGNED_SHORT_4_4_4_4;if(e===$o)return qe.UNSIGNED_SHORT_5_5_5_1;if(e===Zo)return qe.UNSIGNED_SHORT_5_6_5;if(e===jo)return qe.BYTE;if(e===Go)return qe.SHORT;if(e===Ho)return qe.UNSIGNED_SHORT;if(e===Vo)return qe.INT;if(e===Wo)return qe.UNSIGNED_INT;if(e===Xo)return qe.FLOAT;if(e===qo&&(t=$e.get("OES_texture_half_float"),null!==t))return t.HALF_FLOAT_OES;if(e===Jo)return qe.ALPHA;if(e===Qo)return qe.RGB;if(e===ea)return qe.RGBA;if(e===ta)return qe.LUMINANCE;if(e===na)return qe.LUMINANCE_ALPHA;if(e===ia)return qe.DEPTH_COMPONENT;if(e===oa)return qe.DEPTH_STENCIL;if(e===ji)return qe.FUNC_ADD;if(e===Gi)return qe.FUNC_SUBTRACT;if(e===Hi)return qe.FUNC_REVERSE_SUBTRACT;if(e===Xi)return qe.ZERO;if(e===qi)return qe.ONE;if(e===Yi)return qe.SRC_COLOR;if(e===$i)return qe.ONE_MINUS_SRC_COLOR;if(e===Zi)return qe.SRC_ALPHA;if(e===Ki)return qe.ONE_MINUS_SRC_ALPHA;if(e===Ji)return qe.DST_ALPHA;if(e===Qi)return qe.ONE_MINUS_DST_ALPHA;if(e===eo)return qe.DST_COLOR;if(e===to)return qe.ONE_MINUS_DST_COLOR;if(e===no)return qe.SRC_ALPHA_SATURATE;if((e===aa||e===sa||e===la||e===ca)&&(t=$e.get("WEBGL_compressed_texture_s3tc"),null!==t)){if(e===aa)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===sa)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===la)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===ca)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===ua||e===ha||e===da||e===fa)&&(t=$e.get("WEBGL_compressed_texture_pvrtc"),null!==t)){if(e===ua)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===ha)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===da)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===fa)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===pa&&(t=$e.get("WEBGL_compressed_texture_etc1"),null!==t))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===Vi||e===Wi)&&(t=$e.get("EXT_blend_minmax"),null!==t)){if(e===Vi)return t.MIN_EXT;if(e===Wi)return t.MAX_EXT}return e===Ko&&(t=$e.get("WEBGL_depth_texture"),null!==t)?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",mi),e=e||{};var B=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),z=void 0!==e.context?e.context:null,j=void 0!==e.alpha&&e.alpha,G=void 0===e.depth||e.depth,H=void 0===e.stencil||e.stencil,V=void 0!==e.antialias&&e.antialias,q=void 0===e.premultipliedAlpha||e.premultipliedAlpha,Z=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,K=[],Q=[],ee=-1,ne=[],re=-1,ae=new Float32Array(8),se=[],le=[];this.domElement=B,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=vo,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ce=this,ue=null,he=null,de=null,fe=-1,me="",ve=null,ge=new o,ye=null,be=new o,xe=0,we=new X(0),_e=0,Me=B.width,Se=B.height,Ee=1,Te=new o(0,0,Me,Se),Ce=!1,Ae=new o(0,0,Me,Se),Oe=new ie,Be=new st,ze=!1,je=!1,Ge=new te,He=new u,Ve=new c,We={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Xe={calls:0,vertices:0,faces:0,points:0};this.info={render:Xe,memory:{geometries:0,textures:0},programs:null};var qe;try{var Ye={alpha:j,depth:G,stencil:H,antialias:V,premultipliedAlpha:q,preserveDrawingBuffer:Z};if(qe=z||B.getContext("webgl",Ye)||B.getContext("experimental-webgl",Ye),null===qe)throw null!==B.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===qe.getShaderPrecisionFormat&&(qe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),B.addEventListener("webglcontextlost",a,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var $e=new at(qe);$e.get("WEBGL_depth_texture"),$e.get("OES_texture_float"),$e.get("OES_texture_float_linear"),$e.get("OES_texture_half_float"),$e.get("OES_texture_half_float_linear"),$e.get("OES_standard_derivatives"),$e.get("ANGLE_instanced_arrays"),$e.get("OES_element_index_uint")&&(Le.MaxIndex=4294967296);var Ze=new ot(qe,$e,e),Ke=new it(qe,$e,F),Je=new rt,et=new nt(qe,$e,Ke,Je,Ze,F,this.info),lt=new tt(qe,Je,this.info),ct=new Qe(this,Ze),ut=new Fe;this.info.programs=ct.programs;var ht=new Ue(qe,$e,Xe),dt=new Ie(qe,$e,Xe),ft=new De(-1,1,1,-1,0,1),pt=new Ne,mt=new Re(new ke(2,2),new pe({depthTest:!1,depthWrite:!1,fog:!1})),vt=Wl.cube,gt=new Re(new Pe(5,5,5),new J({uniforms:vt.uniforms,vertexShader:vt.vertexShader,fragmentShader:vt.fragmentShader,side:Ci,depthTest:!1,depthWrite:!1,fog:!1}));r(),this.context=qe,this.capabilities=Ze,this.extensions=$e,this.properties=Je,this.state=Ke;var yt=new oe(this,We,lt,Ze);this.shadowMap=yt;var bt=new $(this,se),xt=new Y(this,le);this.getContext=function(){return qe},this.getContextAttributes=function(){return qe.getContextAttributes()},this.forceContextLoss=function(){$e.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Ze.getMaxAnisotropy()},this.getPrecision=function(){return Ze.precision},this.getPixelRatio=function(){return Ee},this.setPixelRatio=function(e){void 0!==e&&(Ee=e,this.setSize(Ae.z,Ae.w,!1))},this.getSize=function(){return{width:Me,height:Se}},this.setSize=function(e,t,n){Me=e,Se=t,B.width=e*Ee,B.height=t*Ee,n!==!1&&(B.style.width=e+"px",B.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){Ke.viewport(Ae.set(e,t,n,r))},this.setScissor=function(e,t,n,r){Ke.scissor(Te.set(e,t,n,r))},this.setScissorTest=function(e){Ke.setScissorTest(Ce=e)},this.getClearColor=function(){return we},this.setClearColor=function(e,t){we.set(e),_e=void 0!==t?t:1,n(we.r,we.g,we.b,_e)},this.getClearAlpha=function(){return _e},this.setClearAlpha=function(e){_e=e,n(we.r,we.g,we.b,_e)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=qe.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=qe.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=qe.STENCIL_BUFFER_BIT),qe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=i,this.dispose=function(){ne=[],re=-1,Q=[],ee=-1,B.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(e,t,n){Ke.initAttributes();var r=Je.get(e);e.hasPositions&&!r.position&&(r.position=qe.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=qe.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=qe.createBuffer()),e.hasColors&&!r.color&&(r.color=qe.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(qe.bindBuffer(qe.ARRAY_BUFFER,r.position),qe.bufferData(qe.ARRAY_BUFFER,e.positionArray,qe.DYNAMIC_DRAW),Ke.enableAttribute(i.position),qe.vertexAttribPointer(i.position,3,qe.FLOAT,!1,0,0)),e.hasNormals){if(qe.bindBuffer(qe.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&n.shading===Li)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,l=(s[o+0]+s[o+3]+s[o+6])/3,c=(s[o+1]+s[o+4]+s[o+7])/3,u=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=l,s[o+1]=c,s[o+2]=u,s[o+3]=l,s[o+4]=c,s[o+5]=u,s[o+6]=l,s[o+7]=c,s[o+8]=u}qe.bufferData(qe.ARRAY_BUFFER,e.normalArray,qe.DYNAMIC_DRAW),Ke.enableAttribute(i.normal),qe.vertexAttribPointer(i.normal,3,qe.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(qe.bindBuffer(qe.ARRAY_BUFFER,r.uv),qe.bufferData(qe.ARRAY_BUFFER,e.uvArray,qe.DYNAMIC_DRAW),Ke.enableAttribute(i.uv),qe.vertexAttribPointer(i.uv,2,qe.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==Pi&&(qe.bindBuffer(qe.ARRAY_BUFFER,r.color),qe.bufferData(qe.ARRAY_BUFFER,e.colorArray,qe.DYNAMIC_DRAW),Ke.enableAttribute(i.color),qe.vertexAttribPointer(i.color,3,qe.FLOAT,!1,0,0)),Ke.disableUnusedAttributes(),qe.drawArrays(qe.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,r,i,o,a){M(i);var s=S(e,n,i,o),l=!1,c=r.id+"_"+s.id+"_"+i.wireframe;c!==me&&(me=c,l=!0);var u=o.morphTargetInfluences;if(void 0!==u){for(var h=[],p=0,m=u.length;p<m;p++){var v=u[p];h.push([v,p])}h.sort(f),h.length>8&&(h.length=8);for(var g=r.morphAttributes,p=0,m=h.length;p<m;p++){var v=h[p];if(ae[p]=v[0],0!==v[0]){var y=v[1];i.morphTargets===!0&&g.position&&r.addAttribute("morphTarget"+p,g.position[y]),i.morphNormals===!0&&g.normal&&r.addAttribute("morphNormal"+p,g.normal[y])}else i.morphTargets===!0&&r.removeAttribute("morphTarget"+p),i.morphNormals===!0&&r.removeAttribute("morphNormal"+p)}for(var p=h.length,b=ae.length;p<b;p++)ae[p]=0;s.getUniforms().setValue(qe,"morphTargetInfluences",ae),l=!0}var y=r.index,x=r.attributes.position,w=1;i.wireframe===!0&&(y=lt.getWireframeAttribute(r),w=2);var _;null!==y?(_=dt,_.setIndex(y)):_=ht,l&&(d(i,s,r),null!==y&&qe.bindBuffer(qe.ELEMENT_ARRAY_BUFFER,lt.getAttributeBuffer(y)));var E=0;null!==y?E=y.count:void 0!==x&&(E=x.count);var T=r.drawRange.start*w,C=r.drawRange.count*w,A=null!==a?a.start*w:0,L=null!==a?a.count*w:1/0,R=Math.max(T,A),P=Math.min(E,T+C,A+L)-1,k=Math.max(0,P-R+1);if(0!==k){if(o.isMesh)if(i.wireframe===!0)Ke.setLineWidth(i.wireframeLinewidth*t()),_.setMode(qe.LINES);else switch(o.drawMode){case Sa:_.setMode(qe.TRIANGLES);break;case Ea:_.setMode(qe.TRIANGLE_STRIP);break;case Ta:_.setMode(qe.TRIANGLE_FAN)}else if(o.isLine){var O=i.linewidth;void 0===O&&(O=1),Ke.setLineWidth(O*t()),o.isLineSegments?_.setMode(qe.LINES):_.setMode(qe.LINE_STRIP)}else o.isPoints&&_.setMode(qe.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&_.renderInstances(r,R,k):_.render(R,k)}},this.render=function(e,t,r,i){if(void 0!==t&&t.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");me="",fe=-1,ve=null,e.autoUpdate===!0&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),He.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Oe.setFromMatrix(He),K.length=0,ee=-1,re=-1,se.length=0,le.length=0,je=this.localClippingEnabled,ze=Be.init(this.clippingPlanes,je,t),x(e,t),Q.length=ee+1,ne.length=re+1,ce.sortObjects===!0&&(Q.sort(p),ne.sort(m)),ze&&Be.beginShadows(),D(K),yt.render(e,t),I(K,t),ze&&Be.endShadows(),Xe.calls=0,Xe.vertices=0,Xe.faces=0,Xe.points=0,void 0===r&&(r=null),this.setRenderTarget(r);var o=e.background;if(null===o?n(we.r,we.g,we.b,_e):o&&o.isColor&&(n(o.r,o.g,o.b,1),i=!0),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),o&&o.isCubeTexture?(pt.projectionMatrix.copy(t.projectionMatrix),pt.matrixWorld.extractRotation(t.matrixWorld),pt.matrixWorldInverse.getInverse(pt.matrixWorld),gt.material.uniforms.tCube.value=o,gt.modelViewMatrix.multiplyMatrices(pt.matrixWorldInverse,gt.matrixWorld),lt.update(gt),ce.renderBufferDirect(pt,null,gt.geometry,gt.material,gt,null)):o&&o.isTexture&&(mt.material.map=o,lt.update(mt),ce.renderBufferDirect(ft,null,mt.geometry,mt.material,mt,null)),e.overrideMaterial){var a=e.overrideMaterial;w(Q,e,t,a),w(ne,e,t,a)}else Ke.setBlending(Ni),w(Q,e,t),w(ne,e,t);bt.render(e,t),xt.render(e,t,be),r&&et.updateRenderTargetMipmap(r),Ke.setDepthTest(!0),Ke.setDepthWrite(!0),Ke.setColorWrite(!0)},this.setFaceCulling=function(e,t){Ke.setCullFace(e),Ke.setFlipSided(t===wi)},this.allocTextureUnit=U,this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),et.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),et.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?et.setTextureCube(t,n):et.setTextureCubeDynamic(t,n)}}(),this.getCurrentRenderTarget=function(){return he},this.setRenderTarget=function(e){he=e,e&&void 0===Je.get(e).__webglFramebuffer&&et.setupRenderTarget(e);var t,n=e&&e.isWebGLRenderTargetCube;if(e){var r=Je.get(e);t=n?r.__webglFramebuffer[e.activeCubeFace]:r.__webglFramebuffer,ge.copy(e.scissor),ye=e.scissorTest,be.copy(e.viewport)}else t=null,ge.copy(Te).multiplyScalar(Ee),ye=Ce,be.copy(Ae).multiplyScalar(Ee);if(de!==t&&(qe.bindFramebuffer(qe.FRAMEBUFFER,t),de=t),Ke.scissor(ge),Ke.setScissorTest(ye),Ke.viewport(be),n){var i=Je.get(e.texture);qe.framebufferTexture2D(qe.FRAMEBUFFER,qe.COLOR_ATTACHMENT0,qe.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if((e&&e.isWebGLRenderTarget)===!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=Je.get(e).__webglFramebuffer;if(a){var s=!1;a!==de&&(qe.bindFramebuffer(qe.FRAMEBUFFER,a),s=!0);try{var l=e.texture,c=l.format,u=l.type;if(c!==ea&&F(c)!==qe.getParameter(qe.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===zo||F(u)===qe.getParameter(qe.IMPLEMENTATION_COLOR_READ_TYPE)||u===Xo&&($e.get("OES_texture_float")||$e.get("WEBGL_color_buffer_float"))||u===qo&&$e.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");qe.checkFramebufferStatus(qe.FRAMEBUFFER)===qe.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&qe.readPixels(t,n,r,i,F(c),F(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&qe.bindFramebuffer(qe.FRAMEBUFFER,de)}}}}function ct(e,t){this.name="",this.color=new X(e),this.density=void 0!==t?t:25e-5}function ut(e,t,n){this.name="",this.color=new X(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function ht(){ce.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function dt(e,t,n,r,i){ce.call(this),this.lensFlares=[],this.positionScreen=new c,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,i)}function ft(e){Z.call(this),this.type="SpriteMaterial",this.color=new X(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function pt(e){ce.call(this),this.type="Sprite",this.material=void 0!==e?e:new ft}function mt(){ce.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function vt(e,t,n,i,o,a,s,l,c,u,h,d){r.call(this,null,a,s,l,c,u,i,o,h,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:Oo,this.minFilter=void 0!==u?u:Oo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function gt(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new u,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var r=Math.sqrt(4*this.bones.length);r=Ua.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new vt(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,ea,Xo)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new u)}}function yt(e){ce.call(this),this.type="Bone",this.skin=e}function bt(e,t,n){Re.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new u,this.bindMatrixInverse=new u;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,o,a=0,s=this.geometry.bones.length;a<s;++a)o=this.geometry.bones[a],i=new yt(this),r.push(i),i.name=o.name,i.position.fromArray(o.pos),i.quaternion.fromArray(o.rotq),void 0!==o.scl&&i.scale.fromArray(o.scl);for(var a=0,s=this.geometry.bones.length;a<s;++a)o=this.geometry.bones[a],o.parent!==-1&&null!==o.parent&&void 0!==r[o.parent]?r[o.parent].add(r[a]):this.add(r[a])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new gt(r,void 0,n),this.matrixWorld)}function xt(e){Z.call(this),this.type="LineBasicMaterial",this.color=new X(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function wt(e,t,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new _t(e,t)):(ce.call(this),this.type="Line",this.geometry=void 0!==e?e:new Le,void(this.material=void 0!==t?t:new xt({color:16777215*Math.random()})))}function _t(e,t){wt.call(this,e,t),this.type="LineSegments"}function Mt(e){Z.call(this),this.type="PointsMaterial",this.color=new X(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function St(e,t){ce.call(this),this.type="Points",this.geometry=void 0!==e?e:new Le,this.material=void 0!==t?t:new Mt({color:16777215*Math.random()})}function Et(){ce.call(this),this.type="Group"}function Tt(e,t,n,i,o,a,s,l,c){function u(){requestAnimationFrame(u),e.readyState>=e.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}r.call(this,e,t,n,i,o,a,s,l,c),this.generateMipmaps=!1;var h=this;u()}function Ct(e,t,n,i,o,a,s,l,c,u,h,d){r.call(this,null,a,s,l,c,u,i,o,h,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function At(e,t,n,i,o,a,s,l,c){r.call(this,e,t,n,i,o,a,s,l,c),this.needsUpdate=!0}function Lt(e,t,n,i,o,a,s,l,c,u){if(u=void 0!==u?u:ia,u!==ia&&u!==oa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r.call(this,null,i,o,a,s,l,u,n,c),this.image={width:e,height:t},this.type=void 0!==n?n:Ho,this.magFilter=void 0!==s?s:Oo,this.minFilter=void 0!==l?l:Oo,this.flipY=!1,this.generateMipmaps=!1}function Rt(e){function t(e,t){return e-t}Le.call(this);var n=[0,0],r={},i=["a","b","c"];if(e&&e.isGeometry){for(var o=e.vertices,a=e.faces,s=0,l=new Uint32Array(6*a.length),c=0,u=a.length;c<u;c++)for(var h=a[c],d=0;d<3;d++){n[0]=h[i[d]],n[1]=h[i[(d+1)%3]],n.sort(t);var f=n.toString();void 0===r[f]&&(l[2*s]=n[0],l[2*s+1]=n[1],r[f]=!0,s++)}for(var p=new Float32Array(2*s*3),c=0,u=s;c<u;c++)for(var d=0;d<2;d++){var m=o[l[2*c+d]],v=6*c+3*d;p[v+0]=m.x,p[v+1]=m.y,p[v+2]=m.z}this.addAttribute("position",new me(p,3))}else if(e&&e.isBufferGeometry)if(null!==e.index){var g=e.index.array,o=e.attributes.position,y=e.groups,s=0;0===y.length&&e.addGroup(0,g.length);for(var l=new Uint32Array(2*g.length),b=0,x=y.length;b<x;++b)for(var w=y[b],_=w.start,M=w.count,c=_,S=_+M;c<S;c+=3)for(var d=0;d<3;d++){n[0]=g[c+d],n[1]=g[c+(d+1)%3],n.sort(t);var f=n.toString();void 0===r[f]&&(l[2*s]=n[0],l[2*s+1]=n[1],r[f]=!0,s++)}for(var p=new Float32Array(2*s*3),c=0,u=s;c<u;c++)for(var d=0;d<2;d++){var v=6*c+3*d,E=l[2*c+d];p[v+0]=o.getX(E),p[v+1]=o.getY(E),p[v+2]=o.getZ(E)}this.addAttribute("position",new me(p,3))}else{for(var o=e.attributes.position.array,s=o.length/3,T=s/3,p=new Float32Array(2*s*3),c=0,u=T;c<u;c++)for(var d=0;d<3;d++){var v=18*c+6*d,C=9*c+3*d;p[v+0]=o[C],p[v+1]=o[C+1],p[v+2]=o[C+2];var E=9*c+3*((d+1)%3);p[v+3]=o[E],p[v+4]=o[E+1],p[v+5]=o[E+2]}this.addAttribute("position",new me(p,3))}}function Pt(e,t,n){Le.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o,a,s,l=[],c=[],u=t+1;for(r=0;r<=n;r++)for(s=r/n,i=0;i<=t;i++)a=i/t,o=e(a,s),l.push(o.x,o.y,o.z),c.push(a,s);var h,d,f,p,m=[];for(r=0;r<n;r++)for(i=0;i<t;i++)h=r*u+i,d=r*u+i+1,f=(r+1)*u+i+1,p=(r+1)*u+i,m.push(h,d,p),m.push(d,f,p);this.setIndex((m.length>65535?_e:xe)(m,1)),this.addAttribute("position",Me(l,3)),this.addAttribute("uv",Me(c,2)),this.computeVertexNormals()}function kt(e,t,n){Te.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Pt(e,t,n)),this.mergeVertices()}function Ot(e,t,r,i){function o(e){
for(var n=new c,r=new c,i=new c,o=0;o<t.length;o+=3)d(t[o+0],n),d(t[o+1],r),d(t[o+2],i),a(n,r,i,e)}function a(e,t,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var l=e.clone().lerp(n,i/a),c=t.clone().lerp(n,i/a),u=a-i;for(o=0;o<=u;o++)0===o&&i===a?s[i][o]=l:s[i][o]=l.clone().lerp(c,o/u)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var d=Math.floor(o/2);o%2===0?(h(s[i][d+1]),h(s[i+1][d]),h(s[i][d])):(h(s[i][d+1]),h(s[i+1][d+1]),h(s[i+1][d]))}}function s(e){for(var t=new c,n=0;n<g.length;n+=3)t.x=g[n+0],t.y=g[n+1],t.z=g[n+2],t.normalize().multiplyScalar(e),g[n+0]=t.x,g[n+1]=t.y,g[n+2]=t.z}function l(){for(var e=new c,t=0;t<g.length;t+=3){e.x=g[t+0],e.y=g[t+1],e.z=g[t+2];var n=m(e)/2/Math.PI+.5,r=v(e)/Math.PI+.5;y.push(n,1-r)}f(),u()}function u(){for(var e=0;e<y.length;e+=6){var t=y[e+0],n=y[e+2],r=y[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(y[e+0]+=1),n<.2&&(y[e+2]+=1),r<.2&&(y[e+4]+=1))}}function h(e){g.push(e.x,e.y,e.z)}function d(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function f(){for(var e=new c,t=new c,r=new c,i=new c,o=new n,a=new n,s=new n,l=0,u=0;l<g.length;l+=9,u+=6){e.set(g[l+0],g[l+1],g[l+2]),t.set(g[l+3],g[l+4],g[l+5]),r.set(g[l+6],g[l+7],g[l+8]),o.set(y[u+0],y[u+1]),a.set(y[u+2],y[u+3]),s.set(y[u+4],y[u+5]),i.copy(e).add(t).add(r).divideScalar(3);var h=m(i);p(o,u+0,e,h),p(a,u+2,t,h),p(s,u+4,r,h)}}function p(e,t,n,r){r<0&&1===e.x&&(y[t]=e.x-1),0===n.x&&0===n.z&&(y[t]=r/2/Math.PI+.5)}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}Le.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},r=r||1,i=i||0;var g=[],y=[];o(i),s(r),l(),this.addAttribute("position",Me(g,3)),this.addAttribute("normal",Me(g.slice(),3)),this.addAttribute("uv",Me(y,2)),this.normalizeNormals(),this.boundingSphere=new te(new c,r)}function Nt(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Ot.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Dt(e,t){Te.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Nt(e,t)),this.mergeVertices()}function It(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ot.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ut(e,t){Te.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new It(e,t)),this.mergeVertices()}function Ft(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ot.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Bt(e,t){Te.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ft(e,t)),this.mergeVertices()}function zt(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ot.call(this,i,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function jt(e,t){Te.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zt(e,t)),this.mergeVertices()}function Gt(e,t,n,r){Te.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Ot(e,t,n,r)),this.mergeVertices()}function Ht(e,t,r,i,o){function a(){for(d=0;d<t;d++)s(d);s(o===!1?t:0),u(),l()}function s(n){var o=e.getPointAt(n/t),a=h.normals[n],s=h.binormals[n];for(f=0;f<=i;f++){var l=f/i*Math.PI*2,c=Math.sin(l),u=-Math.cos(l);m.x=u*a.x+c*s.x,m.y=u*a.y+c*s.y,m.z=u*a.z+c*s.z,m.normalize(),y.push(m.x,m.y,m.z),p.x=o.x+r*m.x,p.y=o.y+r*m.y,p.z=o.z+r*m.z,g.push(p.x,p.y,p.z)}}function l(){for(f=1;f<=t;f++)for(d=1;d<=i;d++){var e=(i+1)*(f-1)+(d-1),n=(i+1)*f+(d-1),r=(i+1)*f+d,o=(i+1)*(f-1)+d;x.push(e,n,o),x.push(n,r,o)}}function u(){for(d=0;d<=t;d++)for(f=0;f<=i;f++)v.x=d/t,v.y=f/i,b.push(v.x,v.y)}Le.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:o},t=t||64,r=r||1,i=i||8,o=o||!1;var h=e.computeFrenetFrames(t,o);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var d,f,p=new c,m=new c,v=new n,g=[],y=[],b=[],x=[];a(),this.setIndex((x.length>65535?_e:xe)(x,1)),this.addAttribute("position",Me(g,3)),this.addAttribute("normal",Me(y,3)),this.addAttribute("uv",Me(b,2))}function Vt(e,t,n,r,i,o){Te.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Ht(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Wt(e,t,r,i,o,a){function s(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}Le.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:o,q:a},e=e||100,t=t||40,r=Math.floor(r)||64,i=Math.floor(i)||8,o=o||2,a=a||3;var l,u,h=(i+1)*(r+1),d=i*r*2*3,f=new me(new(d>65535?Uint32Array:Uint16Array)(d),1),p=new me(new Float32Array(3*h),3),m=new me(new Float32Array(3*h),3),v=new me(new Float32Array(2*h),2),g=0,y=0,b=new c,x=new c,w=new n,_=new c,M=new c,S=new c,E=new c,T=new c;for(l=0;l<=r;++l){var C=l/r*o*Math.PI*2;for(s(C,o,a,e,_),s(C+.01,o,a,e,M),E.subVectors(M,_),T.addVectors(M,_),S.crossVectors(E,T),T.crossVectors(S,E),S.normalize(),T.normalize(),u=0;u<=i;++u){var A=u/i*Math.PI*2,L=-t*Math.cos(A),R=t*Math.sin(A);b.x=_.x+(L*T.x+R*S.x),b.y=_.y+(L*T.y+R*S.y),b.z=_.z+(L*T.z+R*S.z),p.setXYZ(g,b.x,b.y,b.z),x.subVectors(b,_).normalize(),m.setXYZ(g,x.x,x.y,x.z),w.x=l/r,w.y=u/i,v.setXY(g,w.x,w.y),g++}}for(u=1;u<=r;u++)for(l=1;l<=i;l++){var P=(i+1)*(u-1)+(l-1),k=(i+1)*u+(l-1),O=(i+1)*u+l,N=(i+1)*(u-1)+l;f.setX(y,P),y++,f.setX(y,k),y++,f.setX(y,N),y++,f.setX(y,k),y++,f.setX(y,O),y++,f.setX(y,N),y++}this.setIndex(f),this.addAttribute("position",p),this.addAttribute("normal",m),this.addAttribute("uv",v)}function Xt(e,t,n,r,i,o,a){Te.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Wt(e,t,n,r,i,o)),this.mergeVertices()}function qt(e,t,n,r,i){Le.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=(n+1)*(r+1),l=n*r*2*3,u=new(l>65535?Uint32Array:Uint16Array)(l),h=new Float32Array(3*s),d=new Float32Array(3*s),f=new Float32Array(2*s),p=0,m=0,v=0,g=new c,y=new c,b=new c;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var x=a/r*i,w=o/n*Math.PI*2;y.x=(e+t*Math.cos(w))*Math.cos(x),y.y=(e+t*Math.cos(w))*Math.sin(x),y.z=t*Math.sin(w),h[p]=y.x,h[p+1]=y.y,h[p+2]=y.z,g.x=e*Math.cos(x),g.y=e*Math.sin(x),b.subVectors(y,g).normalize(),d[p]=b.x,d[p+1]=b.y,d[p+2]=b.z,f[m]=a/r,f[m+1]=o/n,p+=3,m+=2}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var _=(r+1)*o+a-1,M=(r+1)*(o-1)+a-1,S=(r+1)*(o-1)+a,E=(r+1)*o+a;u[v]=_,u[v+1]=M,u[v+2]=E,u[v+3]=M,u[v+4]=S,u[v+5]=E,v+=6}this.setIndex(new me(u,1)),this.addAttribute("position",new me(h,3)),this.addAttribute("normal",new me(d,3)),this.addAttribute("uv",new me(f,2))}function Yt(e,t,n,r,i){Te.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new qt(e,t,n,r,i))}function $t(e,t){return"undefined"==typeof e?void(e=[]):(Te.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())}function Zt(e,t){t=t||{};var n=t.font;if((n&&n.isFont)===!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Te;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),$t.call(this,r,t),this.type="TextGeometry"}function Kt(e,t,n,r,i,o,a){Le.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;for(var s=o+a,l=(t+1)*(n+1),u=new me(new Float32Array(3*l),3),h=new me(new Float32Array(3*l),3),d=new me(new Float32Array(2*l),2),f=0,p=[],m=new c,v=0;v<=n;v++){for(var g=[],y=v/n,b=0;b<=t;b++){var x=b/t,w=-e*Math.cos(r+x*i)*Math.sin(o+y*a),_=e*Math.cos(o+y*a),M=e*Math.sin(r+x*i)*Math.sin(o+y*a);m.set(w,_,M).normalize(),u.setXYZ(f,w,_,M),h.setXYZ(f,m.x,m.y,m.z),d.setXY(f,x,1-y),g.push(f),f++}p.push(g)}for(var S=[],v=0;v<n;v++)for(var b=0;b<t;b++){var E=p[v][b+1],T=p[v][b],C=p[v+1][b],A=p[v+1][b+1];(0!==v||o>0)&&S.push(E,T,A),(v!==n-1||s<Math.PI)&&S.push(T,C,A)}this.setIndex(new(u.count>65535?_e:xe)(S,1)),this.addAttribute("position",u),this.addAttribute("normal",h),this.addAttribute("uv",d),this.boundingSphere=new te(new c,e)}function Jt(e,t,n,r,i,o,a){Te.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Kt(e,t,n,r,i,o,a))}function Qt(e,t,r,i,o,a){Le.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:a},e=e||20,t=t||50,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?Math.max(1,i):1;var s,l,u,h=(r+1)*(i+1),d=r*i*2*3,f=new me(new(d>65535?Uint32Array:Uint16Array)(d),1),p=new me(new Float32Array(3*h),3),m=new me(new Float32Array(3*h),3),v=new me(new Float32Array(2*h),2),g=0,y=0,b=e,x=(t-e)/i,w=new c,_=new n;for(l=0;l<=i;l++){for(u=0;u<=r;u++)s=o+u/r*a,w.x=b*Math.cos(s),w.y=b*Math.sin(s),p.setXYZ(g,w.x,w.y,w.z),m.setXYZ(g,0,0,1),_.x=(w.x/t+1)/2,_.y=(w.y/t+1)/2,v.setXY(g,_.x,_.y),g++;b+=x}for(l=0;l<i;l++){var M=l*(r+1);for(u=0;u<r;u++){s=u+M;var S=s,E=s+r+1,T=s+r+2,C=s+1;f.setX(y,S),y++,f.setX(y,E),y++,f.setX(y,T),y++,f.setX(y,S),y++,f.setX(y,T),y++,f.setX(y,C),y++}}this.setIndex(f),this.addAttribute("position",p),this.addAttribute("normal",m),this.addAttribute("uv",v)}function en(e,t,n,r,i,o){Te.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Qt(e,t,n,r,i,o))}function tn(e,t,n,r){Te.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new ke(e,t,n,r))}function nn(e,t,r,i){Le.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t)||12,r=r||0,i=i||2*Math.PI,i=Ua.clamp(i,0,2*Math.PI);var o,a,s,l=(t+1)*e.length,u=t*e.length*2*3,h=new me(new(u>65535?Uint32Array:Uint16Array)(u),1),d=new me(new Float32Array(3*l),3),f=new me(new Float32Array(2*l),2),p=0,m=0,v=1/t,g=new c,y=new n;for(a=0;a<=t;a++){var b=r+a*v*i,x=Math.sin(b),w=Math.cos(b);for(s=0;s<=e.length-1;s++)g.x=e[s].x*x,g.y=e[s].y,g.z=e[s].x*w,d.setXYZ(p,g.x,g.y,g.z),y.x=a/t,y.y=s/(e.length-1),f.setXY(p,y.x,y.y),p++}for(a=0;a<t;a++)for(s=0;s<e.length-1;s++){o=s+a*e.length;var _=o,M=o+e.length,S=o+e.length+1,E=o+1;h.setX(m,_),m++,h.setX(m,M),m++,h.setX(m,E),m++,h.setX(m,M),m++,h.setX(m,S),m++,h.setX(m,E),m++}if(this.setIndex(h),this.addAttribute("position",d),this.addAttribute("uv",f),this.computeVertexNormals(),i===2*Math.PI){var T=this.attributes.normal.array,C=new c,A=new c,L=new c;for(o=t*e.length*3,a=0,s=0;a<e.length;a++,s+=3)C.x=T[s+0],C.y=T[s+1],C.z=T[s+2],A.x=T[o+s+0],A.y=T[o+s+1],A.z=T[o+s+2],L.addVectors(C,A).normalize(),T[s+0]=T[o+s+0]=L.x,T[s+1]=T[o+s+1]=L.y,T[s+2]=T[o+s+2]=L.z}}function rn(e,t,n,r){Te.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new nn(e,t,n,r)),this.mergeVertices()}function on(e,t){Te.call(this),this.type="ShapeGeometry",Array.isArray(e)===!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()}function an(e,t){function n(e,t){return e-t}Le.call(this),t=void 0!==t?t:1;var r,i=Math.cos(Ua.DEG2RAD*t),o=[0,0],a={},s=["a","b","c"];e&&e.isBufferGeometry?(r=new Te,r.fromBufferGeometry(e)):r=e.clone(),r.mergeVertices(),r.computeFaceNormals();for(var l=r.vertices,c=r.faces,u=0,h=c.length;u<h;u++)for(var d=c[u],f=0;f<3;f++){o[0]=d[s[f]],o[1]=d[s[(f+1)%3]],o.sort(n);var p=o.toString();void 0===a[p]?a[p]={vert1:o[0],vert2:o[1],face1:u,face2:void 0}:a[p].face2=u}var m=[];for(var p in a){var v=a[p];if(void 0===v.face2||c[v.face1].normal.dot(c[v.face2].normal)<=i){var g=l[v.vert1];m.push(g.x),m.push(g.y),m.push(g.z),g=l[v.vert2],m.push(g.x),m.push(g.y),m.push(g.z)}}this.addAttribute("position",new me(new Float32Array(m),3))}function sn(e,t,r,i,o,a,s,l){function u(){var e=(i+1)*(o+1);return a===!1&&(e+=(i+1)*m+i*m),e}function h(){var e=i*o*2*3;return a===!1&&(e+=i*m*3),e}function d(){var n,a,u=new c,h=new c,d=0,f=(t-e)/r;for(a=0;a<=o;a++){var m=[],v=a/o,g=v*(t-e)+e;for(n=0;n<=i;n++){var C=n/i,A=C*l+s,L=Math.sin(A),R=Math.cos(A);h.x=g*L,h.y=-v*r+E,h.z=g*R,b.setXYZ(_,h.x,h.y,h.z),u.set(L,f,R).normalize(),x.setXYZ(_,u.x,u.y,u.z),w.setXY(_,C,1-v),m.push(_),_++}S.push(m)}for(n=0;n<i;n++)for(a=0;a<o;a++){var P=S[a][n],k=S[a+1][n],O=S[a+1][n+1],N=S[a][n+1];y.setX(M,P),M++,y.setX(M,k),M++,y.setX(M,N),M++,y.setX(M,k),M++,y.setX(M,O),M++,y.setX(M,N),M++,d+=6}p.addGroup(T,d,0),T+=d}function f(r){var o,a,u,h=new n,d=new c,f=0,m=r===!0?e:t,v=r===!0?1:-1;for(a=_,o=1;o<=i;o++)b.setXYZ(_,0,E*v,0),x.setXYZ(_,0,v,0),h.x=.5,h.y=.5,w.setXY(_,h.x,h.y),_++;for(u=_,o=0;o<=i;o++){var g=o/i,S=g*l+s,C=Math.cos(S),A=Math.sin(S);d.x=m*A,d.y=E*v,d.z=m*C,b.setXYZ(_,d.x,d.y,d.z),x.setXYZ(_,0,v,0),h.x=.5*C+.5,h.y=.5*A*v+.5,w.setXY(_,h.x,h.y),_++}for(o=0;o<i;o++){var L=a+o,R=u+o;r===!0?(y.setX(M,R),M++,y.setX(M,R+1),M++,y.setX(M,L),M++):(y.setX(M,R+1),M++,y.setX(M,R),M++,y.setX(M,L),M++),f+=3}p.addGroup(T,f,r===!0?1:2),T+=f}Le.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l};var p=this;e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,i=Math.floor(i)||8,o=Math.floor(o)||1,a=void 0!==a&&a,s=void 0!==s?s:0,l=void 0!==l?l:2*Math.PI;var m=0;a===!1&&(e>0&&m++,t>0&&m++);var v=u(),g=h(),y=new me(new(g>65535?Uint32Array:Uint16Array)(g),1),b=new me(new Float32Array(3*v),3),x=new me(new Float32Array(3*v),3),w=new me(new Float32Array(2*v),2),_=0,M=0,S=[],E=r/2,T=0;d(),a===!1&&(e>0&&f(!0),t>0&&f(!1)),this.setIndex(y),this.addAttribute("position",b),this.addAttribute("normal",x),this.addAttribute("uv",w)}function ln(e,t,n,r,i,o,a,s){Te.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new sn(e,t,n,r,i,o,a,s)),this.mergeVertices()}function cn(e,t,n,r,i,o,a){ln.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function un(e,t,n,r,i,o,a){sn.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function hn(e,t,n,r){Le.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=t+2,o=new Float32Array(3*i),a=new Float32Array(3*i),s=new Float32Array(2*i);a[2]=1,s[0]=.5,s[1]=.5;for(var l=0,u=3,h=2;l<=t;l++,u+=3,h+=2){var d=n+l/t*r;o[u]=e*Math.cos(d),o[u+1]=e*Math.sin(d),a[u+2]=1,s[h]=(o[u]/e+1)/2,s[h+1]=(o[u+1]/e+1)/2}for(var f=[],u=1;u<=t;u++)f.push(u,u+1,0);this.setIndex(new me(new Uint16Array(f),1)),this.addAttribute("position",new me(o,3)),this.addAttribute("normal",new me(a,3)),this.addAttribute("uv",new me(s,2)),this.boundingSphere=new te(new c,e)}function dn(e,t,n,r){Te.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new hn(e,t,n,r))}function fn(e,t,n,r,i,o){Te.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Pe(e,t,n,r,i,o)),this.mergeVertices()}function pn(){J.call(this,{uniforms:Va.merge([Vl.lights,{opacity:{value:1}}]),vertexShader:Gl.shadow_vert,fragmentShader:Gl.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function mn(e){J.call(this,e),this.type="RawShaderMaterial"}function vn(e){this.uuid=Ua.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0}function gn(e){Z.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new X(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function yn(e){gn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function bn(e){Z.call(this),this.type="MeshPhongMaterial",this.color=new X(16777215),this.specular=new X(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ho,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xn(e){Z.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(e)}function wn(e){Z.call(this),this.type="MeshLambertMaterial",this.color=new X(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ho,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _n(e){Z.call(this),this.type="LineDashedMaterial",this.color=new X(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}function Mn(e,t,n){var r=this,i=!1,o=0,a=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,i===!1&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)}}function Sn(e){this.manager=void 0!==e?e:ec}function En(e){this.manager=void 0!==e?e:ec,this._parser=null}function Tn(e){this.manager=void 0!==e?e:ec,this._parser=null}function Cn(e){this.manager=void 0!==e?e:ec}function An(e){this.manager=void 0!==e?e:ec}function Ln(e){this.manager=void 0!==e?e:ec}function Rn(e,t){ce.call(this),this.type="Light",this.color=new X(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Pn(e,t,n){Rn.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ce.DefaultUp),this.updateMatrix(),this.groundColor=new X(t)}function kn(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new u}function On(){kn.call(this,new Ne(50,1,.5,500))}function Nn(e,t,n,r,i,o){Rn.call(this,e,t),this.type="SpotLight",this.position.copy(ce.DefaultUp),this.updateMatrix(),this.target=new ce,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new On}function Dn(e,t,n,r){Rn.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new kn(new Ne(90,1,.5,500))}function In(e){kn.call(this,new De(-5,5,5,-5,.5,500))}function Un(e,t){Rn.call(this,e,t),this.type="DirectionalLight",this.position.copy(ce.DefaultUp),this.updateMatrix(),this.target=new ce,this.shadow=new In}function Fn(e,t){Rn.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Bn(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function zn(e,t,n,r){Bn.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function jn(e,t,n,r){Bn.call(this,e,t,n,r)}function Gn(e,t,n,r){Bn.call(this,e,t,n,r)}function Hn(e,t,n,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=nc.convertArray(t,this.TimeBufferType),this.values=nc.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function Vn(e,t,n,r){Hn.call(this,e,t,n,r)}function Wn(e,t,n,r){Bn.call(this,e,t,n,r)}function Xn(e,t,n,r){Hn.call(this,e,t,n,r)}function qn(e,t,n,r){Hn.call(this,e,t,n,r)}function Yn(e,t,n,r){Hn.call(this,e,t,n,r)}function $n(e,t,n){Hn.call(this,e,t,n)}function Zn(e,t,n,r){Hn.call(this,e,t,n,r)}function Kn(e,t,n,r){Hn.apply(this,arguments)}function Jn(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Ua.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Qn(e){this.manager=void 0!==e?e:ec,this.textures={}}function er(e){this.manager=void 0!==e?e:ec}function tr(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function nr(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:ec,this.withCredentials=!1}function rr(e){this.manager=void 0!==e?e:ec,this.texturePath=""}function ir(){}function or(e,t){this.v1=e,this.v2=t}function ar(){this.curves=[],this.autoClose=!1}function sr(e,t,n,r,i,o,a,s){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0}function lr(e){this.points=void 0===e?[]:e}function cr(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r}function ur(e,t,n){this.v0=e,this.v1=t,this.v2=n}function hr(){dr.apply(this,arguments),this.holes=[]}function dr(e){ar.call(this),this.currentPoint=new n,e&&this.fromPoints(e)}function fr(){this.subPaths=[],this.currentPath=null}function pr(e){this.data=e}function mr(e){this.manager=void 0!==e?e:ec}function vr(){return void 0===ac&&(ac=new(window.AudioContext||window.webkitAudioContext)),ac}function gr(e){this.manager=void 0!==e?e:ec}function yr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ne,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ne,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function br(e,t,n){ce.call(this),this.type="CubeCamera";var r=90,i=1,o=new Ne(r,i,e,t);o.up.set(0,-1,0),o.lookAt(new c(1,0,0)),this.add(o);var a=new Ne(r,i,e,t);a.up.set(0,-1,0),a.lookAt(new c(-1,0,0)),this.add(a);var l=new Ne(r,i,e,t);l.up.set(0,0,1),l.lookAt(new c(0,1,0)),this.add(l);var u=new Ne(r,i,e,t);u.up.set(0,0,-1),u.lookAt(new c(0,-1,0)),this.add(u);var h=new Ne(r,i,e,t);h.up.set(0,-1,0),h.lookAt(new c(0,0,1)),this.add(h);var d=new Ne(r,i,e,t);d.up.set(0,-1,0),d.lookAt(new c(0,0,-1)),this.add(d);var f={format:Qo,magFilter:Io,minFilter:Io};this.renderTarget=new s(n,n,f),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,o,n),n.activeCubeFace=1,e.render(t,a,n),n.activeCubeFace=2,e.render(t,l,n),n.activeCubeFace=3,e.render(t,u,n),n.activeCubeFace=4,e.render(t,h,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,d,n),e.setRenderTarget(null)}}function xr(){ce.call(this),this.type="AudioListener",this.context=vr(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function wr(e){ce.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function _r(e){wr.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Mr(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Sr(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Er(e,t,n){this.path=t,this.parsedPath=n||Er.parseTrackName(t),this.node=Er.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Tr(e){this.uuid=Ua.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Cr(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:wa,endingEnd:wa},s=0;s!==i;++s){var l=r[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=va,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ar(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Lr(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Rr(){Le.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Pr(e,t,n,r){this.uuid=Ua.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}function kr(e,t){this.uuid=Ua.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Or(e,t,n){kr.call(this,e,t),this.meshPerAttribute=n||1}function Nr(e,t,n){me.call(this,e,t),this.meshPerAttribute=n||1}function Dr(e,t,n,r){this.ray=new ae(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ir(e,t){return e.distance-t.distance}function Ur(e,t,n,r){if(e.visible!==!1&&(e.raycast(t,n),r===!0))for(var i=e.children,o=0,a=i.length;o<a;o++)Ur(i[o],t,n,!0)}function Fr(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Br(e){function t(e,t,n,r,i,o,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*i+t}this.points=e;var n,r,i,o,a,s,l,u,h,d=[],f={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return n=(this.points.length-1)*e,r=Math.floor(n),i=n-r,d[0]=0===r?r:r-1,d[1]=r,d[2]=r>this.points.length-2?this.points.length-1:r+1,d[3]=r>this.points.length-3?this.points.length-1:r+2,s=this.points[d[0]],l=this.points[d[1]],u=this.points[d[2]],h=this.points[d[3]],o=i*i,a=i*o,f.x=t(s.x,l.x,u.x,h.x,i,o,a),f.y=t(s.y,l.y,u.y,h.y,i,o,a),f.z=t(s.z,l.z,u.z,h.z,i,o,a),f},this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;e<n;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,n,r,i,o=0,a=0,s=0,l=new c,u=new c,h=[],d=0;for(h[0]=0,e||(e=100),r=this.points.length*e,l.copy(this.points[0]),t=1;t<r;t++)n=t/r,i=this.getPoint(n),u.copy(i),d+=u.distanceTo(l),l.copy(i),o=(this.points.length-1)*n,a=Math.floor(o),a!==s&&(h[a]=d,s=a);return h[h.length]=d,{chunks:h,total:d}},this.reparametrizeByArcLength=function(e){var t,n,r,i,o,a,s,l,u=[],h=new c,d=this.getLength();for(u.push(h.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(a=d.chunks[t]-d.chunks[t-1],s=Math.ceil(e*a/d.total),i=(t-1)/(this.points.length-1),o=t/(this.points.length-1),n=1;n<s-1;n++)r=i+n*(1/s)*(o-i),l=this.getPoint(r),u.push(h.copy(l).clone());u.push(h.copy(this.points[t]).clone())}this.points=u}}function zr(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function jr(e,t){Re.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",i=0,o=n-1,a=n/1;this.createAnimation(r,i,o,a),this.setAnimationWeight(r,1);
}function Gr(e){ce.call(this),this.material=e,this.render=function(e){}}function Hr(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new Le,c=new Me(2*a*3,3);l.addAttribute("position",c),_t.call(this,l,new xt({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Vr(e){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Le,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,i=1,o=32;r<o;r++,i++){var a=r/o*Math.PI*2,s=i/o*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}t.addAttribute("position",new Me(n,3));var l=new xt({fog:!1});this.cone=new _t(t,l),this.add(this.cone),this.update()}function Wr(e){this.bones=this.getBoneList(e);for(var t=new Te,n=0;n<this.bones.length;n++){var r=this.bones[n];r.parent&&r.parent.isBone&&(t.vertices.push(new c),t.vertices.push(new c),t.colors.push(new X(0,0,1)),t.colors.push(new X(0,1,0)))}t.dynamic=!0;var i=new xt({vertexColors:Oi,depthTest:!1,depthWrite:!1,transparent:!0});_t.call(this,t,i),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Xr(e,t){this.light=e,this.light.updateMatrixWorld();var n=new Kt(t,4,2),r=new pe({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),Re.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function qr(e,t){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new X,new X];var n=new Jt(t,4,2);n.rotateX(-Math.PI/2);for(var r=0,i=8;r<i;r++)n.faces[r].color=this.colors[r<4?0:1];var o=new pe({vertexColors:ki,wireframe:!0});this.lightSphere=new Re(n,o),this.add(this.lightSphere),this.update()}function Yr(e,t,n,r){t=t||1,n=new X(void 0!==n?n:4473924),r=new X(void 0!==r?r:8947848);for(var i=t/2,o=2*e/t,a=[],s=[],l=0,c=0,u=-e;l<=t;l++,u+=o){a.push(-e,0,u,e,0,u),a.push(u,0,-e,u,0,e);var h=l===i?n:r;h.toArray(s,c),c+=3,h.toArray(s,c),c+=3,h.toArray(s,c),c+=3,h.toArray(s,c),c+=3}var d=new Le;d.addAttribute("position",new Me(a,3)),d.addAttribute("color",new Me(s,3));var f=new xt({vertexColors:Oi});_t.call(this,d,f)}function $r(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Le,c=new Me(2*a*3,3);l.addAttribute("position",c),_t.call(this,l,new xt({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Zr(e,t){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var n=new Le;n.addAttribute("position",new Me([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new xt({fog:!1});this.add(new wt(n,r)),n=new Le,n.addAttribute("position",new Me([0,0,0,0,0,1],3)),this.add(new wt(n,r)),this.update()}function Kr(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){r.vertices.push(new c),r.colors.push(new X(t)),void 0===o[e]&&(o[e]=[]),o[e].push(r.vertices.length-1)}var r=new Te,i=new xt({color:16777215,vertexColors:ki}),o={},a=16755200,s=16711680,l=43775,u=16777215,h=3355443;t("n1","n2",a),t("n2","n4",a),t("n4","n3",a),t("n3","n1",a),t("f1","f2",a),t("f2","f4",a),t("f4","f3",a),t("f3","f1",a),t("n1","f1",a),t("n2","f2",a),t("n3","f3",a),t("n4","f4",a),t("p","n1",s),t("p","n2",s),t("p","n3",s),t("p","n4",s),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",u),t("p","c",h),t("cn1","cn2",h),t("cn3","cn4",h),t("cf1","cf2",h),t("cf3","cf4",h),_t.call(this,r,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Jr(e,t){var n=void 0!==t?t:8947848;this.object=e,this.box=new ee,Re.call(this,new fn(1,1,1),new pe({color:n,wireframe:!0}))}function Qr(e,t){void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Le;i.setIndex(new me(n,1)),i.addAttribute("position",new me(r,3)),_t.call(this,i,new xt({color:t})),void 0!==e&&this.update(e)}function ei(e,t,n,r,i,o){ce.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),this.position.copy(t),this.line=new wt(sc,new xt({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Re(lc,new pe({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function ti(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new Le;r.addAttribute("position",new me(t,3)),r.addAttribute("color",new me(n,3));var i=new xt({vertexColors:Oi});_t.call(this,r,i)}function ni(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),cc.call(this,e),this.type="catmullrom",this.closed=!0}function ri(e,t,n,r,i,o){sr.call(this,e,t,n,n,r,i,o)}function ii(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new fe(e,t,n,i,o,a)}function oi(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new St(e,t)}function ai(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new St(e,t)}function si(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Mt(e)}function li(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Mt(e)}function ci(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Mt(e)}function ui(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new c(e,t,n)}function hi(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new _t(new an(e.geometry),new xt({color:void 0!==t?t:16777215}))}function di(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new _t(new Rt(e.geometry),new xt({color:void 0!==t?t:16777215}))}function fi(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function pi(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}}(),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;var r=[],i=0,o=n.length;for(i=0;i<o;i++)r[i]=n[i];for(i=0;i<o;i++)r[i].call(this,e)}}}});var mi="82",vi={LEFT:0,MIDDLE:1,RIGHT:2},gi=0,yi=1,bi=2,xi=3,wi=0,_i=1,Mi=0,Si=1,Ei=2,Ti=0,Ci=1,Ai=2,Li=1,Ri=2,Pi=0,ki=1,Oi=2,Ni=0,Di=1,Ii=2,Ui=3,Fi=4,Bi=5,zi={NoBlending:Ni,NormalBlending:Di,AdditiveBlending:Ii,SubtractiveBlending:Ui,MultiplyBlending:Fi,CustomBlending:Bi},ji=100,Gi=101,Hi=102,Vi=103,Wi=104,Xi=200,qi=201,Yi=202,$i=203,Zi=204,Ki=205,Ji=206,Qi=207,eo=208,to=209,no=210,ro=0,io=1,oo=2,ao=3,so=4,lo=5,co=6,uo=7,ho=0,fo=1,po=2,mo=0,vo=1,go=2,yo=3,bo=4,xo=300,wo=301,_o=302,Mo=303,So=304,Eo=305,To=306,Co=307,Ao={UVMapping:xo,CubeReflectionMapping:wo,CubeRefractionMapping:_o,EquirectangularReflectionMapping:Mo,EquirectangularRefractionMapping:So,SphericalReflectionMapping:Eo,CubeUVReflectionMapping:To,CubeUVRefractionMapping:Co},Lo=1e3,Ro=1001,Po=1002,ko={RepeatWrapping:Lo,ClampToEdgeWrapping:Ro,MirroredRepeatWrapping:Po},Oo=1003,No=1004,Do=1005,Io=1006,Uo=1007,Fo=1008,Bo={NearestFilter:Oo,NearestMipMapNearestFilter:No,NearestMipMapLinearFilter:Do,LinearFilter:Io,LinearMipMapNearestFilter:Uo,LinearMipMapLinearFilter:Fo},zo=1009,jo=1010,Go=1011,Ho=1012,Vo=1013,Wo=1014,Xo=1015,qo=1016,Yo=1017,$o=1018,Zo=1019,Ko=1020,Jo=1021,Qo=1022,ea=1023,ta=1024,na=1025,ra=ea,ia=1026,oa=1027,aa=2001,sa=2002,la=2003,ca=2004,ua=2100,ha=2101,da=2102,fa=2103,pa=2151,ma=2200,va=2201,ga=2202,ya=2300,ba=2301,xa=2302,wa=2400,_a=2401,Ma=2402,Sa=0,Ea=1,Ta=2,Ca=3e3,Aa=3001,La=3007,Ra=3002,Pa=3003,ka=3004,Oa=3005,Na=3006,Da=3200,Ia=3201,Ua={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?n[i]="-":14===i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[i]=t[19===i?3&e|8:e]);return n.join("")}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ua.DEG2RAD},radToDeg:function(e){return e*Ua.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}};n.prototype={constructor:n,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new n,t=new n),e.set(r,r),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}},r.DEFAULT_IMAGE=void 0,r.DEFAULT_MAPPING=xo,r.prototype={constructor:r,isTexture:!0,set needsUpdate(e){e===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){function t(e){var t;return void 0!==e.toDataURL?t=e:(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=Ua.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:t(r)}),n.image=r.uuid}return e.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===xo){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case Lo:e.x=e.x-Math.floor(e.x);break;case Ro:e.x=e.x<0?0:1;break;case Po:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Lo:e.y=e.y-Math.floor(e.y);break;case Ro:e.y=e.y<0?0:1;break;case Po:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},Object.assign(r.prototype,t.prototype);var Fa=0;o.prototype={constructor:o,isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],v=s[10];if(Math.abs(c-h)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(l+d+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(d+1)/2,b=(v+1)/2,x=(c+h)/4,w=(u+p)/4,_=(f+m)/4;return g>y&&g>b?g<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=x/n,i=w/n):y>b?y<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=x/r,i=_/r):b<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(b),n=w/i,r=_/i),this.set(n,r,i,t),this}var M=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(M)<.001&&(M=1),this.x=(m-f)/M,this.y=(u-p)/M,this.z=(h-c)/M,this.w=Math.acos((l+d+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new o,t=new o),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this}},Object.assign(a.prototype,t.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.isWebGLRenderTargetCube=!0,l.prototype={constructor:l,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if((e&&e.isEuler)===!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),o=Math.sin(e._x/2),a=Math.sin(e._y/2),s=Math.sin(e._z/2),l=e.order;return"XYZ"===l?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"YXZ"===l?(this._x=o*r*i+n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"ZXY"===l?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i-o*a*s):"ZYX"===l?(this._x=o*r*i-n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i+o*a*s):"YZX"===l?(this._x=o*r*i+n*a*s,this._y=n*a*i+o*r*s,this._z=n*r*s-o*a*i,this._w=n*r*i-o*a*s):"XZY"===l&&(this._x=o*r*i-n*a*s,this._y=n*a*i-o*r*s,this._z=n*r*s+o*a*i,this._w=n*r*i+o*a*s),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],h=n[10],d=r+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-l)*t,this._y=(o-c)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(u-l)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+c)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-c)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+c)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,n=1e-6;return function(r,i){return void 0===e&&(e=new c),t=r.dot(i)+1,t<n?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var l=Math.atan2(s,a),c=Math.sin((1-t)*l)/s,u=Math.sin(t*l)/s;return this._w=o*c+this._w*u,this._x=n*c+this._x*u,this._y=r*c+this._y*u,this._z=i*c+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(l,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3],h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(u!==p||s!==h||l!==d||c!==f){var m=1-a,v=s*h+l*d+c*f+u*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}var w=a*g;if(s=s*m+h*w,l=l*m+d*w,c=c*m+f*w,u=u*m+p*w,m===1-a){var _=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=_,l*=_,c*=_,u*=_}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}}),c.prototype={constructor:c,isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return(t&&t.isEuler)===!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new l),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new l),this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+c*-a-u*-o,this.y=c*s+h*-o+u*-i-l*-a,this.z=u*s+h*-a+l*-o-c*-i,this},project:function(){
var e;return function(t){return void 0===e&&(e=new u),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new u),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new c,t=new c),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new c),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new c),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ua.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=e;e=t,t=n}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this}},u.prototype={constructor:u,isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=h,v[3]=d,v[7]=f,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new c);var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(e){(e&&e.isEuler)===!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){var h=o*c,d=o*u,f=a*c,p=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=d+f*l,t[5]=h-p*l,t[9]=-a*s,t[2]=p-h*l,t[6]=f+d*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,v=s*u,g=l*c,y=l*u;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){var m=s*c,v=s*u,g=l*c,y=l*u;t[0]=m-y*a,t[4]=-o*u,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*c,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){var h=o*c,d=o*u,f=a*c,p=a*u;t[0]=s*c,t[4]=f*l-d,t[8]=h*l+p,t[1]=s*u,t[5]=p*l+h,t[9]=d*l-f,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,x=o*l,w=a*s,_=a*l;t[0]=s*c,t[4]=_-b*u,t[8]=w*u+x,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=x*u+w,t[10]=b-_*u}else if("XZY"===e.order){var b=o*s,x=o*l,w=a*s,_=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=b*u+_,t[5]=o*c,t[9]=x*u-w,t[2]=w*u-x,t[6]=a*c,t[10]=_*u+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,a=n+n,s=r+r,l=i+i,c=n*a,u=n*s,h=n*l,d=r*s,f=r*l,p=i*l,m=o*a,v=o*s,g=o*l;return t[0]=1-(d+p),t[4]=u-g,t[8]=h+v,t[1]=u+g,t[5]=1-(c+p),t[9]=f-m,t[2]=h-v,t[6]=f+m,t[10]=1-(c+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,n;return function(r,i,o){void 0===e&&(e=new c,t=new c,n=new c);var a=this.elements;return n.subVectors(r,i).normalize(),0===n.lengthSq()&&(n.z=1),e.crossVectors(o,n).normalize(),0===e.lengthSq()&&(n.z+=1e-4,e.crossVectors(o,n).normalize()),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],M=r[8],S=r[12],E=r[1],T=r[5],C=r[9],A=r[13],L=r[2],R=r[6],P=r[10],k=r[14],O=r[3],N=r[7],D=r[11],I=r[15];return i[0]=o*w+a*E+s*L+l*O,i[4]=o*_+a*T+s*R+l*N,i[8]=o*M+a*C+s*P+l*D,i[12]=o*S+a*A+s*k+l*I,i[1]=c*w+u*E+h*L+d*O,i[5]=c*_+u*T+h*R+d*N,i[9]=c*M+u*C+h*P+d*D,i[13]=c*S+u*A+h*k+d*I,i[2]=f*w+p*E+m*L+v*O,i[6]=f*_+p*T+m*R+v*N,i[10]=f*M+p*C+m*P+v*D,i[14]=f*S+p*A+m*k+v*I,i[3]=g*w+y*E+b*L+x*O,i[7]=g*_+y*T+b*R+x*N,i[11]=g*M+y*C+b*P+x*D,i[15]=g*S+y*A+b*k+x*I,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new c),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,o=n;i<r;i+=3,o+=3)e.fromArray(t,o),e.applyMatrix4(this),e.toArray(t,o);return t}}(),applyToBuffer:function(){var e;return function(t,n,r){void 0===e&&(e=new c),void 0===n&&(n=0),void 0===r&&(r=t.length/t.itemSize);for(var i=0,o=n;i<r;i++,o++)e.x=t.getX(o),e.y=t.getY(o),e.z=t.getZ(o),e.applyMatrix4(this),t.setXYZ(o,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14],f=e[3],p=e[7],m=e[11],v=e[15];return f*(+i*s*u-r*l*u-i*a*h+n*l*h+r*a*d-n*s*d)+p*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*c-i*s*c)+m*(+t*l*u-t*a*d-i*o*u+n*o*d+i*a*c-n*l*c)+v*(-r*a*c-t*s*u+t*a*h+r*o*u-n*o*h+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new c),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],x=f*y*h-g*p*h+g*u*m-c*y*m-f*u*b+c*p*b,w=v*p*h-d*y*h-v*u*m+l*y*m+d*u*b-l*p*b,_=d*g*h-v*f*h+v*c*m-l*g*m-d*c*b+l*f*b,M=v*f*u-d*g*u-v*c*p+l*g*p+d*c*y-l*f*y,S=i*x+o*w+a*_+s*M;if(0===S){var E="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(E);return console.warn(E),this.identity()}var T=1/S;return n[0]=x*T,n[1]=(g*p*s-f*y*s-g*a*m+o*y*m+f*a*b-o*p*b)*T,n[2]=(c*y*s-g*u*s+g*a*h-o*y*h-c*a*b+o*u*b)*T,n[3]=(f*u*s-c*p*s-f*a*h+o*p*h+c*a*m-o*u*m)*T,n[4]=w*T,n[5]=(d*y*s-v*p*s+v*a*m-i*y*m-d*a*b+i*p*b)*T,n[6]=(v*u*s-l*y*s-v*a*h+i*y*h+l*a*b-i*u*b)*T,n[7]=(l*p*s-d*u*s+d*a*h-i*p*h-l*a*m+i*u*m)*T,n[8]=_*T,n[9]=(v*f*s-d*g*s-v*o*m+i*g*m+d*o*b-i*f*b)*T,n[10]=(l*g*s-v*c*s+v*o*h-i*g*h-l*o*b+i*c*b)*T,n[11]=(d*c*s-l*f*s-d*o*h+i*f*h+l*o*m-i*c*m)*T,n[12]=M*T,n[13]=(d*g*a-v*f*a+v*o*p-i*g*p-d*o*y+i*f*y)*T,n[14]=(v*c*a-l*g*a-v*o*u+i*g*u+l*o*y-i*c*y)*T,n[15]=(l*f*a-d*c*a+d*o*u-i*f*u-l*o*p+i*c*p)*T,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e,t;return function(n,r,i){void 0===e&&(e=new c,t=new u);var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length(),h=this.determinant();h<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.elements.set(this.elements);var d=1/a,f=1/s,p=1/l;return t.elements[0]*=d,t.elements[1]*=d,t.elements[2]*=d,t.elements[4]*=f,t.elements[5]*=f,t.elements[6]*=f,t.elements[8]*=p,t.elements[9]*=p,t.elements[10]*=p,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=l,this}}(),makeFrustum:function(e,t,n,r,i,o){var a=this.elements,s=2*i/(t-e),l=2*i/(r-n),c=(t+e)/(t-e),u=(r+n)/(r-n),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,r){var i=n*Math.tan(Ua.DEG2RAD*e*.5),o=-i,a=o*t,s=i*t;return this.makeFrustum(a,s,o,i,n,r)},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,h=(n+r)*l,d=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.prototype.isCubeTexture=!0,Object.defineProperty(h.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Ba=new r,za=new h,ja=[],Ga=[];G.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(e,t[o.id])}};var Ha=/([\w\d_]+)(\])?(\[|\.)?/g;W.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},W.prototype.set=function(e,t,n){var r=this.map[n];void 0!==r&&r.setValue(e,t[n],this.renderer)},W.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},W.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];s.needsUpdate!==!1&&a.setValue(e,s.value,r)}},W.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Va={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}},Wa="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",Xa="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",qa="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",Ya="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",$a="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Za="\nvec3 transformed = vec3( position );\n",Ka="\nvec3 objectNormal = vec3( normal );\n",Ja="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",Qa="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",es="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",ts="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",ns="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",rs="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",is="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",os="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",as="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",ss="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",ls="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",cs="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",us="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",hs="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",ds="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",fs="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",ps="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",ms="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",vs="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",gs="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",ys="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",bs="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",xs="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",ws="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",_s="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Ms="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",Ss="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Es="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",Ts="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",Cs="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",As="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",Ls="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",Rs="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",Ps="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",ks="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",Os="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",Ns="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",Ds="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",Is="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",Us="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",Fs="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",Bs="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",zs="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",js="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Gs="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",Hs="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Vs="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",Ws="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",Xs="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",qs="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",Ys="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",$s="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",Zs="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",Ks="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",Js="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Qs="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",el="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",tl="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",nl="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",rl="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",il="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",ol="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",al="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",sl="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",ll="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",cl="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",ul="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",hl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",dl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",fl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",pl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",ml="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",vl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",gl="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",yl="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",bl="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",xl="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",wl="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",_l="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",Ml="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",Sl="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",El="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",Tl="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Cl="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",Al="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Ll="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",Rl="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Pl="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",kl="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Ol="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",Nl="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Dl="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Il="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",Ul="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",Fl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Bl="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",zl="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",jl="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Gl={
alphamap_fragment:Wa,alphamap_pars_fragment:Xa,alphatest_fragment:qa,aomap_fragment:Ya,aomap_pars_fragment:$a,begin_vertex:Za,beginnormal_vertex:Ka,bsdfs:Ja,bumpmap_pars_fragment:Qa,clipping_planes_fragment:es,clipping_planes_pars_fragment:ts,clipping_planes_pars_vertex:ns,clipping_planes_vertex:rs,color_fragment:is,color_pars_fragment:os,color_pars_vertex:as,color_vertex:ss,common:ls,cube_uv_reflection_fragment:cs,defaultnormal_vertex:us,displacementmap_pars_vertex:hs,displacementmap_vertex:ds,emissivemap_fragment:fs,emissivemap_pars_fragment:ps,encodings_fragment:ms,encodings_pars_fragment:vs,envmap_fragment:gs,envmap_pars_fragment:ys,envmap_pars_vertex:bs,envmap_vertex:xs,fog_fragment:ws,fog_pars_fragment:_s,lightmap_fragment:Ms,lightmap_pars_fragment:Ss,lights_lambert_vertex:Es,lights_pars:Ts,lights_phong_fragment:Cs,lights_phong_pars_fragment:As,lights_physical_fragment:Ls,lights_physical_pars_fragment:Rs,lights_template:Ps,logdepthbuf_fragment:ks,logdepthbuf_pars_fragment:Os,logdepthbuf_pars_vertex:Ns,logdepthbuf_vertex:Ds,map_fragment:Is,map_pars_fragment:Us,map_particle_fragment:Fs,map_particle_pars_fragment:Bs,metalnessmap_fragment:zs,metalnessmap_pars_fragment:js,morphnormal_vertex:Gs,morphtarget_pars_vertex:Hs,morphtarget_vertex:Vs,normal_flip:Ws,normal_fragment:Xs,normalmap_pars_fragment:qs,packing:Ys,premultiplied_alpha_fragment:$s,project_vertex:Zs,roughnessmap_fragment:Ks,roughnessmap_pars_fragment:Js,shadowmap_pars_fragment:Qs,shadowmap_pars_vertex:el,shadowmap_vertex:tl,shadowmask_pars_fragment:nl,skinbase_vertex:rl,skinning_pars_vertex:il,skinning_vertex:ol,skinnormal_vertex:al,specularmap_fragment:sl,specularmap_pars_fragment:ll,tonemapping_fragment:cl,tonemapping_pars_fragment:ul,uv_pars_fragment:hl,uv_pars_vertex:dl,uv_vertex:fl,uv2_pars_fragment:pl,uv2_pars_vertex:ml,uv2_vertex:vl,worldpos_vertex:gl,cube_frag:yl,cube_vert:bl,depth_frag:xl,depth_vert:wl,distanceRGBA_frag:_l,distanceRGBA_vert:Ml,equirect_frag:Sl,equirect_vert:El,linedashed_frag:Tl,linedashed_vert:Cl,meshbasic_frag:Al,meshbasic_vert:Ll,meshlambert_frag:Rl,meshlambert_vert:Pl,meshphong_frag:kl,meshphong_vert:Ol,meshphysical_frag:Nl,meshphysical_vert:Dl,normal_frag:Il,normal_vert:Ul,points_frag:Fl,points_vert:Bl,shadow_frag:zl,shadow_vert:jl};X.prototype={constructor:X,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Ua.euclideanModulo(t,1),n=Ua.clamp(n,0,1),r=Ua.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c=n[1],u=c.length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(e&&e.length>0){var c=Hl[e];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,r=e||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),l=Math.min(i,o,a),c=(l+s)/2;if(l===s)t=0,n=0;else{var u=s-l;switch(n=c<=.5?u/(s+l):u/(2-s-l),s){case i:t=(o-a)/u+(o<a?6:0);break;case o:t=(a-i)/u+2;break;case a:t=(i-o)/u+4}t/=6}return r.h=t,r.s=n,r.l=c,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var Hl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Vl={common:{diffuse:{value:new X(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new o(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new X(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new X(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new o(0,0,1,1)}}},Wl={basic:{uniforms:Va.merge([Vl.common,Vl.aomap,Vl.fog]),vertexShader:Gl.meshbasic_vert,fragmentShader:Gl.meshbasic_frag},lambert:{uniforms:Va.merge([Vl.common,Vl.aomap,Vl.lightmap,Vl.emissivemap,Vl.fog,Vl.lights,{emissive:{value:new X(0)}}]),vertexShader:Gl.meshlambert_vert,fragmentShader:Gl.meshlambert_frag},phong:{uniforms:Va.merge([Vl.common,Vl.aomap,Vl.lightmap,Vl.emissivemap,Vl.bumpmap,Vl.normalmap,Vl.displacementmap,Vl.fog,Vl.lights,{emissive:{value:new X(0)},specular:{value:new X(1118481)},shininess:{value:30}}]),vertexShader:Gl.meshphong_vert,fragmentShader:Gl.meshphong_frag},standard:{uniforms:Va.merge([Vl.common,Vl.aomap,Vl.lightmap,Vl.emissivemap,Vl.bumpmap,Vl.normalmap,Vl.displacementmap,Vl.roughnessmap,Vl.metalnessmap,Vl.fog,Vl.lights,{emissive:{value:new X(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gl.meshphysical_vert,fragmentShader:Gl.meshphysical_frag},points:{uniforms:Va.merge([Vl.points,Vl.fog]),vertexShader:Gl.points_vert,fragmentShader:Gl.points_frag},dashed:{uniforms:Va.merge([Vl.common,Vl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gl.linedashed_vert,fragmentShader:Gl.linedashed_frag},depth:{uniforms:Va.merge([Vl.common,Vl.displacementmap]),vertexShader:Gl.depth_vert,fragmentShader:Gl.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:Gl.normal_vert,fragmentShader:Gl.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gl.cube_vert,fragmentShader:Gl.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Gl.equirect_vert,fragmentShader:Gl.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new c}},vertexShader:Gl.distanceRGBA_vert,fragmentShader:Gl.distanceRGBA_frag}};Wl.physical={uniforms:Va.merge([Wl.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Gl.meshphysical_vert,fragmentShader:Gl.meshphysical_frag},q.prototype={constructor:q,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new n;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new n;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new n;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var r=t||new n;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var r=t||new n;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new n;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Z.prototype={constructor:Z,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):"overdraw"===t?this[t]=Number(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Di&&(r.blending=this.blending),this.shading!==Ri&&(r.shading=this.shading),this.side!==Ti&&(r.side=this.side),this.vertexColors!==Pi&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),r.skinning=this.skinning,r.morphTargets=this.morphTargets,n){var i=t(e.textures),o=t(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Z.prototype,t.prototype);var Xl=0;J.prototype=Object.create(Z.prototype),J.prototype.constructor=J,J.prototype.isShaderMaterial=!0,J.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Va.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},J.prototype.toJSON=function(e){var t=Z.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Q.prototype=Object.create(Z.prototype),Q.prototype.constructor=Q,Q.prototype.isMeshDepthMaterial=!0,Q.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},ee.prototype={constructor:ee,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=+(1/0),n=+(1/0),r=+(1/0),i=-(1/0),o=-(1/0),a=-(1/0),s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],h=e[s+2];c<t&&(t=c),u<n&&(n=u),h<r&&(r=h),c>i&&(i=c),u>o&&(o=u),h>a&&(a=h)}this.min.set(t,n,r),this.max.set(i,o,a)},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new c;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new c;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var r=t.geometry;if(void 0!==r)if(r&&r.isGeometry)for(var i=r.vertices,o=0,a=i.length;o<a;o++)e.copy(i[o]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e);else if(r&&r.isBufferGeometry){var s=r.attributes.position;if(void 0!==s){var l,c,u;s&&s.isInterleavedBufferAttribute?(l=s.data.array,c=s.offset,u=s.data.stride):(l=s.array,c=0,u=3);for(var o=c,a=l.length;o<a;o+=u)e.fromArray(l,o),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new c;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new c;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new c;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e;return function(t){return void 0===e&&(e=new c),this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new c;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new c;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new c;return function(t){var n=t||new te;return this.getCenter(n.center),n.radius=.5*this.getSize(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new c,new c,new c,new c,new c,new c,new c,new c];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},te.prototype={constructor:te,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new ee;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new c;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new ee;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},ne.prototype={constructor:ne,isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,l){var c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new c),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,o=n;i<r;i+=3,o+=3)e.fromArray(t,o),e.applyMatrix3(this),e.toArray(t,o);return t}}(),applyToBuffer:function(){var e;return function(t,n,r){void 0===e&&(e=new c),void 0===n&&(n=0),void 0===r&&(r=t.length/t.itemSize);for(var i=0,o=n;i<r;i++,o++)e.x=t.getX(o),e.y=t.getY(o),e.z=t.getZ(o),e.applyMatrix3(this),t.setXYZ(o,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],f=d*l-c*h,p=c*u-d*s,m=h*s-l*u,v=i*f+o*p+a*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=f*y,r[1]=(a*h-d*o)*y,r[2]=(c*o-a*l)*y,r[3]=p*y,r[4]=(d*i-a*u)*y,r[5]=(a*s-c*i)*y,r[6]=m*y,r[7]=(o*u-h*i)*y,r[8]=(l*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(e,t)},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},re.prototype={constructor:re,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new c,t=new c;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e),r=t||new c;return r.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var e=new c;return function(t,n){var r=n||new c,i=t.delta(e),o=this.normal.dot(i);if(0!==o){var a=-(t.start.dot(this.normal)+this.constant)/o;if(!(a<0||a>1))return r.copy(i).multiplyScalar(a).add(t.start)}else if(0===this.distanceToPoint(t.start))return r.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new c;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new c,t=new ne;return function(n,r){var i=this.coplanarPoint(e).applyMatrix4(n),o=r||t.getNormalMatrix(n),a=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(a),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},ie.prototype={constructor:ie,set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this;
},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,u-s,p-h,y-m).normalize(),t[1].setComponents(a+r,u+s,p+h,y+m).normalize(),t[2].setComponents(a+i,u+l,p+d,y+v).normalize(),t[3].setComponents(a-i,u-l,p-d,y-v).normalize(),t[4].setComponents(a-o,u-c,p-f,y-g).normalize(),t[5].setComponents(a+o,u+c,p+f,y+g).normalize(),this},intersectsObject:function(){var e=new te;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new te;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){var o=t[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var e=new c,t=new c;return function(n){for(var r=this.planes,i=0;i<6;i++){var o=r[i];e.x=o.normal.x>0?n.min.x:n.max.x,t.x=o.normal.x>0?n.max.x:n.min.x,e.y=o.normal.y>0?n.min.y:n.max.y,t.y=o.normal.y>0?n.max.y:n.min.y,e.z=o.normal.z>0?n.min.z:n.max.z,t.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},ae.prototype={constructor:ae,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new c;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new c;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new c;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new c;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new c,t=new c,n=new c;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,l,c,u,h=.5*r.distanceTo(i),d=-this.direction.dot(t),f=n.dot(this.direction),p=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(s=d*p-f,l=d*f-p,u=h*v,s>=0)if(l>=-u)if(l<=u){var g=1/v;s*=g,l*=g,c=s*(s+d*l+2*f)+l*(d*s+l+2*p)+m}else l=h,s=Math.max(0,-(d*l+f)),c=-s*s+l*(l+2*p)+m;else l=-h,s=Math.max(0,-(d*l+f)),c=-s*s+l*(l+2*p)+m;else l<=-u?(s=Math.max(0,-(-d*h+f)),l=s>0?-h:Math.min(Math.max(-h,-p),h),c=-s*s+l*(l+2*p)+m):l<=u?(s=0,l=Math.min(Math.max(-h,-p),h),c=l*(l+2*p)+m):(s=Math.max(0,-(d*h+f)),l=s>0?h:Math.min(Math.max(-h,-p),h),c=-s*s+l*(l+2*p)+m);else l=d>0?-h:h,s=Math.max(0,-(d*l+f)),c=-s*s+l*(l+2*p)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(l).add(e),c}}(),intersectSphere:function(){var e=new c;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,l=r+a;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new c;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new c,t=new c,n=new c,r=new c;return function(i,o,a,s,l){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var c,u=this.direction.dot(r);if(u>0){if(s)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}e.subVectors(this.origin,i);var h=c*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=c*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>u)return null;var f=-c*e.dot(r);return f<0?null:this.at(f/u,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},se.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],se.DefaultOrder="XYZ",se.prototype={constructor:se,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Ua.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],c=i[5],u=i[9],h=i[2],d=i[6],f=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,n,r){return void 0===e&&(e=new u),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new l;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new c(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},le.prototype={constructor:le,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!==(this.mask&e.mask)}},ce.DefaultUp=new c(0,1,0),ce.DefaultMatrixAutoUpdate=!0,Object.assign(ce.prototype,t.prototype,{isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new l;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new c(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new c(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new c(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new c;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new c(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new c(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new c(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new u;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new u;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var n=this.children.indexOf(e);n!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){var t=e||new c;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new c,t=new c;return function(n){var r=n||new l;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldRotation:function(){var e=new l;return function(t){var n=t||new se;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new c,t=new l;return function(n){var r=n||new c;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new l;return function(t){var n=t||new c;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&e!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e||""===e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(n){var a=t(e.geometries),s=t(e.materials),l=t(e.textures),c=t(e.images);a.length>0&&(r.geometries=a),s.length>0&&(r.materials=s),l.length>0&&(r.textures=l),c.length>0&&(r.images=c)}return r.object=i,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});var ql=0;he.prototype={constructor:he,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new c;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new c;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new c;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new c,t=new c;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e),a=o/i;return r&&(a=Ua.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),i=n||new c;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},de.normal=function(){var e=new c;return function(t,n,r,i){var o=i||new c;o.subVectors(r,n),e.subVectors(t,n),o.cross(e);var a=o.lengthSq();return a>0?o.multiplyScalar(1/Math.sqrt(a)):o.set(0,0,0)}}(),de.barycoordFromPoint=function(){var e=new c,t=new c,n=new c;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var l=e.dot(e),u=e.dot(t),h=e.dot(n),d=t.dot(t),f=t.dot(n),p=l*d-u*u,m=s||new c;if(0===p)return m.set(-2,-1,-1);var v=1/p,g=(d*h-u*f)*v,y=(l*f-u*h)*v;return m.set(1-g-y,y,g)}}(),de.containsPoint=function(){var e=new c;return function(t,n,r,i){var o=de.barycoordFromPoint(t,n,r,i,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),de.prototype={constructor:de,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new c,t=new c;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new c;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return de.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new re;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return de.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return de.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,n,r;return function(i,o){void 0===e&&(e=new re,t=[new he,new he,new he],n=new c,r=new c);var a=o||new c,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,n),this.containsPoint(n)===!0)a.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(n,!0,r);var u=n.distanceToSquared(r);u<s&&(s=u,a.copy(r))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},fe.prototype={constructor:fe,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},pe.prototype=Object.create(Z.prototype),pe.prototype.constructor=pe,pe.prototype.isMeshBasicMaterial=!0,pe.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},me.prototype={constructor:me,isBufferAttribute:!0,set needsUpdate(e){e===!0&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new X),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];t[n++]=o.a,t[n++]=o.b,t[n++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,i=0,o=e.length;i<o;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new n),t[r++]=a.x,t[r++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new c),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new o),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},Object.assign(Te.prototype,t.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=(new ne).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(t).normalize();for(var a=0,s=o.vertexNormals.length;a<s;a++)o.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new u),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new u),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new u),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new u),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new u),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new ce),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,n,i){var o=void 0!==s?[d[e].clone(),d[t].clone(),d[n].clone()]:[],a=void 0!==l?[r.colors[e].clone(),r.colors[t].clone(),r.colors[n].clone()]:[],c=new fe(e,t,n,o,a,i);r.faces.push(c),void 0!==u&&r.faceVertexUvs[0].push([f[e].clone(),f[t].clone(),f[n].clone()]),void 0!==h&&r.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[n].clone()])}var r=this,i=null!==e.index?e.index.array:void 0,o=e.attributes,a=o.position.array,s=void 0!==o.normal?o.normal.array:void 0,l=void 0!==o.color?o.color.array:void 0,u=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var d=[],f=[],p=[],m=0,v=0;m<a.length;m+=3,v+=2)r.vertices.push(new c(a[m],a[m+1],a[m+2])),void 0!==s&&d.push(new c(s[m],s[m+1],s[m+2])),void 0!==l&&r.colors.push(new X(l[m],l[m+1],l[m+2])),void 0!==u&&f.push(new n(u[v],u[v+1])),void 0!==h&&p.push(new n(h[v],h[v+1]));if(void 0!==i){var g=e.groups;if(g.length>0)for(var m=0;m<g.length;m++)for(var y=g[m],b=y.start,x=y.count,v=b,w=b+x;v<w;v+=3)t(i[v],i[v+1],i[v+2],y.materialIndex);else for(var m=0;m<i.length;m+=3)t(i[m],i[m+1],i[m+2])}else for(var m=0;m<a.length/3;m+=3)t(m,m+1,m+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new u;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new c,t=new c,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,r,i,o,a;for(a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new c;if(e){var s,l,u,h=new c,d=new c;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c],h.subVectors(u,l),d.subVectors(s,l),h.cross(d),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o=this.faces[r],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var f=o.vertexNormals;3===f.length?(f[0].copy(a[o.a]),f[1].copy(a[o.b]),f[2].copy(a[o.c])):(f[0]=a[o.a].clone(),f[1]=a[o.b].clone(),f[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Te;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a,s,l=this.morphNormals[e].faceNormals,u=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)a=new c,s={a:new c,b:new c,c:new c},l.push(a),u.push(s)}var h=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var a,s;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],a=h.faceNormals[n],s=h.vertexNormals[n],a.copy(i.normal),s.a.copy(i.vertexNormals[0]),s.b.copy(i.vertexNormals[1]),s.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ee),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new te),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if((e&&e.isGeometry)===!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new ne).getNormalMatrix(t));for(var f=0,p=a.length;f<p;f++){var m=a[f],v=m.clone();void 0!==t&&v.applyMatrix4(t),o.push(v)}for(var f=0,p=d.length;f<p;f++)h.push(d[f].clone());for(f=0,p=l.length;f<p;f++){var g,y,b,x=l[f],w=x.vertexNormals,_=x.vertexColors;g=new fe(x.a+i,x.b+i,x.c+i),g.normal.copy(x.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var M=0,S=w.length;M<S;M++)y=w[M].clone(),void 0!==r&&y.applyMatrix3(r).normalize(),g.vertexNormals.push(y);g.color.copy(x.color);for(var M=0,S=_.length;M<S;M++)b=_[M],g.vertexColors.push(b.clone());g.materialIndex=x.materialIndex+n,s.push(g)}for(f=0,p=u.length;f<p;f++){var E=u[f],T=[];if(void 0!==E){for(var M=0,S=E.length;M<S;M++)T.push(E[M].clone());c.push(T)}}},mergeMesh:function(e){return(e&&e.isMesh)===!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),void this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,n,r,i,o,a,s,l={},c=[],u=[],h=4,d=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d),void 0===l[t]?(l[t]=n,c.push(this.vertices[n]),u[n]=c.length-1):u[n]=u[l[t]];var f=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=u[i.a],i.b=u[i.b],i.c=u[i.c],o=[i.a,i.b,i.c];for(var p=-1,m=0;m<3;m++)if(o[m]===o[(m+1)%3]){p=m,f.push(n);break}}for(n=f.length-1;n>=0;n--){var v=f[n];for(this.faces.splice(v,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(v,1)}var g=this.vertices.length-c.length;return this.vertices=c,g},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,r=0;r<n;r++)t[r]._id=r;t.sort(e);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(i=[]),s&&s.length===n&&(o=[]);for(var r=0;r<n;r++){var l=t[r]._id;i&&i.push(a[l]),o&&o.push(s[l])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/3,h.push(e.x,e.y,e.z),d[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=f.length,f.push(e.getHex()),p[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=m.length/2,m.push(e.x,e.y),v[t])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],l=0;l<this.vertices.length;l++){var c=this.vertices[l];s.push(c.x,c.y,c.z)}for(var u=[],h=[],d={},f=[],p={},m=[],v={},l=0;l<this.faces.length;l++){var g=this.faces[l],y=!0,b=!1,x=void 0!==this.faceVertexUvs[0][l],w=g.normal.length()>0,_=g.vertexNormals.length>0,M=1!==g.color.r||1!==g.color.g||1!==g.color.b,S=g.vertexColors.length>0,E=0;if(E=e(E,0,0),E=e(E,1,y),E=e(E,2,b),E=e(E,3,x),E=e(E,4,w),E=e(E,5,_),E=e(E,6,M),E=e(E,7,S),u.push(E),u.push(g.a,g.b,g.c),u.push(g.materialIndex),x){var T=this.faceVertexUvs[0][l];u.push(r(T[0]),r(T[1]),r(T[2]))}if(w&&u.push(t(g.normal)),_){var C=g.vertexNormals;u.push(t(C[0]),t(C[1]),t(C[2]))}if(M&&u.push(n(g.color)),S){var A=g.vertexColors;u.push(n(A[0]),n(A[1]),n(A[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,f.length>0&&(i.data.colors=f),m.length>0&&(i.data.uvs=[m]),i.data.faces=u,i},clone:function(){return(new Te).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());for(var i=e.colors,n=0,r=i.length;n<r;n++)this.colors.push(i[n].clone());
for(var o=e.faces,n=0,r=o.length;n<r;n++)this.faces.push(o[n].clone());for(var n=0,r=e.faceVertexUvs.length;n<r;n++){var a=e.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var s=0,l=a.length;s<l;s++){for(var c=a[s],u=[],h=0,d=c.length;h<d;h++){var f=c[h];u.push(f.clone())}this.faceVertexUvs[n].push(u)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Yl=0;Object.assign(Ae.prototype,t.prototype,{computeBoundingBox:Te.prototype.computeBoundingBox,computeBoundingSphere:Te.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(e){for(var t,n,r=[],i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:n})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,i=e.vertices,o=e.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,l=e.morphTargets,c=l.length;if(c>0){t=[];for(var u=0;u<c;u++)t[u]=[];this.morphTargets.position=t}var h,d=e.morphNormals,f=d.length;if(f>0){h=[];for(var u=0;u<f;u++)h[u]=[];this.morphTargets.normal=h}for(var p=e.skinIndices,m=e.skinWeights,v=p.length===i.length,g=m.length===i.length,u=0;u<r.length;u++){var y=r[u];this.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var x=y.normal;this.normals.push(x,x,x)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=y.color;this.colors.push(_,_,_)}if(a===!0){var M=o[0][u];void 0!==M?this.uvs.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new n,new n,new n))}if(s===!0){var M=o[1][u];void 0!==M?this.uvs2.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new n,new n,new n))}for(var S=0;S<c;S++){var E=l[S].vertices;t[S].push(E[y.a],E[y.b],E[y.c])}for(var S=0;S<f;S++){var T=d[S].vertexNormals[u];h[S].push(T.a,T.b,T.c)}v&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(Le.prototype,t.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t){return(t&&t.isBufferAttribute)===!1&&(t&&t.isInterleavedBufferAttribute)===!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new me(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new ne).getNormalMatrix(e);r.applyToVector3Array(n.array),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new u),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new u),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new u),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new u),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new u),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new ce),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e&&e.isPoints||e&&e.isLine){var n=new Me(3*t.vertices.length,3),r=new Me(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Me(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e&&e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e&&e.isMesh){var n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return t.verticesNeedUpdate===!0&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ae).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new me(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new me(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new me(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new me(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new me(o,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var a=e.vertices.length>65535?Uint32Array:Uint16Array,s=new a(3*e.indices.length);this.setIndex(new me(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var l in e.morphTargets){for(var c=[],u=e.morphTargets[l],h=0,d=u.length;h<d;h++){var f=u[h],p=new Me(3*f.length,3);c.push(p.copyVector3sArray(f))}this.morphAttributes[l]=c}if(e.skinIndices.length>0){var m=new Me(4*e.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new Me(4*e.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ee);var e=this.attributes.position.array;void 0!==e?this.boundingBox.setFromArray(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new ee,t=new c;return function(){null===this.boundingSphere&&(this.boundingSphere=new te);var n=this.attributes.position;if(n){var r=n.array,i=this.boundingSphere.center;e.setFromArray(r),e.getCenter(i);for(var o=0,a=0,s=r.length;a<s;a+=3)t.fromArray(r,a),o=Math.max(o,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new me(new Float32Array(r.length),3));else for(var i=t.normal.array,o=0,a=i.length;o<a;o++)i[o]=0;var s,l,u,h=t.normal.array,d=new c,f=new c,p=new c,m=new c,v=new c;if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var y=0,b=n.length;y<b;++y)for(var x=n[y],w=x.start,_=x.count,o=w,a=w+_;o<a;o+=3)s=3*g[o+0],l=3*g[o+1],u=3*g[o+2],d.fromArray(r,s),f.fromArray(r,l),p.fromArray(r,u),m.subVectors(p,f),v.subVectors(d,f),m.cross(v),h[s]+=m.x,h[s+1]+=m.y,h[s+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z,h[u]+=m.x,h[u+1]+=m.y,h[u+2]+=m.z}else for(var o=0,a=r.length;o<a;o+=9)d.fromArray(r,o),f.fromArray(r,o+3),p.fromArray(r,o+6),m.subVectors(p,f),v.subVectors(d,f),m.cross(v),h[o]=m.x,h[o+1]=m.y,h[o+2]=m.z,h[o+3]=m.x,h[o+4]=m.y,h[o+5]=m.z,h[o+6]=m.x,h[o+7]=m.y,h[o+8]=m.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if((e&&e.isBufferGeometry)===!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r],o=i.array,a=e.attributes[r],s=a.array,l=a.itemSize,c=0,u=l*t;c<s.length;c++,u++)o[u]=s[c];return this},normalizeNormals:function(){for(var e,t,n,r,i=this.attributes.normal.array,o=0,a=i.length;o<a;o+=3)e=i[o],t=i[o+1],n=i[o+2],r=1/Math.sqrt(e*e+t*t+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Le,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),l=0,c=0,u=0,h=t.length;u<h;u++){l=t[u]*a;for(var d=0;d<a;d++)s[c++]=o[l++]}e.addAttribute(r,new me(s,a))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n],i=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Le).copy(this)},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=e.groups,a=0,s=o.length;a<s;a++){var l=o[a];this.addGroup(l.start,l.count,l.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Le.MaxIndex=65535,Re.prototype=Object.assign(Object.create(ce.prototype),{constructor:Re,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ce.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,n=e.length;t<n;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){function e(e,t,n,r,i,o,a){return de.barycoordFromPoint(e,t,n,r,y),i.multiplyScalar(y.x),o.multiplyScalar(y.y),a.multiplyScalar(y.z),i.add(o).add(a),i.clone()}function t(e,t,n,r,i,o,a){var s,l=e.material;if(s=l.side===Ci?n.intersectTriangle(o,i,r,!0,a):n.intersectTriangle(r,i,o,l.side!==Ai,a),null===s)return null;x.copy(a),x.applyMatrix4(e.matrixWorld);var c=t.ray.origin.distanceTo(x);return c<t.near||c>t.far?null:{distance:c,point:x.clone(),object:e}}function r(n,r,i,o,a,c,u,d){s.fromArray(o,3*c),l.fromArray(o,3*u),h.fromArray(o,3*d);var f=t(n,r,i,s,l,h,b);return f&&(a&&(m.fromArray(a,2*c),v.fromArray(a,2*u),g.fromArray(a,2*d),f.uv=e(b,s,l,h,m,v,g)),f.face=new fe(c,u,d,de.normal(s,l,h)),f.faceIndex=c),f}var i=new u,o=new ae,a=new te,s=new c,l=new c,h=new c,d=new c,f=new c,p=new c,m=new n,v=new n,g=new n,y=new c,b=new c,x=new c;return function(n,c){var u=this.geometry,y=this.material,x=this.matrixWorld;if(void 0!==y&&(null===u.boundingSphere&&u.computeBoundingSphere(),a.copy(u.boundingSphere),a.applyMatrix4(x),n.ray.intersectsSphere(a)!==!1&&(i.getInverse(x),o.copy(n.ray).applyMatrix4(i),null===u.boundingBox||o.intersectsBox(u.boundingBox)!==!1))){var w,_;if(u&&u.isBufferGeometry){var M,S,E,T=u.index,C=u.attributes,A=C.position.array;if(void 0!==C.uv&&(w=C.uv.array),null!==T)for(var L=T.array,R=0,P=L.length;R<P;R+=3)M=L[R],S=L[R+1],E=L[R+2],_=r(this,n,o,A,w,M,S,E),_&&(_.faceIndex=Math.floor(R/3),c.push(_));else for(var R=0,P=A.length;R<P;R+=9)M=R/3,S=M+1,E=M+2,_=r(this,n,o,A,w,M,S,E),_&&(_.index=M,c.push(_))}else if(u&&u.isGeometry){var k,O,N,D=y&&y.isMultiMaterial,I=D===!0?y.materials:null,U=u.vertices,F=u.faces,B=u.faceVertexUvs[0];B.length>0&&(w=B);for(var z=0,j=F.length;z<j;z++){var G=F[z],H=D===!0?I[G.materialIndex]:y;if(void 0!==H){if(k=U[G.a],O=U[G.b],N=U[G.c],H.morphTargets===!0){var V=u.morphTargets,W=this.morphTargetInfluences;s.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(var X=0,q=V.length;X<q;X++){var Y=W[X];if(0!==Y){var $=V[X].vertices;s.addScaledVector(d.subVectors($[G.a],k),Y),l.addScaledVector(f.subVectors($[G.b],O),Y),h.addScaledVector(p.subVectors($[G.c],N),Y)}}s.add(k),l.add(O),h.add(N),k=s,O=l,N=h}if(_=t(this,n,o,k,O,N,b)){if(w){var Z=w[z];m.copy(Z[0]),v.copy(Z[1]),g.copy(Z[2]),_.uv=e(b,k,O,N,m,v,g)}_.face=G,_.faceIndex=z,c.push(_)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Pe.prototype=Object.create(Le.prototype),Pe.prototype.constructor=Pe,ke.prototype=Object.create(Le.prototype),ke.prototype.constructor=ke,Oe.prototype=Object.create(ce.prototype),Oe.prototype.constructor=Oe,Oe.prototype.isCamera=!0,Oe.prototype.getWorldDirection=function(){var e=new l;return function(t){var n=t||new c;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),Oe.prototype.lookAt=function(){var e=new u;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),Oe.prototype.clone=function(){return(new this.constructor).copy(this)},Oe.prototype.copy=function(e){return ce.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},Ne.prototype=Object.assign(Object.create(Oe.prototype),{constructor:Ne,isPerspectiveCamera:!0,copy:function(e){return Oe.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ua.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ua.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ua.RAD2DEG*Math.atan(Math.tan(.5*Ua.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ua.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==o){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makeFrustum(i,i+r,t-n,t,e,this.far)},toJSON:function(e){var t=ce.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),De.prototype=Object.assign(Object.create(Oe.prototype),{constructor:De,isOrthographicCamera:!0,copy:function(e){return Oe.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=u*(this.view.offsetX/l),o=i+u*(this.view.width/l),a-=h*(this.view.offsetY/c),s=a-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=ce.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var $l=0;ct.prototype.isFogExp2=!0,ct.prototype.clone=function(){return new ct(this.color.getHex(),this.density)},ct.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ut.prototype.isFog=!0,ut.prototype.clone=function(){return new ut(this.color.getHex(),this.near,this.far)},ut.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ht.prototype=Object.create(ce.prototype),ht.prototype.constructor=ht,ht.prototype.copy=function(e,t){return ce.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},ht.prototype.toJSON=function(e){var t=ce.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dt.prototype=Object.assign(Object.create(ce.prototype),{constructor:dt,isLensFlare:!0,copy:function(e){ce.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,i,o){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=new X(16777215)),void 0===r&&(r=Di),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:i,blending:r})},updateLensFlares:function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<n;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),ft.prototype=Object.create(Z.prototype),ft.prototype.constructor=ft,ft.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},pt.prototype=Object.assign(Object.create(ce.prototype),{constructor:pt,isSprite:!0,raycast:function(){var e=new c;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceSqToPoint(e),i=this.scale.x*this.scale.y/4;r>i||n.push({distance:Math.sqrt(r),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),mt.prototype=Object.assign(Object.create(ce.prototype),{constructor:mt,copy:function(e){ce.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new c;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new c,t=new c;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=ce.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),vt.prototype=Object.create(r.prototype),vt.prototype.constructor=vt,vt.prototype.isDataTexture=!0,Object.assign(gt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new u;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e,t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new u;return function(){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(r,this.boneInverses[t]),e.toArray(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new gt(this.bones,this.boneInverses,this.useVertexTexture)}}),yt.prototype=Object.assign(Object.create(ce.prototype),{constructor:yt,isBone:!0,copy:function(e){return ce.prototype.copy.call(this,e),this.skin=e.skin,this}}),bt.prototype=Object.assign(Object.create(Re.prototype),{constructor:bt,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var r=new o,i=this.geometry.attributes.skinWeight,e=0;e<i.count;e++){r.x=i.getX(e),r.y=i.getY(e),r.z=i.getZ(e),r.w=i.getW(e);var n=1/r.lengthManhattan();n!==1/0?r.multiplyScalar(n):r.set(1,0,0,0),i.setXYZW(e,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){Re.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),xt.prototype=Object.create(Z.prototype),xt.prototype.constructor=xt,xt.prototype.isLineBasicMaterial=!0,xt.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},wt.prototype=Object.assign(Object.create(ce.prototype),{constructor:wt,isLine:!0,raycast:function(){var e=new u,t=new ae,n=new te;return function(r,i){var o=r.linePrecision,a=o*o,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){e.getInverse(l),t.copy(r.ray).applyMatrix4(e);var u=new c,h=new c,d=new c,f=new c,p=this&&this.isLineSegments?2:1;if(s&&s.isBufferGeometry){var m=s.index,v=s.attributes,g=v.position.array;if(null!==m)for(var y=m.array,b=0,x=y.length-1;b<x;b+=p){var w=y[b],_=y[b+1];u.fromArray(g,3*w),h.fromArray(g,3*_);var M=t.distanceSqToSegment(u,h,f,d);if(!(M>a)){f.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(f);S<r.near||S>r.far||i.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,x=g.length/3-1;b<x;b+=p){u.fromArray(g,3*b),h.fromArray(g,3*b+3);var M=t.distanceSqToSegment(u,h,f,d);if(!(M>a)){f.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(f);S<r.near||S>r.far||i.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(s&&s.isGeometry)for(var E=s.vertices,T=E.length,b=0;b<T-1;b+=p){var M=t.distanceSqToSegment(E[b],E[b+1],f,d);if(!(M>a)){f.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(f);S<r.near||S>r.far||i.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_t.prototype=Object.assign(Object.create(wt.prototype),{constructor:_t,isLineSegments:!0}),Mt.prototype=Object.create(Z.prototype),Mt.prototype.constructor=Mt,Mt.prototype.isPointsMaterial=!0,Mt.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},St.prototype=Object.assign(Object.create(ce.prototype),{constructor:St,isPoints:!0,raycast:function(){var e=new u,t=new ae,n=new te;return function(r,i){function o(e,n){var o=t.distanceSqToPoint(e);if(o<d){var s=t.closestPointToPoint(e);s.applyMatrix4(l);var c=r.ray.origin.distanceTo(s);if(c<r.near||c>r.far)return;i.push({distance:c,distanceToRay:Math.sqrt(o),point:s.clone(),index:n,face:null,object:a})}}var a=this,s=this.geometry,l=this.matrixWorld,u=r.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){e.getInverse(l),t.copy(r.ray).applyMatrix4(e);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,f=new c;if(s&&s.isBufferGeometry){var p=s.index,m=s.attributes,v=m.position.array;if(null!==p)for(var g=p.array,y=0,b=g.length;y<b;y++){var x=g[y];f.fromArray(v,3*x),o(f,x)}else for(var y=0,w=v.length/3;y<w;y++)f.fromArray(v,3*y),o(f,y)}else for(var _=s.vertices,y=0,w=_.length;y<w;y++)o(_[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Et.prototype=Object.assign(Object.create(ce.prototype),{constructor:Et}),Tt.prototype=Object.create(r.prototype),Tt.prototype.constructor=Tt,Ct.prototype=Object.create(r.prototype),Ct.prototype.constructor=Ct,Ct.prototype.isCompressedTexture=!0,At.prototype=Object.create(r.prototype),At.prototype.constructor=At,Lt.prototype=Object.create(r.prototype),Lt.prototype.constructor=Lt,Lt.prototype.isDepthTexture=!0,Rt.prototype=Object.create(Le.prototype),Rt.prototype.constructor=Rt,Pt.prototype=Object.create(Le.prototype),Pt.prototype.constructor=Pt,kt.prototype=Object.create(Te.prototype),kt.prototype.constructor=kt,Ot.prototype=Object.create(Le.prototype),Ot.prototype.constructor=Ot,Nt.prototype=Object.create(Ot.prototype),Nt.prototype.constructor=Nt,Dt.prototype=Object.create(Te.prototype),Dt.prototype.constructor=Dt,It.prototype=Object.create(Ot.prototype),It.prototype.constructor=It,Ut.prototype=Object.create(Te.prototype),Ut.prototype.constructor=Ut,Ft.prototype=Object.create(Ot.prototype),Ft.prototype.constructor=Ft,Bt.prototype=Object.create(Te.prototype),Bt.prototype.constructor=Bt,zt.prototype=Object.create(Ot.prototype),zt.prototype.constructor=zt,jt.prototype=Object.create(Te.prototype),jt.prototype.constructor=jt,Gt.prototype=Object.create(Te.prototype),Gt.prototype.constructor=Gt,Ht.prototype=Object.create(Le.prototype),Ht.prototype.constructor=Ht,Vt.prototype=Object.create(Te.prototype),Vt.prototype.constructor=Vt,Wt.prototype=Object.create(Le.prototype),Wt.prototype.constructor=Wt,Xt.prototype=Object.create(Te.prototype),Xt.prototype.constructor=Xt,qt.prototype=Object.create(Le.prototype),qt.prototype.constructor=qt,Yt.prototype=Object.create(Te.prototype),Yt.prototype.constructor=Yt;var Zl={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},triangulate:function(){function e(e,t,n,r,i,o){var a,s,l,c,u,h,d,f,p;if(s=e[o[t]].x,l=e[o[t]].y,c=e[o[n]].x,u=e[o[n]].y,h=e[o[r]].x,d=e[o[r]].y,(c-s)*(d-l)-(u-l)*(h-s)<=0)return!1;var m,v,g,y,b,x,w,_,M,S,E,T,C,A,L;for(m=h-c,v=d-u,g=s-h,y=l-d,b=c-s,x=u-l,a=0;a<i;a++)if(f=e[o[a]].x,p=e[o[a]].y,!(f===s&&p===l||f===c&&p===u||f===h&&p===d)&&(w=f-s,_=p-l,M=f-c,S=p-u,E=f-h,T=p-d,L=m*S-v*M,C=b*_-x*w,A=g*T-y*E,L>=-Number.EPSILON&&A>=-Number.EPSILON&&C>=-Number.EPSILON))return!1;return!0}return function(t,n){var r=t.length;if(r<3)return null;var i,o,a,s=[],l=[],c=[];if(Zl.area(t)>0)for(o=0;o<r;o++)l[o]=o;else for(o=0;o<r;o++)l[o]=r-1-o;var u=r,h=2*u;for(o=u-1;u>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?c:s;if(i=o,u<=i&&(i=0),o=i+1,u<=o&&(o=0),a=o+1,u<=a&&(a=0),e(t,i,o,a,u,l)){var d,f,p,m,v;for(d=l[i],f=l[o],p=l[a],s.push([t[d],t[f],t[p]]),c.push([l[i],l[o],l[a]]),m=o,v=o+1;v<u;m++,v++)l[m]=l[v];u--,h=2*u}}return n?c:s}}(),triangulateShape:function(e,t){function n(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function r(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function i(e,t,n,i,o){var a=t.x-e.x,s=t.y-e.y,l=i.x-n.x,c=i.y-n.y,u=e.x-n.x,h=e.y-n.y,d=s*l-a*c,f=s*u-a*h;
if(Math.abs(d)>Number.EPSILON){var p;if(d>0){if(f<0||f>d)return[];if(p=c*u-l*h,p<0||p>d)return[]}else{if(f>0||f<d)return[];if(p=c*u-l*h,p>0||p<d)return[]}if(0===p)return!o||0!==f&&f!==d?[e]:[];if(p===d)return!o||0!==f&&f!==d?[t]:[];if(0===f)return[n];if(f===d)return[i];var m=p/d;return[{x:e.x+m*a,y:e.y+m*s}]}if(0!==f||c*u!==l*h)return[];var v=0===a&&0===s,g=0===l&&0===c;if(v&&g)return e.x!==n.x||e.y!==n.y?[]:[e];if(v)return r(n,i,e)?[e]:[];if(g)return r(e,t,n)?[n]:[];var y,b,x,w,_,M,S,E;return 0!==a?(e.x<t.x?(y=e,x=e.x,b=t,w=t.x):(y=t,x=t.x,b=e,w=e.x),n.x<i.x?(_=n,S=n.x,M=i,E=i.x):(_=i,S=i.x,M=n,E=n.x)):(e.y<t.y?(y=e,x=e.y,b=t,w=t.y):(y=t,x=t.y,b=e,w=e.y),n.y<i.y?(_=n,S=n.y,M=i,E=i.y):(_=i,S=i.y,M=n,E=n.y)),x<=S?w<S?[]:w===S?o?[]:[_]:w<=E?[_,b]:[_,M]:x>E?[]:x===E?o?[]:[y]:w<=E?[y,b]:[y,M]}function o(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,l=r.x-e.x,c=r.y-e.y,u=i*s-o*a,h=i*c-o*l;if(Math.abs(u)>Number.EPSILON){var d=l*s-c*a;return u>0?h>=0&&d>=0:h>=0||d>=0}return h>0}function a(e,t){function n(e,t){var n=y.length-1,r=e-1;r<0&&(r=n);var i=e+1;i>n&&(i=0);var a=o(y[e],y[r],y[i],s[t]);if(!a)return!1;var l=s.length-1,c=t-1;c<0&&(c=l);var u=t+1;return u>l&&(u=0),a=o(s[t],s[c],s[u],y[e]),!!a}function r(e,t){var n,r,o;for(n=0;n<y.length;n++)if(r=n+1,r%=y.length,o=i(e,t,y[n],y[r],!0),o.length>0)return!0;return!1}function a(e,n){var r,o,a,s,l;for(r=0;r<b.length;r++)for(o=t[b[r]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,l=i(e,n,o[a],o[s],!0),l.length>0)return!0;return!1}for(var s,l,c,u,h,d,f,p,m,v,g,y=e.concat(),b=[],x=[],w=0,_=t.length;w<_;w++)b.push(w);for(var M=0,S=2*b.length;b.length>0;){if(S--,S<0){console.log("Infinite Loop! Holes left:"+b.length+", Probably Hole outside Shape!");break}for(c=M;c<y.length;c++){u=y[c],l=-1;for(var w=0;w<b.length;w++)if(d=b[w],f=u.x+":"+u.y+":"+d,void 0===x[f]){s=t[d];for(var E=0;E<s.length;E++)if(h=s[E],n(c,E)&&!r(u,h)&&!a(u,h)){l=E,b.splice(w,1),p=y.slice(0,c+1),m=y.slice(c),v=s.slice(l),g=s.slice(0,l+1),y=p.concat(v).concat(g).concat(m),M=c;break}if(l>=0)break;x[f]=!0}if(l>=0)break}}return y}n(e),t.forEach(n);for(var s,l,c,u,h,d,f={},p=e.concat(),m=0,v=t.length;m<v;m++)Array.prototype.push.apply(p,t[m]);for(s=0,l=p.length;s<l;s++)h=p[s].x+":"+p[s].y,void 0!==f[h]&&console.warn("THREE.ShapeUtils: Duplicate point",h,s),f[h]=s;var g=a(e,t),y=Zl.triangulate(g,!1);for(s=0,l=y.length;s<l;s++)for(u=y[s],c=0;c<3;c++)h=u[c].x+":"+u[c].y,d=f[h],void 0!==d&&(u[c]=d);return y.concat()},isClockWise:function(e){return Zl.area(e)<0},b2:function(){function e(e,t){var n=1-e;return n*n*t}function t(e,t){return 2*(1-e)*e*t}function n(e,t){return e*e*t}return function(r,i,o,a){return e(r,i)+t(r,o)+n(r,a)}}(),b3:function(){function e(e,t){var n=1-e;return n*n*n*t}function t(e,t){var n=1-e;return 3*n*n*e*t}function n(e,t){var n=1-e;return 3*n*e*e*t}function r(e,t){return e*e*e*t}return function(i,o,a,s,l){return e(i,o)+t(i,a)+n(i,s)+r(i,l)}}()};$t.prototype=Object.create(Te.prototype),$t.prototype.constructor=$t,$t.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];this.addShape(i,t)}},$t.prototype.addShape=function(e,t){function r(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function i(e,t,r){var i,o,a=1,s=e.x-t.x,l=e.y-t.y,c=r.x-e.x,u=r.y-e.y,h=s*s+l*l,d=s*u-l*c;if(Math.abs(d)>Number.EPSILON){var f=Math.sqrt(h),p=Math.sqrt(c*c+u*u),m=t.x-l/f,v=t.y+s/f,g=r.x-u/p,y=r.y+c/p,b=((g-m)*u-(y-v)*c)/(s*u-l*c);i=m+s*b-e.x,o=v+l*b-e.y;var x=i*i+o*o;if(x<=2)return new n(i,o);a=Math.sqrt(x/2)}else{var w=!1;s>Number.EPSILON?c>Number.EPSILON&&(w=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(w=!0):Math.sign(l)===Math.sign(u)&&(w=!0),w?(i=-l,o=s,a=Math.sqrt(h)):(i=s,o=l,a=Math.sqrt(h/2))}return new n(i/a,o/a)}function o(){if(w){var e=0,t=V*e;for(q=0;q<W;q++)H=I[q],u(H[2]+t,H[1]+t,H[0]+t);for(e=M+2*x,t=V*e,q=0;q<W;q++)H=I[q],u(H[0]+t,H[1]+t,H[2]+t)}else{for(q=0;q<W;q++)H=I[q],u(H[2],H[1],H[0]);for(q=0;q<W;q++)H=I[q],u(H[0]+V*M,H[1]+V*M,H[2]+V*M)}}function a(){var e=0;for(s(U,e),e+=U.length,A=0,L=N.length;A<L;A++)C=N[A],s(C,e),e+=C.length}function s(e,t){var n,r;for(q=e.length;--q>=0;){n=q,r=q-1,r<0&&(r=e.length-1);var i=0,o=M+2*x;for(i=0;i<o;i++){var a=V*i,s=V*(i+1),l=t+n+a,c=t+r+a,u=t+r+s,d=t+n+s;h(l,c,u,d,e,i,o,n,r)}}}function l(e,t,n){R.vertices.push(new c(e,t,n))}function u(e,t,n){e+=P,t+=P,n+=P,R.faces.push(new fe(e,t,n,null,null,0));var r=T.generateTopUV(R,e,t,n);R.faceVertexUvs[0].push(r)}function h(e,t,n,r,i,o,a,s,l){e+=P,t+=P,n+=P,r+=P,R.faces.push(new fe(e,t,r,null,null,1)),R.faces.push(new fe(t,n,r,null,null,1));var c=T.generateSideWallUV(R,e,t,n,r);R.faceVertexUvs[0].push([c[0],c[1],c[3]]),R.faceVertexUvs[0].push([c[1],c[2],c[3]])}var d,f,p,m,v,g=void 0!==t.amount?t.amount:100,y=void 0!==t.bevelThickness?t.bevelThickness:6,b=void 0!==t.bevelSize?t.bevelSize:y-2,x=void 0!==t.bevelSegments?t.bevelSegments:3,w=void 0===t.bevelEnabled||t.bevelEnabled,_=void 0!==t.curveSegments?t.curveSegments:12,M=void 0!==t.steps?t.steps:1,S=t.extrudePath,E=!1,T=void 0!==t.UVGenerator?t.UVGenerator:$t.WorldUVGenerator;S&&(d=S.getSpacedPoints(M),E=!0,w=!1,f=void 0!==t.frames?t.frames:S.computeFrenetFrames(M,!1),p=new c,m=new c,v=new c),w||(x=0,y=0,b=0);var C,A,L,R=this,P=this.vertices.length,k=e.extractPoints(_),O=k.shape,N=k.holes,D=!Zl.isClockWise(O);if(D){for(O=O.reverse(),A=0,L=N.length;A<L;A++)C=N[A],Zl.isClockWise(C)&&(N[A]=C.reverse());D=!1}var I=Zl.triangulateShape(O,N),U=O;for(A=0,L=N.length;A<L;A++)C=N[A],O=O.concat(C);for(var F,B,z,j,G,H,V=O.length,W=I.length,X=[],q=0,Y=U.length,$=Y-1,Z=q+1;q<Y;q++,$++,Z++)$===Y&&($=0),Z===Y&&(Z=0),X[q]=i(U[q],U[$],U[Z]);var K,J=[],Q=X.concat();for(A=0,L=N.length;A<L;A++){for(C=N[A],K=[],q=0,Y=C.length,$=Y-1,Z=q+1;q<Y;q++,$++,Z++)$===Y&&($=0),Z===Y&&(Z=0),K[q]=i(C[q],C[$],C[Z]);J.push(K),Q=Q.concat(K)}for(F=0;F<x;F++){for(z=F/x,j=y*Math.cos(z*Math.PI/2),B=b*Math.sin(z*Math.PI/2),q=0,Y=U.length;q<Y;q++)G=r(U[q],X[q],B),l(G.x,G.y,-j);for(A=0,L=N.length;A<L;A++)for(C=N[A],K=J[A],q=0,Y=C.length;q<Y;q++)G=r(C[q],K[q],B),l(G.x,G.y,-j)}for(B=b,q=0;q<V;q++)G=w?r(O[q],Q[q],B):O[q],E?(m.copy(f.normals[0]).multiplyScalar(G.x),p.copy(f.binormals[0]).multiplyScalar(G.y),v.copy(d[0]).add(m).add(p),l(v.x,v.y,v.z)):l(G.x,G.y,0);var ee;for(ee=1;ee<=M;ee++)for(q=0;q<V;q++)G=w?r(O[q],Q[q],B):O[q],E?(m.copy(f.normals[ee]).multiplyScalar(G.x),p.copy(f.binormals[ee]).multiplyScalar(G.y),v.copy(d[ee]).add(m).add(p),l(v.x,v.y,v.z)):l(G.x,G.y,g/M*ee);for(F=x-1;F>=0;F--){for(z=F/x,j=y*Math.cos(z*Math.PI/2),B=b*Math.sin(z*Math.PI/2),q=0,Y=U.length;q<Y;q++)G=r(U[q],X[q],B),l(G.x,G.y,g+j);for(A=0,L=N.length;A<L;A++)for(C=N[A],K=J[A],q=0,Y=C.length;q<Y;q++)G=r(C[q],K[q],B),E?l(G.x,G.y+d[M-1].y,d[M-1].x+j):l(G.x,G.y,g+j)}o(),a()},$t.WorldUVGenerator={generateTopUV:function(e,t,r,i){var o=e.vertices,a=o[t],s=o[r],l=o[i];return[new n(a.x,a.y),new n(s.x,s.y),new n(l.x,l.y)]},generateSideWallUV:function(e,t,r,i,o){var a=e.vertices,s=a[t],l=a[r],c=a[i],u=a[o];return Math.abs(s.y-l.y)<.01?[new n(s.x,1-s.z),new n(l.x,1-l.z),new n(c.x,1-c.z),new n(u.x,1-u.z)]:[new n(s.y,1-s.z),new n(l.y,1-l.z),new n(c.y,1-c.z),new n(u.y,1-u.z)]}},Zt.prototype=Object.create($t.prototype),Zt.prototype.constructor=Zt,Kt.prototype=Object.create(Le.prototype),Kt.prototype.constructor=Kt,Jt.prototype=Object.create(Te.prototype),Jt.prototype.constructor=Jt,Qt.prototype=Object.create(Le.prototype),Qt.prototype.constructor=Qt,en.prototype=Object.create(Te.prototype),en.prototype.constructor=en,tn.prototype=Object.create(Te.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(Le.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(Te.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(Te.prototype),on.prototype.constructor=on,on.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;n<r;n++)this.addShape(e[n],t);return this},on.prototype.addShape=function(e,t){void 0===t&&(t={});var n,r,i,o=void 0!==t.curveSegments?t.curveSegments:12,a=t.material,s=void 0===t.UVGenerator?$t.WorldUVGenerator:t.UVGenerator,l=this.vertices.length,u=e.extractPoints(o),h=u.shape,d=u.holes,f=!Zl.isClockWise(h);if(f){for(h=h.reverse(),n=0,r=d.length;n<r;n++)i=d[n],Zl.isClockWise(i)&&(d[n]=i.reverse());f=!1}var p=Zl.triangulateShape(h,d);for(n=0,r=d.length;n<r;n++)i=d[n],h=h.concat(i);var m,v,g=h.length,y=p.length;for(n=0;n<g;n++)m=h[n],this.vertices.push(new c(m.x,m.y,0));for(n=0;n<y;n++){v=p[n];var b=v[0]+l,x=v[1]+l,w=v[2]+l;this.faces.push(new fe(b,x,w,null,null,a)),this.faceVertexUvs[0].push(s.generateTopUV(this,b,x,w))}},an.prototype=Object.create(Le.prototype),an.prototype.constructor=an,sn.prototype=Object.create(Le.prototype),sn.prototype.constructor=sn,ln.prototype=Object.create(Te.prototype),ln.prototype.constructor=ln,cn.prototype=Object.create(ln.prototype),cn.prototype.constructor=cn,un.prototype=Object.create(sn.prototype),un.prototype.constructor=un,hn.prototype=Object.create(Le.prototype),hn.prototype.constructor=hn,dn.prototype=Object.create(Te.prototype),dn.prototype.constructor=dn,fn.prototype=Object.create(Te.prototype),fn.prototype.constructor=fn;var Kl=Object.freeze({WireframeGeometry:Rt,ParametricGeometry:kt,ParametricBufferGeometry:Pt,TetrahedronGeometry:Dt,TetrahedronBufferGeometry:Nt,OctahedronGeometry:Ut,OctahedronBufferGeometry:It,IcosahedronGeometry:Bt,IcosahedronBufferGeometry:Ft,DodecahedronGeometry:jt,DodecahedronBufferGeometry:zt,PolyhedronGeometry:Gt,PolyhedronBufferGeometry:Ot,TubeGeometry:Vt,TubeBufferGeometry:Ht,TorusKnotGeometry:Xt,TorusKnotBufferGeometry:Wt,TorusGeometry:Yt,TorusBufferGeometry:qt,TextGeometry:Zt,SphereBufferGeometry:Kt,SphereGeometry:Jt,RingGeometry:en,RingBufferGeometry:Qt,PlaneBufferGeometry:ke,PlaneGeometry:tn,LatheGeometry:rn,LatheBufferGeometry:nn,ShapeGeometry:on,ExtrudeGeometry:$t,EdgesGeometry:an,ConeGeometry:cn,ConeBufferGeometry:un,CylinderGeometry:ln,CylinderBufferGeometry:sn,CircleBufferGeometry:hn,CircleGeometry:dn,BoxBufferGeometry:Pe,BoxGeometry:fn});pn.prototype=Object.create(J.prototype),pn.prototype.constructor=pn,pn.prototype.isShadowMaterial=!0,mn.prototype=Object.create(J.prototype),mn.prototype.constructor=mn,mn.prototype.isRawShaderMaterial=!0,vn.prototype={constructor:vn,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var o=n[r].toJSON(e);delete o.metadata,t.materials.push(o)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},gn.prototype=Object.create(Z.prototype),gn.prototype.constructor=gn,gn.prototype.isMeshStandardMaterial=!0,gn.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},yn.prototype=Object.create(gn.prototype),yn.prototype.constructor=yn,yn.prototype.isMeshPhysicalMaterial=!0,yn.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},bn.prototype=Object.create(Z.prototype),bn.prototype.constructor=bn,bn.prototype.isMeshPhongMaterial=!0,bn.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xn.prototype=Object.create(Z.prototype),xn.prototype.constructor=xn,xn.prototype.isMeshNormalMaterial=!0,xn.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},wn.prototype=Object.create(Z.prototype),wn.prototype.constructor=wn,wn.prototype.isMeshLambertMaterial=!0,wn.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_n.prototype=Object.create(Z.prototype),_n.prototype.constructor=_n,_n.prototype.isLineDashedMaterial=!0,_n.prototype.copy=function(e){return Z.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Jl=Object.freeze({ShadowMaterial:pn,SpriteMaterial:ft,RawShaderMaterial:mn,ShaderMaterial:J,PointsMaterial:Mt,MultiMaterial:vn,MeshPhysicalMaterial:yn,MeshStandardMaterial:gn,MeshPhongMaterial:bn,MeshNormalMaterial:xn,MeshLambertMaterial:wn,MeshDepthMaterial:Q,MeshBasicMaterial:pe,LineDashedMaterial:_n,LineBasicMaterial:xt,Material:Z}),Ql={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},ec=new Mn;Object.assign(Sn.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,o=Ql.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(a);if(s){var l=s[1],c=!!s[2],u=s[3];u=window.decodeURIComponent(u),c&&(u=window.atob(u));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":h=new ArrayBuffer(u.length);for(var f=new Uint8Array(h),p=0;p<u.length;p++)f[p]=u.charCodeAt(p);"blob"===d&&(h=new Blob([h],{type:l}));break;case"document":var m=new DOMParser;h=m.parseFromString(u,l);break;case"json":h=JSON.parse(u);break;default:h=u}window.setTimeout(function(){t&&t(h),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemError(e)},0)}}else{var v=new XMLHttpRequest;v.open("GET",e,!0),v.addEventListener("load",function(n){var o=n.target.response;Ql.add(e,o),200===this.status?(t&&t(o),i.manager.itemEnd(e)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),t&&t(o),i.manager.itemEnd(e)):(r&&r(n),i.manager.itemError(e))},!1),void 0!==n&&v.addEventListener("progress",function(e){n(e)},!1),v.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType("text/plain"),v.send(null)}return i.manager.itemStart(e),v},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this}}),Object.assign(En.prototype,{load:function(e,t,n,r){function i(i){l.load(e[i],function(e){var n=o._parser(e,!0);a[i]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(s.minFilter=Io),s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,r)}var o=this,a=[],s=new Ct;s.image=a;var l=new Sn(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,u=0,h=e.length;u<h;++u)i(u);else l.load(e,function(e){var n=o._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,i=0;i<r;i++){a[i]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[i].mipmaps.push(n.mipmaps[i*n.mipmapCount+l]),a[i].format=n.format,a[i].width=n.width,a[i].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Io),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,r);return s},setPath:function(e){return this.path=e,this}});var tc=Tn;Object.assign(Tn.prototype,{load:function(e,t,n,r){var i=this,o=new vt,a=new Sn(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ro,o.wrapT=void 0!==n.wrapT?n.wrapT:Ro,o.magFilter=void 0!==n.magFilter?n.magFilter:Io,o.minFilter=void 0!==n.minFilter?n.minFilter:Fo,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Io),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(Cn.prototype,{load:function(e,t,n,r){var i=this,o=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(o.onload=function(){o.onload=null,URL.revokeObjectURL(o.src),t&&t(o),i.manager.itemEnd(e)},o.onerror=r,0===e.indexOf("data:"))o.src=e;else{var a=new Sn;a.setPath(this.path),a.setResponseType("blob"),a.setWithCredentials(this.withCredentials),a.load(e,function(e){o.src=URL.createObjectURL(e)},n,r)}return i.manager.itemStart(e),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(An.prototype,{load:function(e,t,n,r){function i(n){a.load(e[n],function(e){o.images[n]=e,s++,6===s&&(o.needsUpdate=!0,t&&t(o))},void 0,r)}var o=new h,a=new Cn(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var s=0,l=0;l<e.length;++l)i(l);return o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ln.prototype,{load:function(e,t,n,i){var o=new r,a=new Cn(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setWithCredentials(this.withCredentials),a.setPath(this.path),a.load(e,function(n){var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);o.format=r?Qo:ea,o.image=n,o.needsUpdate=!0,void 0!==t&&t(o)},n,i),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this}}),Rn.prototype=Object.assign(Object.create(ce.prototype),{constructor:Rn,isLight:!0,copy:function(e){return ce.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ce.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Pn.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Pn,isHemisphereLight:!0,copy:function(e){return Rn.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(kn.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),On.prototype=Object.assign(Object.create(kn.prototype),{constructor:On,isSpotLightShadow:!0,update:function(e){var t=2*Ua.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,r=e.distance||500,i=this.camera;t===i.fov&&n===i.aspect&&r===i.far||(i.fov=t,i.aspect=n,i.far=r,i.updateProjectionMatrix())}}),Nn.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Nn,isSpotLight:!0,copy:function(e){return Rn.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Dn.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Dn,isPointLight:!0,copy:function(e){return Rn.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),In.prototype=Object.assign(Object.create(kn.prototype),{constructor:In}),Un.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Un,isDirectionalLight:!0,copy:function(e){return Rn.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Fn.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Fn,isAmbientLight:!0});var nc={arraySlice:function(e,t,n){return nc.isTypedArray(e)?new e.constructor(e.subarray(t,n)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,l=0;l!==t;++l)i[a++]=e[s+l];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a)){do a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++];while(void 0!==o)}else if(void 0!==a.toArray){do a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++];while(void 0!==o)}else do a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++];while(void 0!==o)}}};Bn.prototype={constructor:Bn,evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}{if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(e,t,n,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}},Object.assign(Bn.prototype,{beforeStart_:Bn.prototype.copySampleValue_,afterEnd_:Bn.prototype.copySampleValue_}),zn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:zn,DefaultSettings_:{endingStart:wa,endingEnd:wa},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case _a:i=e,a=2*t-n;break;case Ma:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case _a:o=e,s=2*n-t;break;case Ma:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,v=-h*m+2*h*p-h*f,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p,x=0;x!==a;++x)i[x]=v*o[c+x]+g*o[l+x]+y*o[s+x]+b*o[u+x];return i}}),jn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:jn,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c,h=0;h!==a;++h)i[h]=o[l+h]*u+o[s+h]*c;return i}}),Gn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Gn,interpolate_:function(e,t,n,r){return this.copySampleValue_(e-1)}});var rc;rc={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:ba,InterpolantFactoryMethodDiscrete:function(e){return new Gn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new jn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new zn(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case ya:t=this.InterpolantFactoryMethodDiscrete;break;case ba:t=this.InterpolantFactoryMethodLinear;break;case xa:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(n)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ya;case this.InterpolantFactoryMethodLinear:return ba;case this.InterpolantFactoryMethodSmooth:return xa}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;o!==-1&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=nc.arraySlice(n,i,o),this.values=nc.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("invalid value size in track",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("track is empty",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("out of order keys",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&nc.isTypedArray(r))for(var a=0,l=r.length;a!==l;++a){var c=r[a];if(isNaN(c)){console.error("value is not a valid number",this,a,c),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===xa,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a],c=e[a+1];if(l!==c&&(1!==a||l!==l[0]))if(r)s=!0;else for(var u=a*n,h=u-n,d=u+n,f=0;f!==n;++f){var p=t[u+f];if(p!==t[h+f]||p!==t[d+f]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];for(var m=a*n,v=i*n,f=0;f!==n;++f)t[v+f]=t[m+f]}++i}}if(o>0){e[i]=e[o];for(var m=o*n,v=i*n,f=0;f!==n;++f)t[v+f]=t[m+f];++i}return i!==e.length&&(this.times=nc.arraySlice(e,0,i),this.values=nc.arraySlice(t,0,i*n)),this}},Vn.prototype=Object.assign(Object.create(rc),{constructor:Vn,ValueTypeName:"vector"}),Wn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Wn,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=(n-t)/(r-t),u=s+a;s!==u;s+=4)l.slerpFlat(i,0,o,s-a,o,s,c);return i}}),Xn.prototype=Object.assign(Object.create(rc),{constructor:Xn,ValueTypeName:"quaternion",DefaultInterpolation:ba,InterpolantFactoryMethodLinear:function(e){return new Wn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),qn.prototype=Object.assign(Object.create(rc),{constructor:qn,ValueTypeName:"number"}),Yn.prototype=Object.assign(Object.create(rc),{constructor:Yn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ya,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),$n.prototype=Object.assign(Object.create(rc),{constructor:$n,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:ya,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Zn.prototype=Object.assign(Object.create(rc),{constructor:Zn,ValueTypeName:"color"}),Kn.prototype=rc,rc.constructor=Kn,Object.assign(Kn,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=Kn._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];nc.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:nc.convertArray(e.times,Array),values:nc.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qn;case"vector":case"vector2":case"vector3":case"vector4":return Vn;case"color":return Zn;case"quaternion":return Xn;case"bool":case"boolean":return $n;case"string":return Yn}throw new Error("Unsupported typeName: "+e)}}),Jn.prototype={constructor:Jn,resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(Jn,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(Kn.parse(n[i]).scale(r));return new Jn(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={
name:e.name,duration:e.duration,tracks:t},i=0,o=n.length;i!==o;++i)t.push(Kn.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],l=[];s.push((a+i-1)%i,a,(a+1)%i),l.push(0,1,0);var c=nc.getKeyframeOrder(s);s=nc.sortedArray(s,1,c),l=nc.sortedArray(l,1,c),r||0!==s[0]||(s.push(i),l.push(l[0])),o.push(new qn(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new Jn(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],l=s.name.match(i);if(l&&l.length>1){var c=l[1],u=r[c];u||(r[c]=u=[]),u.push(s)}}var h=[];for(var c in r)h.push(Jn.CreateFromMorphTargetSequence(c,r[c],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];nc.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var c=s[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var u={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var d=0;d<c[h].morphTargets.length;d++)u[c[h].morphTargets[d]]=-1;for(var f in u){for(var p=[],m=[],d=0;d!==c[h].morphTargets.length;++d){var v=c[h];p.push(v.time),m.push(v.morphTarget===f?1:0)}r.push(new qn(".morphTargetInfluence["+f+"]",p,m))}o=u.length*(a||1)}else{var g=".bones["+t[l].name+"]";n(Vn,g+".position",c,"pos",r),n(Xn,g+".quaternion",c,"rot",r),n(Vn,g+".scale",c,"scl",r)}}if(0===r.length)return null;var y=new Jn(i,o,r);return y}}),Object.assign(Qn.prototype,{load:function(e,t,n,r){var i=this,o=new Sn(i.manager);o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===r[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),r[e]}var r=this.textures,i=new Jl[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.shading&&(i.shading=e.shading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=t(e.map)),void 0!==e.alphaMap&&(i.alphaMap=t(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=t(e.normalMap)),void 0!==e.normalScale){var o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=(new n).fromArray(o)}if(void 0!==e.displacementMap&&(i.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=t(e.specularMap)),void 0!==e.envMap&&(i.envMap=t(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.materials)for(var a=0,s=e.materials.length;a<s;a++)i.materials.push(this.parse(e.materials[a]));return i}}),Object.assign(er.prototype,{load:function(e,t,n,r){var i=this,o=new Sn(i.manager);o.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new Le,n=e.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var i=new r[n.type](n.array);t.setIndex(new me(i,1))}var o=e.data.attributes;for(var a in o){var s=o[a],i=new r[s.type](s.array);t.addAttribute(a,new me(i,s.itemSize,s.normalized))}var l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(var u=0,h=l.length;u!==h;++u){var d=l[u];t.addGroup(d.start,d.count,d.materialIndex)}var f=e.data.boundingSphere;if(void 0!==f){var p=new c;void 0!==f.center&&p.fromArray(f.center),t.boundingSphere=new te(p,f.radius)}return t}}),tr.prototype={constructor:tr,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e,t,n;return function(r,i,o){function a(e,n,r,a,l){var c,u=i+e,h=tr.Handlers.get(u);null!==h?c=h.load(u):(t.setCrossOrigin(o),c=t.load(u)),void 0!==n&&(c.repeat.fromArray(n),1!==n[0]&&(c.wrapS=Lo),1!==n[1]&&(c.wrapT=Lo)),void 0!==r&&c.offset.fromArray(r),void 0!==a&&("repeat"===a[0]&&(c.wrapS=Lo),"mirror"===a[0]&&(c.wrapS=Po),"repeat"===a[1]&&(c.wrapT=Lo),"mirror"===a[1]&&(c.wrapT=Po)),void 0!==l&&(c.anisotropy=l);var d=Ua.generateUUID();return s[d]=c,d}void 0===e&&(e=new X),void 0===t&&(t=new Ln),void 0===n&&(n=new Qn);var s={},l={uuid:Ua.generateUUID(),type:"MeshLambertMaterial"};for(var c in r){var u=r[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=u;break;case"blending":l.blending=zi[u];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(u).getHex();break;case"colorSpecular":l.specular=e.fromArray(u).getHex();break;case"colorEmissive":l.emissive=e.fromArray(u).getHex();break;case"specularCoef":l.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=a(u,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=a(u,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=a(u,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=a(u,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=a(u,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=a(u,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[u,u];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=a(u,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=a(u,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=a(u,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=a(u,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=Ci;break;case"doubleSided":l.side=Ai;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[c]=u;break;case"vertexColors":u===!0&&(l.vertexColors=Oi),"face"===u&&(l.vertexColors=ki);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,u)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),n.setTextures(s),n.parse(l)}}()},tr.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(nr.prototype,{load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:tr.prototype.extractUrlBase(e),a=new Sn(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var l=i.parse(r,o);t(l.geometry,l.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){function r(t){function r(e,t){return e&1<<t}var i,o,a,s,u,h,d,f,p,m,v,g,y,b,x,w,_,M,S,E,T,C,A,L,R,P,k,O=e.faces,N=e.vertices,D=e.normals,I=e.colors,U=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&U++;for(i=0;i<U;i++)l.faceVertexUvs[i]=[]}for(s=0,u=N.length;s<u;)M=new c,M.x=N[s++]*t,M.y=N[s++]*t,M.z=N[s++]*t,l.vertices.push(M);for(s=0,u=O.length;s<u;)if(m=O[s++],v=r(m,0),g=r(m,1),y=r(m,3),b=r(m,4),x=r(m,5),w=r(m,6),_=r(m,7),v){if(E=new fe,E.a=O[s],E.b=O[s+1],E.c=O[s+3],T=new fe,T.a=O[s+1],T.b=O[s+2],T.c=O[s+3],s+=4,g&&(p=O[s++],E.materialIndex=p,T.materialIndex=p),a=l.faces.length,y)for(i=0;i<U;i++)for(L=e.uvs[i],l.faceVertexUvs[i][a]=[],l.faceVertexUvs[i][a+1]=[],o=0;o<4;o++)f=O[s++],P=L[2*f],k=L[2*f+1],R=new n(P,k),2!==o&&l.faceVertexUvs[i][a].push(R),0!==o&&l.faceVertexUvs[i][a+1].push(R);if(b&&(d=3*O[s++],E.normal.set(D[d++],D[d++],D[d]),T.normal.copy(E.normal)),x)for(i=0;i<4;i++)d=3*O[s++],A=new c(D[d++],D[d++],D[d]),2!==i&&E.vertexNormals.push(A),0!==i&&T.vertexNormals.push(A);if(w&&(h=O[s++],C=I[h],E.color.setHex(C),T.color.setHex(C)),_)for(i=0;i<4;i++)h=O[s++],C=I[h],2!==i&&E.vertexColors.push(new X(C)),0!==i&&T.vertexColors.push(new X(C));l.faces.push(E),l.faces.push(T)}else{if(S=new fe,S.a=O[s++],S.b=O[s++],S.c=O[s++],g&&(p=O[s++],S.materialIndex=p),a=l.faces.length,y)for(i=0;i<U;i++)for(L=e.uvs[i],l.faceVertexUvs[i][a]=[],o=0;o<3;o++)f=O[s++],P=L[2*f],k=L[2*f+1],R=new n(P,k),l.faceVertexUvs[i][a].push(R);if(b&&(d=3*O[s++],S.normal.set(D[d++],D[d++],D[d])),x)for(i=0;i<3;i++)d=3*O[s++],A=new c(D[d++],D[d++],D[d]),S.vertexNormals.push(A);if(w&&(h=O[s++],S.color.setHex(I[h])),_)for(i=0;i<3;i++)h=O[s++],S.vertexColors.push(new X(I[h]));l.faces.push(S)}}function i(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,r=e.skinWeights.length;n<r;n+=t){var i=e.skinWeights[n],a=t>1?e.skinWeights[n+1]:0,s=t>2?e.skinWeights[n+2]:0,c=t>3?e.skinWeights[n+3]:0;l.skinWeights.push(new o(i,a,s,c))}if(e.skinIndices)for(var n=0,r=e.skinIndices.length;n<r;n+=t){var u=e.skinIndices[n],h=t>1?e.skinIndices[n+1]:0,d=t>2?e.skinIndices[n+2]:0,f=t>3?e.skinIndices[n+3]:0;l.skinIndices.push(new o(u,h,d,f))}l.bones=e.bones,l.bones&&l.bones.length>0&&(l.skinWeights.length!==l.skinIndices.length||l.skinIndices.length!==l.vertices.length)&&console.warn("When skinning, number of vertices ("+l.vertices.length+"), skinIndices ("+l.skinIndices.length+"), and skinWeights ("+l.skinWeights.length+") should match.")}function a(t){if(void 0!==e.morphTargets)for(var n=0,r=e.morphTargets.length;n<r;n++){l.morphTargets[n]={},l.morphTargets[n].name=e.morphTargets[n].name,l.morphTargets[n].vertices=[];for(var i=l.morphTargets[n].vertices,o=e.morphTargets[n].vertices,a=0,s=o.length;a<s;a+=3){var u=new c;u.x=o[a]*t,u.y=o[a+1]*t,u.z=o[a+2]*t,i.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=l.faces,d=e.morphColors[0].colors,n=0,r=h.length;n<r;n++)h[n].color.fromArray(d,3*n)}}function s(){var t=[],n=[];void 0!==e.animation&&n.push(e.animation),void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var r=0;r<n.length;r++){var i=Jn.parseAnimation(n[r],l.bones);i&&t.push(i)}if(l.morphTargets){var o=Jn.CreateClipsFromMorphTargetSequences(l.morphTargets,10);t=t.concat(o)}t.length>0&&(l.animations=t)}var l=new Te,u=void 0!==e.scale?1/e.scale:1;if(r(u),i(),a(u),s(),l.computeFaceNormals(),l.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:l};var h=tr.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:l,materials:h}}}),Object.assign(rr.prototype,{load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this,o=new Sn(i.manager);o.load(e,function(e){i.parse(JSON.parse(e),t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),i=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,i),a=this.parseObject(e.object,n,o);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new nr,r=new er,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Kl[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Kl[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Kl[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Kl[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Kl[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Kl[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":a=new Kl[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Kl[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Kl[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Kl[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Kl[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":a=r.parse(s);break;case"Geometry":a=n.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),t[s.uuid]=a}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new Qn;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=r.parse(e[i]);n[a.uuid]=a}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=Jn.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){function n(e){return r.manager.itemStart(e),a.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e)})}var r=this,i={};if(void 0!==e&&e.length>0){var o=new Mn(t),a=new Cn(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var c=e[s],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.texturePath+c.url;i[c.uuid]=n(u)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var o=0,a=e.length;o<a;o++){var s=e[o];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var l=new r(t[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,Ao)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],ko),l.wrapT=n(s.wrap[1],ko)),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,Bo)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,Bo)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),i[s.uuid]=l}return i},parseObject:function(){var e=new u;return function(t,n,r){function i(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),n[e]}function o(e){if(void 0!==e)return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}var a;switch(t.type){case"Scene":a=new ht,void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new X(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new ut(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new ct(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new Ne(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new De(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":a=new Fn(t.color,t.intensity);break;case"DirectionalLight":a=new Un(t.color,t.intensity);break;case"PointLight":a=new Dn(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":a=new Nn(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new Pn(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=i(t.geometry),l=o(t.material);a=s.bones&&s.bones.length>0?new bt(s,l):new Re(s,l);break;case"LOD":a=new mt;break;case"Line":a=new wt(i(t.geometry),o(t.material),t.mode);break;case"LineSegments":a=new _t(i(t.geometry),o(t.material));break;case"PointCloud":case"Points":a=new St(i(t.geometry),o(t.material));break;case"Sprite":a=new pt(o(t.material));break;case"Group":a=new Et;break;default:a=new ce}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.children)for(var c in t.children)a.add(this.parseObject(t.children[c],n,r));if("LOD"===t.type)for(var u=t.levels,h=0;h<u.length;h++){var d=u[h],c=a.getObjectByProperty("uuid",d.object);void 0!==c&&a.addLevel(c,d.distance)}return a}}()}),ir.prototype={constructor:ir,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e||(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e||(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t?t:e*r[o-1];for(var a,s=0,l=o-1;s<=l;)if(i=Math.floor(s+(l-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,r[i]===n){var c=i/(o-1);return c}var u=r[i],h=r[i+1],d=h-u,f=(n-u)/d,c=(i+f)/(o-1);return c},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new c,a=[],s=[],l=[],h=new c,d=new u;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new c,l[0]=new c;var f=Number.MAX_VALUE,p=Math.abs(a[0].x),m=Math.abs(a[0].y),v=Math.abs(a[0].z);for(p<=f&&(f=p,o.set(1,0,0)),m<=f&&(f=m,o.set(0,1,0)),v<=f&&o.set(0,0,1),h.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],h),l[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),h.crossVectors(a[n-1],a[n]),h.length()>Number.EPSILON&&(h.normalize(),i=Math.acos(Ua.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(d.makeRotationAxis(h,i))),l[n].crossVectors(a[n],s[n]);if(t===!0)for(i=Math.acos(Ua.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(h.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(d.makeRotationAxis(a[n],i*n)),l[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:l}}},ir.create=function(e,t){return e.prototype=Object.create(ir.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},or.prototype=Object.create(ir.prototype),or.prototype.constructor=or,or.prototype.isLineCurve=!0,or.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},or.prototype.getPointAt=function(e){return this.getPoint(e)},or.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()},ar.prototype=Object.assign(Object.create(ir.prototype),{constructor:ar,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new or(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e||(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var c=s[l];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Te,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new c(i.x,i.y,i.z||0))}return t}}),sr.prototype=Object.create(ir.prototype),sr.prototype.constructor=sr,sr.prototype.isEllipseCurve=!0,sr.prototype.getPoint=function(e){for(var t=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;r<0;)r+=t;for(;r>t;)r-=t;r<Number.EPSILON&&(r=i?0:t),this.aClockwise!==!0||i||(r===t?r=-t:r-=t);var o=this.aStartAngle+e*r,a=this.aX+this.xRadius*Math.cos(o),s=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),u=a-this.aX,h=s-this.aY;a=u*l-h*c+this.aX,s=u*c+h*l+this.aY}return new n(a,s)};var ic={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e,t,n,r,i){var o=6*e*e-6*e,a=3*e*e-4*e+1,s=-6*e*e+6*e,l=3*e*e-2*e;return o+a+s+l},interpolate:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i,l=i*s;return(2*t-2*n+o+a)*l+(-3*t+3*n-2*o-a)*s+o*i+t}};lr.prototype=Object.create(ir.prototype),lr.prototype.constructor=lr,lr.prototype.isSplineCurve=!0,lr.prototype.getPoint=function(e){var t=this.points,r=(t.length-1)*e,i=Math.floor(r),o=r-i,a=t[0===i?i:i-1],s=t[i],l=t[i>t.length-2?t.length-1:i+1],c=t[i>t.length-3?t.length-1:i+2],u=ic.interpolate;return new n(u(a.x,s.x,l.x,c.x,o),u(a.y,s.y,l.y,c.y,o))},cr.prototype=Object.create(ir.prototype),cr.prototype.constructor=cr,cr.prototype.getPoint=function(e){var t=Zl.b3;return new n(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},cr.prototype.getTangent=function(e){var t=ic.tangentCubicBezier;return new n(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},ur.prototype=Object.create(ir.prototype),ur.prototype.constructor=ur,ur.prototype.getPoint=function(e){var t=Zl.b2;return new n(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y))},ur.prototype.getTangent=function(e){var t=ic.tangentQuadraticBezier;return new n(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y)).normalize()};var oc=Object.assign(Object.create(ar.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var r=new or(this.currentPoint.clone(),new n(e,t));this.curves.push(r),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,r,i){var o=new ur(this.currentPoint.clone(),new n(e,t),new n(r,i));this.curves.push(o),this.currentPoint.set(r,i)},bezierCurveTo:function(e,t,r,i,o,a){var s=new cr(this.currentPoint.clone(),new n(e,t),new n(r,i),new n(o,a));this.curves.push(s),this.currentPoint.set(o,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new lr(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+l,t+c,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var l=new sr(e,t,n,r,i,o,a,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)}});hr.prototype=Object.assign(Object.create(oc),{constructor:hr,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),dr.prototype=oc,oc.constructor=dr,fr.prototype={moveTo:function(e,t){this.currentPath=new dr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new hr;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],l=-l,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var u=c*(e.x-a.x)-l*(e.y-a.y);if(0===u)return!0;if(u<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=Zl.isClockWise,o=this.subPaths;if(0===o.length)return[];if(t===!0)return n(o);var a,s,l,c=[];if(1===o.length)return s=o[0],l=new hr,l.curves=s.curves,c.push(l),c;var u=!i(o[0].getPoints());u=e?!u:u;var h,d=[],f=[],p=[],m=0;f[m]=void 0,p[m]=[];for(var v=0,g=o.length;v<g;v++)s=o[v],h=s.getPoints(),a=i(h),a=e?!a:a,a?(!u&&f[m]&&m++,f[m]={s:new hr,p:h},f[m].s.curves=s.curves,u&&m++,p[m]=[]):p[m].push({h:s,p:h[0]});if(!f[0])return n(o);if(f.length>1){for(var y=!1,b=[],x=0,w=f.length;x<w;x++)d[x]=[];for(var x=0,w=f.length;x<w;x++)for(var _=p[x],M=0;M<_.length;M++){for(var S=_[M],E=!0,T=0;T<f.length;T++)r(S.p,f[T].p)&&(x!==T&&b.push({froms:x,tos:T,hole:M}),E?(E=!1,d[T].push(S)):y=!0);E&&d[x].push(S)}b.length>0&&(y||(p=d))}for(var C,v=0,A=f.length;v<A;v++){l=f[v].s,c.push(l),C=p[v];for(var L=0,R=C.length;L<R;L++)l.holes.push(C[L].h)}return c}},Object.assign(pr.prototype,{isFont:!0,generateShapes:function(e,t,n){function r(e){for(var n=String(e).split(""),r=t/o.resolution,a=0,s=[],l=0;l<n.length;l++){
var c=i(n[l],r,a);a+=c.offset,s.push(c.path)}return s}function i(e,t,r){var i=o.glyphs[e]||o.glyphs["?"];if(i){var a,s,l,c,u,h,d,f,p,m,v,g=new fr,y=[],b=Zl.b2,x=Zl.b3;if(i.o)for(var w=i._cachedOutline||(i._cachedOutline=i.o.split(" ")),_=0,M=w.length;_<M;){var S=w[_++];switch(S){case"m":a=w[_++]*t+r,s=w[_++]*t,g.moveTo(a,s);break;case"l":a=w[_++]*t+r,s=w[_++]*t,g.lineTo(a,s);break;case"q":if(l=w[_++]*t+r,c=w[_++]*t,d=w[_++]*t+r,f=w[_++]*t,g.quadraticCurveTo(d,f,l,c),v=y[y.length-1]){u=v.x,h=v.y;for(var E=1;E<=n;E++){var T=E/n;b(T,u,d,l),b(T,h,f,c)}}break;case"b":if(l=w[_++]*t+r,c=w[_++]*t,d=w[_++]*t+r,f=w[_++]*t,p=w[_++]*t+r,m=w[_++]*t,g.bezierCurveTo(d,f,p,m,l,c),v=y[y.length-1]){u=v.x,h=v.y;for(var E=1;E<=n;E++){var T=E/n;x(T,u,d,p,l),x(T,h,f,m,c)}}}}return{offset:i.ha*t,path:g}}}void 0===t&&(t=100),void 0===n&&(n=4);for(var o=this.data,a=r(e),s=[],l=0,c=a.length;l<c;l++)Array.prototype.push.apply(s,a[l].toShapes());return s}}),Object.assign(mr.prototype,{load:function(e,t,n,r){var i=this,o=new Sn(this.manager);o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new pr(e)}});var ac;Object.assign(gr.prototype,{load:function(e,t,n,r){var i=new Sn(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){var n=vr();n.decodeAudioData(e,function(e){t(e)})},n,r)}}),Object.assign(yr.prototype,{update:function(){var e,t,n,r,i,o,a,s=new u,l=new u;return function(c){var u=e!==this||t!==c.focus||n!==c.fov||r!==c.aspect*this.aspect||i!==c.near||o!==c.far||a!==c.zoom;if(u){e=this,t=c.focus,n=c.fov,r=c.aspect*this.aspect,i=c.near,o=c.far,a=c.zoom;var h,d,f=c.projectionMatrix.clone(),p=this.eyeSep/2,m=p*i/t,v=i*Math.tan(Ua.DEG2RAD*n*.5)/a;l.elements[12]=-p,s.elements[12]=p,h=-v*r+m,d=v*r+m,f.elements[0]=2*i/(d-h),f.elements[8]=(d+h)/(d-h),this.cameraL.projectionMatrix.copy(f),h=-v*r-m,d=v*r-m,f.elements[0]=2*i/(d-h),f.elements[8]=(d+h)/(d-h),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(s)}}()}),br.prototype=Object.create(ce.prototype),br.prototype.constructor=br,xr.prototype=Object.assign(Object.create(ce.prototype),{constructor:xr,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new c,t=new l,n=new c,r=new c;return function(i){ce.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z)}}()}),wr.prototype=Object.assign(Object.create(ce.prototype),{constructor:wr,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.source.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.start(0,this.startTime),e.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=e)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),_r.prototype=Object.assign(Object.create(wr.prototype),{constructor:_r,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new c;return function(t){ce.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(Mr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Sr.prototype={constructor:Sr,accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r,i){l.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}},Er.prototype={constructor:Er,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Er.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("  can not bind to objectName of node, undefined",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[o]}}var s=e[r];if(void 0===s){var l=t.nodeName;return void console.error("  trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}var c=this.Versioning.None;void 0!==e.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Er.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Er.prototype.getValue,_setValue_unbound:Er.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),Er.Composite=function(e,t,n){var r=n||Er.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)},Er.Composite.prototype={constructor:Er.Composite,getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Er.create=function(e,t,n){return e&&e.isAnimationObjectGroup?new Er.Composite(e,t,n):new Er(e,t,n)},Er.parseTrackName=function(e){var t=/^((?:\w+[\/:])*)(\w+)?(?:\.(\w+)(?:\[(.+)\])?)?\.(\w+)(?:\[(.+)\])?$/,n=t.exec(e);if(!n)throw new Error("cannot parse trackName at all: "+e);var r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]};if(null===r.propertyName||0===r.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return r},Er.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(e){for(var n=0;n<e.bones.length;n++){var r=e.bones[n];if(r.name===t)return r}return null},r=n(e.skeleton);if(r)return r}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var o=i(r.children);if(o)return o}return null},o=i(e.children);if(o)return o}return null},Tr.prototype={constructor:Tr,isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length,c=0,u=arguments.length;c!==u;++c){var h=arguments[c],d=h.uuid,f=i[d];if(void 0===f){f=n++,i[d]=f,t.push(h);for(var p=0,m=l;p!==m;++p)s[p].push(new Er(h,o[p],a[p]))}else if(f<r){var v=t[f],g=--r,y=t[g];i[y.uuid]=f,t[f]=y,i[d]=g,t[g]=h;for(var p=0,m=l;p!==m;++p){var b=s[p],x=b[g],w=b[f];b[f]=x,void 0===w&&(w=new Er(h,o[p],a[p])),b[g]=w}}else t[f]!==v&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(e){for(var t=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a],c=l.uuid,u=r[c];if(void 0!==u&&u>=n){var h=n++,d=t[h];r[d.uuid]=u,t[u]=d,r[c]=h,t[h]=l;for(var f=0,p=o;f!==p;++f){var m=i[f],v=m[h],g=m[u];m[u]=v,m[h]=g}}}this.nCachedObjects_=n},uncache:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,l=arguments.length;s!==l;++s){var c=arguments[s],u=c.uuid,h=i[u];if(void 0!==h)if(delete i[u],h<r){var d=--r,f=t[d],p=--n,m=t[p];i[f.uuid]=h,t[h]=f,i[m.uuid]=d,t[d]=m,t.pop();for(var v=0,g=a;v!==g;++v){var y=o[v],b=y[d],x=y[p];y[h]=b,y[d]=x,y.pop()}}else{var p=--n,m=t[p];i[m.uuid]=h,t[h]=m,t.pop();for(var v=0,g=a;v!==g;++v){var y=o[v];y[h]=y[p],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u);for(var h=c,d=s.length;h!==d;++h){var f=s[h];u[h]=new Er(f,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],l=e[a];t[l]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}},Cr.prototype={constructor:Cr,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===ma){i===-1&&(this.loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=r===ga;if(i===-1&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1===(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=_a,r.endingEnd=_a):(e?r.endingStart=this.zeroSlopeAtStart?_a:wa:r.endingStart=Ma,t?r.endingEnd=this.zeroSlopeAtEnd?_a:wa:r.endingEnd=Ma)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}},Object.assign(Ar.prototype,t.prototype,{clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Jn.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[r];if(void 0!==l)return l;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new Cr(this,i,t);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Jn.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a?a.actionByRoot[r]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){var s=t[a];s.enabled&&s._update(r,e,i,o)}for(var l=this._bindings,c=this._nActiveBindings,a=0;a!==c;++a)l[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[t];if(void 0!==s)for(var l in s){var c=s[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Object.assign(Ar.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==i;++u){var h=r[u],d=h.name,f=c[d];if(void 0!==f)o[u]=f;else{if(f=o[u],void 0!==f){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[u].binding.parsedPath;f=new Sr(Er.create(n,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,d),o[u]=f}a[u].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null;var u=a.actionByRoot,h=(t._localRoot||this._root).uuid;delete u[h],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i];e:{for(var c in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new jn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),Rr.prototype=Object.create(Le.prototype),Rr.prototype.constructor=Rr,Rr.prototype.isInstancedBufferGeometry=!0,Rr.prototype.addGroup=function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},Rr.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=e.groups,a=0,s=o.length;a<s;a++){var l=o[a];this.addGroup(l.start,l.count,l.materialIndex)}return this},Pr.prototype={constructor:Pr,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},kr.prototype={constructor:kr,isInterleavedBuffer:!0,set needsUpdate(e){e===!0&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)}},Or.prototype=Object.create(kr.prototype),Or.prototype.constructor=Or,Or.prototype.isInstancedInterleavedBuffer=!0,Or.prototype.copy=function(e){return kr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Nr.prototype=Object.create(me.prototype),Nr.prototype.constructor=Nr,Nr.prototype.isInstancedBufferAttribute=!0,Nr.prototype.copy=function(e){return me.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Dr.prototype={constructor:Dr,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return Ur(e,this,n,t),n.sort(Ir),n},intersectObjects:function(e,t){var n=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=e.length;r<i;r++)Ur(e[r],this,n,t);return n.sort(Ir),n}},Fr.prototype={constructor:Fr,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},zr.prototype={constructor:zr,set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Ua.clamp(e.y/this.radius,-1,1))),this}},jr.prototype=Object.create(Re.prototype),jr.prototype.constructor=jr,jr.prototype.createAnimation=function(e,t,n,r){var i={start:t,end:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},jr.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/i,r={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o],l=s.name.match(n);if(l&&l.length>1){var c=l[1];r[c]||(r[c]={start:1/0,end:-(1/0)});var u=r[c];o<u.start&&(u.start=o),o>u.end&&(u.end=o),t||(t=c)}}for(var c in r){var u=r[c];this.createAnimation(c,u.start,u.end,e);
}this.firstAnimation=t},jr.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},jr.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},jr.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},jr.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},jr.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},jr.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},jr.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},jr.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},jr.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},jr.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},jr.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var o=r.start+Ua.clamp(Math.floor(r.time/i),0,r.length-1),a=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*a,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o);var s=r.time%i/i;r.directionBackwards&&(s=1-s),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=s*a,this.morphTargetInfluences[r.lastFrame]=(1-s)*a):this.morphTargetInfluences[r.currentFrame]=a}}},Gr.prototype=Object.create(ce.prototype),Gr.prototype.constructor=Gr,Gr.prototype.isImmediateRenderObject=!0,Hr.prototype=Object.create(_t.prototype),Hr.prototype.constructor=Hr,Hr.prototype.update=function(){var e=new c,t=new c,n=new ne;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,c=0,u=0,h=l.length;u<h;u++)for(var d=l[u],f=0,p=d.vertexNormals.length;f<p;f++){var m=s[d[r[f]]],v=d.vertexNormals[f];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry)for(var g=a.attributes.position,y=a.attributes.normal,c=0,f=0,p=g.count;f<p;f++)e.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(i),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1;return o.needsUpdate=!0,this}}(),Vr.prototype=Object.create(ce.prototype),Vr.prototype.constructor=Vr,Vr.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Vr.prototype.update=function(){var e=new c,t=new c;return function(){var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),Wr.prototype=Object.create(_t.prototype),Wr.prototype.constructor=Wr,Wr.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},Wr.prototype.update=function(){for(var e=this.geometry,t=(new u).getInverse(this.root.matrixWorld),n=new u,r=0,i=0;i<this.bones.length;i++){var o=this.bones[i];o.parent&&o.parent.isBone&&(n.multiplyMatrices(t,o.matrixWorld),e.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(t,o.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(n),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},Xr.prototype=Object.create(Re.prototype),Xr.prototype.constructor=Xr,Xr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Xr.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},qr.prototype=Object.create(ce.prototype),qr.prototype.constructor=qr,qr.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},qr.prototype.update=function(){var e=new c;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),Yr.prototype=Object.create(_t.prototype),Yr.prototype.constructor=Yr,Yr.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},$r.prototype=Object.create(_t.prototype),$r.prototype.constructor=$r,$r.prototype.update=function(){var e=new c,t=new c,n=new ne;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,c=0,u=s.length;c<u;c++){var h=s[c],d=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(l,e.x,e.y,e.z),l+=1,i.setXYZ(l,t.x,t.y,t.z),l+=1}return i.needsUpdate=!0,this}}(),Zr.prototype=Object.create(ce.prototype),Zr.prototype.constructor=Zr,Zr.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},Zr.prototype.update=function(){var e=new c,t=new c,n=new c;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e);var r=this.children[0],i=this.children[1];r.lookAt(n),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(n),i.scale.z=n.length()}}(),Kr.prototype=Object.create(_t.prototype),Kr.prototype.constructor=Kr,Kr.prototype.update=function(){function e(e,o,a,s){r.set(o,a,s).unproject(i);var l=n[e];if(void 0!==l)for(var c=0,u=l.length;c<u;c++)t.vertices[l[c]].copy(r)}var t,n,r=new c,i=new Oe;return function(){t=this.geometry,n=this.pointMap;var r=1,o=1;i.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-r,-o,-1),e("n2",r,-o,-1),e("n3",-r,o,-1),e("n4",r,o,-1),e("f1",-r,-o,1),e("f2",r,-o,1),e("f3",-r,o,1),e("f4",r,o,1),e("u1",.7*r,1.1*o,-1),e("u2",.7*-r,1.1*o,-1),e("u3",0,2*o,-1),e("cf1",-r,0,1),e("cf2",r,0,1),e("cf3",0,-o,1),e("cf4",0,o,1),e("cn1",-r,0,-1),e("cn2",r,0,-1),e("cn3",0,-o,-1),e("cn4",0,o,-1),t.verticesNeedUpdate=!0}}(),Jr.prototype=Object.create(Re.prototype),Jr.prototype.constructor=Jr,Jr.prototype.update=function(){this.box.setFromObject(this.object),this.box.getSize(this.scale),this.box.getCenter(this.position)},Qr.prototype=Object.create(_t.prototype),Qr.prototype.constructor=Qr,Qr.prototype.update=function(){var e=new ee;return function(t){if(t&&t.isBox3?e.copy(t):e.setFromObject(t),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var sc=new Le;sc.addAttribute("position",new Me([0,0,0,0,1,0],3));var lc=new sn(0,.5,1,5,1);lc.translate(0,-.5,0),ei.prototype=Object.create(ce.prototype),ei.prototype.constructor=ei,ei.prototype.setDirection=function(){var e,t=new c;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),ei.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},ei.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},ti.prototype=Object.create(_t.prototype),ti.prototype.constructor=ti;var cc=function(){function e(){}var t=new c,n=new e,r=new e,i=new e;return e.prototype.init=function(e,t,n,r){this.c0=e,this.c1=n,this.c2=-3*e+3*t-2*n-r,this.c3=2*e-2*t+n+r},e.prototype.initNonuniformCatmullRom=function(e,t,n,r,i,o,a){var s=(t-e)/i-(n-e)/(i+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+a)+(r-n)/a;s*=o,l*=o,this.init(t,n,s,l)},e.prototype.initCatmullRom=function(e,t,n,r,i){this.init(t,n,i*(n-e),i*(r-t))},e.prototype.calc=function(e){var t=e*e,n=t*e;return this.c0+this.c1*e+this.c2*t+this.c3*n},ir.create(function(e){this.points=e||[],this.closed=!1},function(e){var o,a,s,l,u=this.points;l=u.length,l<2&&console.log("duh, you need at least 2 points"),o=(l-(this.closed?0:1))*e,a=Math.floor(o),s=o-a,this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/u.length)+1)*u.length:0===s&&a===l-1&&(a=l-2,s=1);var h,d,f,p;if(this.closed||a>0?h=u[(a-1)%l]:(t.subVectors(u[0],u[1]).add(u[0]),h=t),d=u[a%l],f=u[(a+1)%l],this.closed||a+2<l?p=u[(a+2)%l]:(t.subVectors(u[l-1],u[l-2]).add(u[l-1]),p=t),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,v=Math.pow(h.distanceToSquared(d),m),g=Math.pow(d.distanceToSquared(f),m),y=Math.pow(f.distanceToSquared(p),m);g<1e-4&&(g=1),v<1e-4&&(v=g),y<1e-4&&(y=g),n.initNonuniformCatmullRom(h.x,d.x,f.x,p.x,v,g,y),r.initNonuniformCatmullRom(h.y,d.y,f.y,p.y,v,g,y),i.initNonuniformCatmullRom(h.z,d.z,f.z,p.z,v,g,y)}else if("catmullrom"===this.type){var b=void 0!==this.tension?this.tension:.5;n.initCatmullRom(h.x,d.x,f.x,p.x,b),r.initCatmullRom(h.y,d.y,f.y,p.y,b),i.initCatmullRom(h.z,d.z,f.z,p.z,b)}var x=new c(n.calc(s),r.calc(s),i.calc(s));return x})}();ni.prototype=Object.create(cc.prototype);var uc=ir.create(function(e){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===e?[]:e},function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,o=t[0==r?r:r-1],a=t[r],s=t[r>t.length-2?t.length-1:r+1],l=t[r>t.length-3?t.length-1:r+2],u=ic.interpolate;return new c(u(o.x,a.x,s.x,l.x,i),u(o.y,a.y,s.y,l.y,i),u(o.z,a.z,s.z,l.z,i))}),hc=ir.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t=Zl.b3;return new c(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),dc=ir.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t=Zl.b2;return new c(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y),t(e,this.v0.z,this.v1.z,this.v2.z))}),fc=ir.create(function(e,t){this.v1=e,this.v2=t},function(e){if(1===e)return this.v2.clone();var t=new c;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t});ri.prototype=Object.create(sr.prototype),ri.prototype.constructor=ri;var pc={createMultiMaterialObject:function(e,t){for(var n=new Et,r=0,i=t.length;r<i;r++)n.add(new Re(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new u;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},mc=0,vc=1;Object.assign(q.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(ee.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(he.prototype,{center:function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)}}),Object.assign(ne.prototype,{multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)}}),Object.assign(u.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(e){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}),Object.assign(re.prototype,{isIntersectionLine:function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)}}),Object.assign(l.prototype,{multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)}}),Object.assign(ae.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(hr.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new $t(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new on(this,e)}}),Object.assign(c.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)}}),Object.assign(ce.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(e){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(ce.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(mt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Ne.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Rn.prototype,{onlyShadow:{set:function(e){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(e){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(e){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(me.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.assign(Le.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Le.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Z.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(e){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new X}}}),Object.defineProperties(bn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(e){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(J.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),t.prototype=Object.assign(Object.create({constructor:t,apply:function(e){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(e,this)}}),t.prototype),Object.defineProperties(Lr.prototype,{dynamic:{set:function(e){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.assign(lt.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(lt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(oe.prototype,{cullFace:{get:function(){return this.renderReverseSided?bi:yi},set:function(e){var t=e!==yi;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(a.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.assign(wr.prototype,{load:function(e){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var t=this,n=new gr;return n.load(e,function(e){t.setBuffer(e)}),this}}),Object.assign(Mr.prototype,{getData:function(e){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()}});var gc={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},yc={crossOrigin:void 0,loadTexture:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ln;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new An;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};e.WebGLRenderTargetCube=s,e.WebGLRenderTarget=a,e.WebGLRenderer=lt,e.ShaderLib=Wl,e.UniformsLib=Vl,e.UniformsUtils=Va,e.ShaderChunk=Gl,e.FogExp2=ct,e.Fog=ut,e.Scene=ht,e.LensFlare=dt,e.Sprite=pt,e.LOD=mt,e.SkinnedMesh=bt,e.Skeleton=gt,e.Bone=yt,e.Mesh=Re,e.LineSegments=_t,e.Line=wt,e.Points=St,e.Group=Et,e.VideoTexture=Tt,e.DataTexture=vt,e.CompressedTexture=Ct,e.CubeTexture=h,e.CanvasTexture=At,e.DepthTexture=Lt,e.TextureIdCount=i,e.Texture=r,e.MaterialIdCount=K,e.CompressedTextureLoader=En,e.BinaryTextureLoader=Tn,e.DataTextureLoader=tc,e.CubeTextureLoader=An,e.TextureLoader=Ln,e.ObjectLoader=rr,e.MaterialLoader=Qn,e.BufferGeometryLoader=er,e.DefaultLoadingManager=ec,e.LoadingManager=Mn,e.JSONLoader=nr,e.ImageLoader=Cn,e.FontLoader=mr,e.XHRLoader=Sn,e.Loader=tr,e.Cache=Ql,e.AudioLoader=gr,e.SpotLightShadow=On,e.SpotLight=Nn,e.PointLight=Dn,e.HemisphereLight=Pn,e.DirectionalLightShadow=In,e.DirectionalLight=Un,e.AmbientLight=Fn,e.LightShadow=kn,e.Light=Rn,e.StereoCamera=yr,e.PerspectiveCamera=Ne,e.OrthographicCamera=De,e.CubeCamera=br,e.Camera=Oe,e.AudioListener=xr,e.PositionalAudio=_r,e.getAudioContext=vr,e.AudioAnalyser=Mr,e.Audio=wr,e.VectorKeyframeTrack=Vn,e.StringKeyframeTrack=Yn,e.QuaternionKeyframeTrack=Xn,e.NumberKeyframeTrack=qn,e.ColorKeyframeTrack=Zn,e.BooleanKeyframeTrack=$n,e.PropertyMixer=Sr,e.PropertyBinding=Er,e.KeyframeTrack=Kn,e.AnimationUtils=nc,e.AnimationObjectGroup=Tr,e.AnimationMixer=Ar,e.AnimationClip=Jn,e.Uniform=Lr,e.InstancedBufferGeometry=Rr,e.BufferGeometry=Le,e.GeometryIdCount=Ce,e.Geometry=Te,e.InterleavedBufferAttribute=Pr,e.InstancedInterleavedBuffer=Or,e.InterleavedBuffer=kr,e.InstancedBufferAttribute=Nr,e.DynamicBufferAttribute=Ee,e.Float64Attribute=Se,e.Float32Attribute=Me,e.Uint32Attribute=_e,e.Int32Attribute=we,e.Uint16Attribute=xe,
e.Int16Attribute=be,e.Uint8ClampedAttribute=ye,e.Uint8Attribute=ge,e.Int8Attribute=ve,e.BufferAttribute=me,e.Face3=fe,e.Object3DIdCount=ue,e.Object3D=ce,e.Raycaster=Dr,e.Layers=le,e.EventDispatcher=t,e.Clock=Fr,e.QuaternionLinearInterpolant=Wn,e.LinearInterpolant=jn,e.DiscreteInterpolant=Gn,e.CubicInterpolant=zn,e.Interpolant=Bn,e.Triangle=de,e.Spline=Br,e.Math=Ua,e.Spherical=zr,e.Plane=re,e.Frustum=ie,e.Sphere=te,e.Ray=ae,e.Matrix4=u,e.Matrix3=ne,e.Box3=ee,e.Box2=q,e.Line3=he,e.Euler=se,e.Vector4=o,e.Vector3=c,e.Vector2=n,e.Quaternion=l,e.ColorKeywords=Hl,e.Color=X,e.MorphBlendMesh=jr,e.ImmediateRenderObject=Gr,e.VertexNormalsHelper=Hr,e.SpotLightHelper=Vr,e.SkeletonHelper=Wr,e.PointLightHelper=Xr,e.HemisphereLightHelper=qr,e.GridHelper=Yr,e.FaceNormalsHelper=$r,e.DirectionalLightHelper=Zr,e.CameraHelper=Kr,e.BoundingBoxHelper=Jr,e.BoxHelper=Qr,e.ArrowHelper=ei,e.AxisHelper=ti,e.ClosedSplineCurve3=ni,e.CatmullRomCurve3=cc,e.SplineCurve3=uc,e.CubicBezierCurve3=hc,e.QuadraticBezierCurve3=dc,e.LineCurve3=fc,e.ArcCurve=ri,e.EllipseCurve=sr,e.SplineCurve=lr,e.CubicBezierCurve=cr,e.QuadraticBezierCurve=ur,e.LineCurve=or,e.Shape=hr,e.ShapePath=fr,e.Path=dr,e.Font=pr,e.CurvePath=ar,e.Curve=ir,e.ShapeUtils=Zl,e.SceneUtils=pc,e.CurveUtils=ic,e.WireframeGeometry=Rt,e.ParametricGeometry=kt,e.ParametricBufferGeometry=Pt,e.TetrahedronGeometry=Dt,e.TetrahedronBufferGeometry=Nt,e.OctahedronGeometry=Ut,e.OctahedronBufferGeometry=It,e.IcosahedronGeometry=Bt,e.IcosahedronBufferGeometry=Ft,e.DodecahedronGeometry=jt,e.DodecahedronBufferGeometry=zt,e.PolyhedronGeometry=Gt,e.PolyhedronBufferGeometry=Ot,e.TubeGeometry=Vt,e.TubeBufferGeometry=Ht,e.TorusKnotGeometry=Xt,e.TorusKnotBufferGeometry=Wt,e.TorusGeometry=Yt,e.TorusBufferGeometry=qt,e.TextGeometry=Zt,e.SphereBufferGeometry=Kt,e.SphereGeometry=Jt,e.RingGeometry=en,e.RingBufferGeometry=Qt,e.PlaneBufferGeometry=ke,e.PlaneGeometry=tn,e.LatheGeometry=rn,e.LatheBufferGeometry=nn,e.ShapeGeometry=on,e.ExtrudeGeometry=$t,e.EdgesGeometry=an,e.ConeGeometry=cn,e.ConeBufferGeometry=un;e.CylinderGeometry=ln;e.CylinderBufferGeometry=sn,e.CircleBufferGeometry=hn,e.CircleGeometry=dn,e.BoxBufferGeometry=Pe,e.BoxGeometry=fn,e.ShadowMaterial=pn,e.SpriteMaterial=ft,e.RawShaderMaterial=mn,e.ShaderMaterial=J,e.PointsMaterial=Mt,e.MultiMaterial=vn,e.MeshPhysicalMaterial=yn,e.MeshStandardMaterial=gn,e.MeshPhongMaterial=bn,e.MeshNormalMaterial=xn,e.MeshLambertMaterial=wn,e.MeshDepthMaterial=Q,e.MeshBasicMaterial=pe,e.LineDashedMaterial=_n,e.LineBasicMaterial=xt,e.Material=Z,e.REVISION=mi,e.MOUSE=vi,e.CullFaceNone=gi,e.CullFaceBack=yi,e.CullFaceFront=bi,e.CullFaceFrontBack=xi,e.FrontFaceDirectionCW=wi,e.FrontFaceDirectionCCW=_i,e.BasicShadowMap=Mi,e.PCFShadowMap=Si,e.PCFSoftShadowMap=Ei,e.FrontSide=Ti,e.BackSide=Ci,e.DoubleSide=Ai,e.FlatShading=Li,e.SmoothShading=Ri,e.NoColors=Pi,e.FaceColors=ki,e.VertexColors=Oi,e.NoBlending=Ni,e.NormalBlending=Di,e.AdditiveBlending=Ii,e.SubtractiveBlending=Ui,e.MultiplyBlending=Fi,e.CustomBlending=Bi,e.BlendingMode=zi,e.AddEquation=ji,e.SubtractEquation=Gi,e.ReverseSubtractEquation=Hi,e.MinEquation=Vi,e.MaxEquation=Wi,e.ZeroFactor=Xi,e.OneFactor=qi,e.SrcColorFactor=Yi,e.OneMinusSrcColorFactor=$i,e.SrcAlphaFactor=Zi,e.OneMinusSrcAlphaFactor=Ki,e.DstAlphaFactor=Ji,e.OneMinusDstAlphaFactor=Qi,e.DstColorFactor=eo,e.OneMinusDstColorFactor=to,e.SrcAlphaSaturateFactor=no,e.NeverDepth=ro,e.AlwaysDepth=io,e.LessDepth=oo,e.LessEqualDepth=ao,e.EqualDepth=so,e.GreaterEqualDepth=lo,e.GreaterDepth=co,e.NotEqualDepth=uo,e.MultiplyOperation=ho,e.MixOperation=fo,e.AddOperation=po,e.NoToneMapping=mo,e.LinearToneMapping=vo,e.ReinhardToneMapping=go,e.Uncharted2ToneMapping=yo,e.CineonToneMapping=bo,e.UVMapping=xo,e.CubeReflectionMapping=wo,e.CubeRefractionMapping=_o,e.EquirectangularReflectionMapping=Mo,e.EquirectangularRefractionMapping=So,e.SphericalReflectionMapping=Eo,e.CubeUVReflectionMapping=To,e.CubeUVRefractionMapping=Co,e.TextureMapping=Ao,e.RepeatWrapping=Lo,e.ClampToEdgeWrapping=Ro,e.MirroredRepeatWrapping=Po,e.TextureWrapping=ko,e.NearestFilter=Oo,e.NearestMipMapNearestFilter=No,e.NearestMipMapLinearFilter=Do,e.LinearFilter=Io,e.LinearMipMapNearestFilter=Uo,e.LinearMipMapLinearFilter=Fo,e.TextureFilter=Bo,e.UnsignedByteType=zo,e.ByteType=jo,e.ShortType=Go,e.UnsignedShortType=Ho,e.IntType=Vo,e.UnsignedIntType=Wo,e.FloatType=Xo,e.HalfFloatType=qo,e.UnsignedShort4444Type=Yo,e.UnsignedShort5551Type=$o,e.UnsignedShort565Type=Zo,e.UnsignedInt248Type=Ko,e.AlphaFormat=Jo,e.RGBFormat=Qo,e.RGBAFormat=ea,e.LuminanceFormat=ta,e.LuminanceAlphaFormat=na,e.RGBEFormat=ra,e.DepthFormat=ia,e.DepthStencilFormat=oa,e.RGB_S3TC_DXT1_Format=aa,e.RGBA_S3TC_DXT1_Format=sa,e.RGBA_S3TC_DXT3_Format=la,e.RGBA_S3TC_DXT5_Format=ca,e.RGB_PVRTC_4BPPV1_Format=ua,e.RGB_PVRTC_2BPPV1_Format=ha,e.RGBA_PVRTC_4BPPV1_Format=da,e.RGBA_PVRTC_2BPPV1_Format=fa,e.RGB_ETC1_Format=pa,e.LoopOnce=ma,e.LoopRepeat=va,e.LoopPingPong=ga,e.InterpolateDiscrete=ya,e.InterpolateLinear=ba,e.InterpolateSmooth=xa,e.ZeroCurvatureEnding=wa,e.ZeroSlopeEnding=_a,e.WrapAroundEnding=Ma,e.TrianglesDrawMode=Sa,e.TriangleStripDrawMode=Ea,e.TriangleFanDrawMode=Ta,e.LinearEncoding=Ca,e.sRGBEncoding=Aa,e.GammaEncoding=La,e.RGBEEncoding=Ra,e.LogLuvEncoding=Pa,e.RGBM7Encoding=ka,e.RGBM16Encoding=Oa,e.RGBDEncoding=Na,e.BasicDepthPacking=Da,e.RGBADepthPacking=Ia,e.CubeGeometry=fn,e.Face4=ii,e.LineStrip=mc,e.LinePieces=vc,e.MeshFaceMaterial=vn,e.PointCloud=oi,e.Particle=pt,e.ParticleSystem=ai,e.PointCloudMaterial=si,e.ParticleBasicMaterial=li,e.ParticleSystemMaterial=ci,e.Vertex=ui,e.EdgesHelper=hi,e.WireframeHelper=di,e.GeometryUtils=gc,e.ImageUtils=yc,e.Projector=fi,e.CanvasRenderer=pi,Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AudioContext",{get:function(){return e.getAudioContext()}})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=e.map(function(e){var t=e.id;return t}).join(":");if(!x[t]){var n;x[t]=(0,v.default)((n=[]).concat.apply(n,i(e.map(function(e){var t=e.declarations;return t.filter(w)}))).reduce(function(e,t){var n=t.property,r=t.value;return e[n]=r,e},{}))}return x[t]}function a(){var e=[].slice.call(document.querySelectorAll(['head link[type="text/threejs+css"]','head style[type="text/threejs+css"]']));return Promise.all(e.map(function(e){return"STYLE"===e.tagName?Promise.resolve(e.textContent):fetch(e.href).then(function(e){if(!e.ok)throw Object.assign(new Error(e.statusText),{res:e});return e.text()})})).then(function(e){return e.join("\n")})}function s(e,t){"object"!==("undefined"==typeof t?"undefined":u(t))&&(t={style:t,update:"full"}),t.update=t.update||"full";var n=t,r=n.style,i=n.update,o=void 0!==r?Promise.resolve(r):a();return o.then(function(t){if(!t)return void console.warn("No styles provided or found in document.");var n=(0,d.default)(t),r=n.stylesheet;r.rules=r.rules.filter(w),r.rules.forEach(function(e){return e.id=e.id||++b}),l(e,r.rules),i&&"none"!==i&&((0,y.default)(e,["name","userData"]),e.addEventListener("childUpdated",function(t){"full"===i?l(e,r.rules):c(t.context,r.rules)}))})}function l(e,t){e.traverse(function(e){return c(e,t)})}function c(e,t){var n=t.filter(function(t){var n=t.selectors;return(0,p.default)(n.join(", "))(e)});n.length>0&&(e.material=o(n))}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getMaterial=o,t.loadStyles=a,t.applyStyle=s,t.updateGraph=l,t.updateNode=c;var h=n(7),d=r(h),f=n(34),p=r(f),m=n(61),v=r(m),g=n(67),y=r(g),b=0,x={},w=function(e){var t=e.type;return"comment"!==t};t.default={getMaterial:o}},function(e,t,n){e.exports=n(8).parse},function(e,t,n){t.parse=n(9),t.stringify=n(10)},function(e,t){function n(e){return e?e.replace(/^\s+|\s+$/g,""):""}function r(e,t){var n=e&&"string"==typeof e.type,i=n?e:t;for(var o in e){var a=e[o];Array.isArray(a)?a.forEach(function(e){r(e,i)}):a&&"object"==typeof a&&r(a,i)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var i=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//g;e.exports=function(e,t){function o(e){var t=e.match(/\n/g);t&&(k+=t.length);var n=e.lastIndexOf("\n");O=~n?e.length-n:O+e.length}function a(){var e={line:k,column:O};return function(t){return t.position=new s(e),p(),t}}function s(e){this.start=e,this.end={line:k,column:O},this.source=t.source}function l(n){var r=new Error(t.source+":"+k+":"+O+": "+n);if(r.reason=n,r.filename=t.source,r.line=k,r.column=O,r.source=e,!t.silent)throw r;N.push(r)}function c(){var e=d();return{type:"stylesheet",stylesheet:{rules:e,parsingErrors:N}}}function u(){return f(/^{\s*/)}function h(){return f(/^}/)}function d(){var t,n=[];for(p(),m(n);e.length&&"}"!=e.charAt(0)&&(t=R()||P());)t!==!1&&(n.push(t),m(n));return n}function f(t){var n=t.exec(e);if(n){var r=n[0];return o(r),e=e.slice(r.length),n}}function p(){f(/^\s*/)}function m(e){var t;for(e=e||[];t=v();)t!==!1&&e.push(t);return e}function v(){var t=a();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;""!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return l("End of comment missing");var r=e.slice(2,n-2);return O+=2,o(r),e=e.slice(n),O+=2,t({type:"comment",comment:r})}}function g(){var e=f(/^([^{]+)/);if(e)return n(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(e){return e.replace(/,/g,"‌")}).split(/\s*(?![^(]*\)),\s*/).map(function(e){return e.replace(/\u200C/g,",")})}function y(){var e=a(),t=f(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){if(t=n(t[0]),!f(/^:\s*/))return l("property missing ':'");var r=f(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=e({type:"declaration",property:t.replace(i,""),value:r?n(r[0]).replace(i,""):""});return f(/^[;\s]*/),o}}function b(){var e=[];if(!u())return l("missing '{'");m(e);for(var t;t=y();)t!==!1&&(e.push(t),m(e));return h()?e:l("missing '}'")}function x(){for(var e,t=[],n=a();e=f(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),f(/^,\s*/);if(t.length)return n({type:"keyframe",values:t,declarations:b()})}function w(){var e=a(),t=f(/^@([-\w]+)?keyframes\s*/);if(t){var n=t[1],t=f(/^([-\w]+)\s*/);if(!t)return l("@keyframes missing name");var r=t[1];if(!u())return l("@keyframes missing '{'");for(var i,o=m();i=x();)o.push(i),o=o.concat(m());return h()?e({type:"keyframes",name:r,vendor:n,keyframes:o}):l("@keyframes missing '}'")}}function _(){var e=a(),t=f(/^@supports *([^{]+)/);if(t){var r=n(t[1]);if(!u())return l("@supports missing '{'");var i=m().concat(d());return h()?e({type:"supports",supports:r,rules:i}):l("@supports missing '}'")}}function M(){var e=a(),t=f(/^@host\s*/);if(t){if(!u())return l("@host missing '{'");var n=m().concat(d());return h()?e({type:"host",rules:n}):l("@host missing '}'")}}function S(){var e=a(),t=f(/^@media *([^{]+)/);if(t){var r=n(t[1]);if(!u())return l("@media missing '{'");var i=m().concat(d());return h()?e({type:"media",media:r,rules:i}):l("@media missing '}'")}}function E(){var e=a(),t=f(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:n(t[1]),media:n(t[2])})}function T(){var e=a(),t=f(/^@page */);if(t){var n=g()||[];if(!u())return l("@page missing '{'");for(var r,i=m();r=y();)i.push(r),i=i.concat(m());return h()?e({type:"page",selectors:n,declarations:i}):l("@page missing '}'")}}function C(){var e=a(),t=f(/^@([-\w]+)?document *([^{]+)/);if(t){var r=n(t[1]),i=n(t[2]);if(!u())return l("@document missing '{'");var o=m().concat(d());return h()?e({type:"document",document:i,vendor:r,rules:o}):l("@document missing '}'")}}function A(){var e=a(),t=f(/^@font-face\s*/);if(t){if(!u())return l("@font-face missing '{'");for(var n,r=m();n=y();)r.push(n),r=r.concat(m());return h()?e({type:"font-face",declarations:r}):l("@font-face missing '}'")}}function L(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var n=a(),r=f(t);if(r){var i={type:e};return i[e]=r[1].trim(),n(i)}}}function R(){if("@"==e[0])return w()||S()||E()||_()||D()||I()||U()||C()||T()||M()||A()}function P(){var e=a(),t=g();return t?(m(),e({type:"rule",selectors:t,declarations:b()})):l("selector missing")}t=t||{};var k=1,O=1;s.prototype.content=e;var N=[],D=L("import"),I=L("charset"),U=L("namespace");return r(c())}},function(e,t,n){var r=n(11),i=n(14);e.exports=function(e,t){t=t||{};var o=t.compress?new r(t):new i(t);if(t.sourcemap){var a=n(15);a(o);var s=o.compile(e);o.applySourceMaps();var l="generator"===t.sourcemap?o.map:o.map.toJSON();return{code:s,map:l}}var s=o.compile(e);return s}},function(e,t,n){function r(e){i.call(this,e)}var i=n(12),o=n(13);e.exports=r,o(r,i),r.prototype.compile=function(e){return e.stylesheet.rules.map(this.visit,this).join("")},r.prototype.comment=function(e){return this.emit("",e.position)},r.prototype.import=function(e){return this.emit("@import "+e.import+";",e.position)},r.prototype.media=function(e){return this.emit("@media "+e.media,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},r.prototype.document=function(e){var t="@"+(e.vendor||"")+"document "+e.document;return this.emit(t,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},r.prototype.charset=function(e){return this.emit("@charset "+e.charset+";",e.position)},r.prototype.namespace=function(e){return this.emit("@namespace "+e.namespace+";",e.position)},r.prototype.supports=function(e){return this.emit("@supports "+e.supports,e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},r.prototype.keyframes=function(e){return this.emit("@"+(e.vendor||"")+"keyframes "+e.name,e.position)+this.emit("{")+this.mapVisit(e.keyframes)+this.emit("}")},r.prototype.keyframe=function(e){var t=e.declarations;return this.emit(e.values.join(","),e.position)+this.emit("{")+this.mapVisit(t)+this.emit("}")},r.prototype.page=function(e){var t=e.selectors.length?e.selectors.join(", "):"";return this.emit("@page "+t,e.position)+this.emit("{")+this.mapVisit(e.declarations)+this.emit("}")},r.prototype["font-face"]=function(e){return this.emit("@font-face",e.position)+this.emit("{")+this.mapVisit(e.declarations)+this.emit("}")},r.prototype.host=function(e){return this.emit("@host",e.position)+this.emit("{")+this.mapVisit(e.rules)+this.emit("}")},r.prototype["custom-media"]=function(e){return this.emit("@custom-media "+e.name+" "+e.media+";",e.position)},r.prototype.rule=function(e){var t=e.declarations;return t.length?this.emit(e.selectors.join(","),e.position)+this.emit("{")+this.mapVisit(t)+this.emit("}"):""},r.prototype.declaration=function(e){return this.emit(e.property+":"+e.value,e.position)+this.emit(";")}},function(e,t){function n(e){this.options=e||{}}e.exports=n,n.prototype.emit=function(e){return e},n.prototype.visit=function(e){return this[e.type](e)},n.prototype.mapVisit=function(e,t){var n="";t=t||"";for(var r=0,i=e.length;r<i;r++)n+=this.visit(e[r]),t&&r<i-1&&(n+=this.emit(t));return n}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){function r(e){e=e||{},i.call(this,e),this.indentation=e.indent}var i=n(12),o=n(13);e.exports=r,o(r,i),r.prototype.compile=function(e){return this.stylesheet(e)},r.prototype.stylesheet=function(e){return this.mapVisit(e.stylesheet.rules,"\n\n")},r.prototype.comment=function(e){return this.emit(this.indent()+"/*"+e.comment+"*/",e.position)},r.prototype.import=function(e){return this.emit("@import "+e.import+";",e.position)},r.prototype.media=function(e){return this.emit("@media "+e.media,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},r.prototype.document=function(e){var t="@"+(e.vendor||"")+"document "+e.document;return this.emit(t,e.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},r.prototype.charset=function(e){return this.emit("@charset "+e.charset+";",e.position)},r.prototype.namespace=function(e){return this.emit("@namespace "+e.namespace+";",e.position)},r.prototype.supports=function(e){return this.emit("@supports "+e.supports,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},r.prototype.keyframes=function(e){return this.emit("@"+(e.vendor||"")+"keyframes "+e.name,e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.keyframes,"\n")+this.emit(this.indent(-1)+"}")},r.prototype.keyframe=function(e){var t=e.declarations;return this.emit(this.indent())+this.emit(e.values.join(", "),e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(t,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")},r.prototype.page=function(e){var t=e.selectors.length?e.selectors.join(", ")+" ":"";return this.emit("@page "+t,e.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(e.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},r.prototype["font-face"]=function(e){return this.emit("@font-face ",e.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(e.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")},r.prototype.host=function(e){return this.emit("@host",e.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")},r.prototype["custom-media"]=function(e){return this.emit("@custom-media "+e.name+" "+e.media+";",e.position)},r.prototype.rule=function(e){var t=this.indent(),n=e.declarations;return n.length?this.emit(e.selectors.map(function(e){return t+e}).join(",\n"),e.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(n,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""},r.prototype.declaration=function(e){return this.emit(this.indent())+this.emit(e.property+": "+e.value,e.position)+this.emit(";")},r.prototype.indent=function(e){return this.level=this.level||1,null!=e?(this.level+=e,""):Array(this.level).join(this.indentation||"  ")}},function(e,t,n){function r(e){e._comment=e.comment,e.map=new i,e.position={line:1,column:1},e.files={};for(var n in t)e[n]=t[n]}var i=n(16).SourceMapGenerator,o=n(16).SourceMapConsumer,a=n(26),s=n(31),l=n(33),c=n(32);e.exports=r,t.updatePosition=function(e){var t=e.match(/\n/g);t&&(this.position.line+=t.length);var n=e.lastIndexOf("\n");this.position.column=~n?e.length-n:this.position.column+e.length},t.emit=function(e,t){if(t){var n=s(t.source||"source.css");this.map.addMapping({source:n,generated:{line:this.position.line,column:Math.max(this.position.column-1,0)},original:{line:t.start.line,column:t.start.column-1}}),this.addFile(n,t)}return this.updatePosition(e),e},t.addFile=function(e,t){"string"==typeof t.content&&(Object.prototype.hasOwnProperty.call(this.files,e)||(this.files[e]=t.content))},t.applySourceMaps=function(){Object.keys(this.files).forEach(function(e){var t=this.files[e];if(this.map.setSourceContent(e,t),this.options.inputSourcemaps!==!1){var n=a.resolveSync(t,e,l.readFileSync);if(n){var r=new o(n.map),i=n.sourcesRelativeTo;this.map.applySourceMap(r,e,s(c.dirname(i)))}}},this)},t.comment=function(e){return/^# sourceMappingURL=/.test(e.comment)?this.emit("",e.position):this._comment(e)}},function(e,t,n){t.SourceMapGenerator=n(17).SourceMapGenerator,t.SourceMapConsumer=n(23).SourceMapConsumer,t.SourceNode=n(25).SourceNode},function(e,t,n){var r;r=function(e,t,r){function i(e){e||(e={}),this._file=a.getArg(e,"file",null),this._sourceRoot=a.getArg(e,"sourceRoot",null),this._skipValidation=a.getArg(e,"skipValidation",!1),this._sources=new s,this._names=new s,this._mappings=new l,this._sourcesContents=null}var o=n(18),a=n(20),s=n(21).ArraySet,l=n(22).MappingList;i.prototype._version=3,i.fromSourceMap=function(e){var t=e.sourceRoot,n=new i({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=a.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)}),e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&n.setSourceContent(t,r)}),n},i.prototype.addMapping=function(e){var t=a.getArg(e,"generated"),n=a.getArg(e,"original",null),r=a.getArg(e,"source",null),i=a.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,i),null==r||this._sources.has(r)||this._sources.add(r),null==i||this._names.has(i)||this._names.add(i),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:i})},i.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=a.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[a.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[a.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},i.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var i=this._sourceRoot;null!=i&&(r=a.relative(i,r));var o=new s,l=new s;this._mappings.unsortedForEach(function(t){if(t.source===r&&null!=t.originalLine){var s=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=s.source&&(t.source=s.source,null!=n&&(t.source=a.join(n,t.source)),null!=i&&(t.source=a.relative(i,t.source)),t.originalLine=s.line,t.originalColumn=s.column,null!=s.name&&(t.name=s.name))}var c=t.source;null==c||o.has(c)||o.add(c);var u=t.name;null==u||l.has(u)||l.add(u)},this),this._sources=o,this._names=l,e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=a.join(n,t)),null!=i&&(t=a.relative(i,t)),this.setSourceContent(t,r))},this)},i.prototype._validateMapping=function(e,t,n,r){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},i.prototype._serializeMappings=function(){for(var e,t=0,n=1,r=0,i=0,s=0,l=0,c="",u=this._mappings.toArray(),h=0,d=u.length;h<d;h++){if(e=u[h],e.generatedLine!==n)for(t=0;e.generatedLine!==n;)c+=";",n++;else if(h>0){if(!a.compareByGeneratedPositions(e,u[h-1]))continue;c+=","}c+=o.encode(e.generatedColumn-t),t=e.generatedColumn,null!=e.source&&(c+=o.encode(this._sources.indexOf(e.source)-l),l=this._sources.indexOf(e.source),c+=o.encode(e.originalLine-1-i),i=e.originalLine-1,c+=o.encode(e.originalColumn-r),r=e.originalColumn,null!=e.name&&(c+=o.encode(this._names.indexOf(e.name)-s),s=this._names.indexOf(e.name)))}return c},i.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=a.relative(t,e));var n=a.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},i.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},i.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t,r){function i(e){return e<0?(-e<<1)+1:(e<<1)+0}function o(e){var t=1===(1&e),n=e>>1;return t?-n:n}var a=n(19),s=5,l=1<<s,c=l-1,u=l;t.encode=function(e){var t,n="",r=i(e);do t=r&c,r>>>=s,r>0&&(t|=u),n+=a.encode(t);while(r>0);return n},t.decode=function(e,t){var n,r,i=0,l=e.length,h=0,d=0;do{if(i>=l)throw new Error("Expected more digits in base 64 VLQ value.");r=a.decode(e.charAt(i++)),n=!!(r&u),r&=c,h+=r<<d,d+=s}while(n);t.value=o(h),t.rest=e.slice(i)}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t,n){var r={},i={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(e,t){r[e]=t,i[t]=e}),t.encode=function(e){if(e in i)return i[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){if(e in r)return r[e];throw new TypeError("Not a valid base 64 digit: "+e)}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t,n){function r(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')}function i(e){var t=e.match(p);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function a(e){var t=e,n=i(e);if(n){if(!n.path)return e;t=n.path}for(var r,a="/"===t.charAt(0),s=t.split(/\/+/),l=0,c=s.length-1;c>=0;c--)r=s[c],"."===r?s.splice(c,1):".."===r?l++:l>0&&(""===r?(s.splice(c+1,l),l=0):(s.splice(c,2),l--));return t=s.join("/"),""===t&&(t=a?"/":"."),n?(n.path=t,o(n)):t}function s(e,t){""===e&&(e="."),""===t&&(t=".");var n=i(t),r=i(e);if(r&&(e=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),o(n);if(n||t.match(m))return t;if(r&&!r.host&&!r.path)return r.host=t,o(r);var s="/"===t.charAt(0)?t:a(e.replace(/\/+$/,"")+"/"+t);return r?(r.path=s,o(r)):s}function l(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");var n=i(e);return"/"==t.charAt(0)&&n&&"/"==n.path?t.slice(1):0===t.indexOf(e+"/")?t.substr(e.length+1):t}function c(e){return"$"+e}function u(e){return e.substr(1)}function h(e,t){var n=e||"",r=t||"";return(n>r)-(n<r)}function d(e,t,n){var r;return(r=h(e.source,t.source))?r:(r=e.originalLine-t.originalLine)?r:(r=e.originalColumn-t.originalColumn,r||n?r:(r=h(e.name,t.name))?r:(r=e.generatedLine-t.generatedLine,r?r:e.generatedColumn-t.generatedColumn))}function f(e,t,n){var r;return(r=e.generatedLine-t.generatedLine)?r:(r=e.generatedColumn-t.generatedColumn,r||n?r:(r=h(e.source,t.source))?r:(r=e.originalLine-t.originalLine)?r:(r=e.originalColumn-t.originalColumn,r?r:h(e.name,t.name)))}t.getArg=r;var p=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,m=/^data:.+\,.+$/;t.urlParse=i,t.urlGenerate=o,t.normalize=a,t.join=s,t.relative=l,t.toSetString=c,t.fromSetString=u,t.compareByOriginalPositions=d,t.compareByGeneratedPositions=f}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t,r){function i(){this._array=[],this._set={}}var o=n(20);i.fromArray=function(e,t){for(var n=new i,r=0,o=e.length;r<o;r++)n.add(e[r],t);return n},i.prototype.add=function(e,t){var n=this.has(e),r=this._array.length;n&&!t||this._array.push(e),n||(this._set[o.toSetString(e)]=r)},i.prototype.has=function(e){return Object.prototype.hasOwnProperty.call(this._set,o.toSetString(e))},i.prototype.indexOf=function(e){if(this.has(e))return this._set[o.toSetString(e)];throw new Error('"'+e+'" is not in the set.')},i.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},i.prototype.toArray=function(){return this._array.slice()},t.ArraySet=i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t,r){function i(e,t){var n=e.generatedLine,r=t.generatedLine,i=e.generatedColumn,o=t.generatedColumn;return r>n||r==n&&o>=i||a.compareByGeneratedPositions(e,t)<=0}function o(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var a=n(20);o.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},o.prototype.add=function(e){i(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},o.prototype.toArray=function(){return this._sorted||(this._array.sort(a.compareByGeneratedPositions),this._sorted=!0),this._array},t.MappingList=o}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t,r){function i(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=o.getArg(t,"version"),r=o.getArg(t,"sources"),i=o.getArg(t,"names",[]),a=o.getArg(t,"sourceRoot",null),l=o.getArg(t,"sourcesContent",null),c=o.getArg(t,"mappings"),u=o.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);r=r.map(o.normalize),this._names=s.fromArray(i,!0),this._sources=s.fromArray(r,!0),this.sourceRoot=a,this.sourcesContent=l,this._mappings=c,this.file=u}var o=n(20),a=n(24),s=n(21).ArraySet,l=n(18);i.fromSourceMap=function(e){var t=Object.create(i.prototype);return t._names=s.fromArray(e._names.toArray(),!0),t._sources=s.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.toArray().slice(),t.__originalMappings=e._mappings.toArray().slice().sort(o.compareByOriginalPositions),t},i.prototype._version=3,Object.defineProperty(i.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?o.join(this.sourceRoot,e):e},this)}}),i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),i.prototype._nextCharIsMappingSeparator=function(e){var t=e.charAt(0);return";"===t||","===t},i.prototype._parseMappings=function(e,t){for(var n,r=1,i=0,a=0,s=0,c=0,u=0,h=e,d={};h.length>0;)if(";"===h.charAt(0))r++,h=h.slice(1),i=0;else if(","===h.charAt(0))h=h.slice(1);else{if(n={},n.generatedLine=r,l.decode(h,d),n.generatedColumn=i+d.value,i=n.generatedColumn,h=d.rest,h.length>0&&!this._nextCharIsMappingSeparator(h)){if(l.decode(h,d),n.source=this._sources.at(c+d.value),c+=d.value,h=d.rest,0===h.length||this._nextCharIsMappingSeparator(h))throw new Error("Found a source, but no line and column");if(l.decode(h,d),n.originalLine=a+d.value,a=n.originalLine,n.originalLine+=1,h=d.rest,0===h.length||this._nextCharIsMappingSeparator(h))throw new Error("Found a source and line, but no column");l.decode(h,d),n.originalColumn=s+d.value,s=n.originalColumn,h=d.rest,h.length>0&&!this._nextCharIsMappingSeparator(h)&&(l.decode(h,d),n.name=this._names.at(u+d.value),u+=d.value,h=d.rest)}this.__generatedMappings.push(n),"number"==typeof n.originalLine&&this.__originalMappings.push(n)}this.__generatedMappings.sort(o.compareByGeneratedPositions),this.__originalMappings.sort(o.compareByOriginalPositions)},i.prototype._findMapping=function(e,t,n,r,i){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return a.search(e,t,i)},i.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;
continue}}t.lastGeneratedColumn=1/0}},i.prototype.originalPositionFor=function(e){var t={generatedLine:o.getArg(e,"line"),generatedColumn:o.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",o.compareByGeneratedPositions);if(n>=0){var r=this._generatedMappings[n];if(r.generatedLine===t.generatedLine){var i=o.getArg(r,"source",null);return null!=i&&null!=this.sourceRoot&&(i=o.join(this.sourceRoot,i)),{source:i,line:o.getArg(r,"originalLine",null),column:o.getArg(r,"originalColumn",null),name:o.getArg(r,"name",null)}}}return{source:null,line:null,column:null,name:null}},i.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=o.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(null!=this.sourceRoot&&(t=o.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},i.prototype.generatedPositionFor=function(e){var t={source:o.getArg(e,"source"),originalLine:o.getArg(e,"line"),originalColumn:o.getArg(e,"column")};null!=this.sourceRoot&&(t.source=o.relative(this.sourceRoot,t.source));var n=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",o.compareByOriginalPositions);if(n>=0){var r=this._originalMappings[n];return{line:o.getArg(r,"generatedLine",null),column:o.getArg(r,"generatedColumn",null),lastColumn:o.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},i.prototype.allGeneratedPositionsFor=function(e){var t={source:o.getArg(e,"source"),originalLine:o.getArg(e,"line"),originalColumn:1/0};null!=this.sourceRoot&&(t.source=o.relative(this.sourceRoot,t.source));var n=[],r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",o.compareByOriginalPositions);if(r>=0)for(var i=this._originalMappings[r];i&&i.originalLine===t.originalLine;)n.push({line:o.getArg(i,"generatedLine",null),column:o.getArg(i,"generatedColumn",null),lastColumn:o.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[--r];return n.reverse()},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.prototype.eachMapping=function(e,t,n){var r,a=t||null,s=n||i.GENERATED_ORDER;switch(s){case i.GENERATED_ORDER:r=this._generatedMappings;break;case i.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;r.map(function(e){var t=e.source;return null!=t&&null!=l&&(t=o.join(l,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}}).forEach(e,a)},t.SourceMapConsumer=i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t,n){function r(e,t,n,i,o){var a=Math.floor((t-e)/2)+e,s=o(n,i[a],!0);return 0===s?a:s>0?t-a>1?r(a,t,n,i,o):a:a-e>1?r(e,a,n,i,o):e<0?-1:e}t.search=function(e,t,n){return 0===t.length?-1:r(-1,t.length,e,t,n)}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t,r){function i(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[c]=!0,null!=r&&this.add(r)}var o=n(17).SourceMapGenerator,a=n(20),s=/(\r?\n)/,l=10,c="$$$isSourceNode$$$";i.fromStringWithSourceMap=function(e,t,n){function r(e,t){if(null===e||void 0===e.source)o.add(t);else{var r=n?a.join(n,e.source):e.source;o.add(new i(e.originalLine,e.originalColumn,r,t,e.name))}}var o=new i,l=e.split(s),c=function(){var e=l.shift(),t=l.shift()||"";return e+t},u=1,h=0,d=null;return t.eachMapping(function(e){if(null!==d){if(!(u<e.generatedLine)){var t=l[0],n=t.substr(0,e.generatedColumn-h);return l[0]=t.substr(e.generatedColumn-h),h=e.generatedColumn,r(d,n),void(d=e)}var n="";r(d,c()),u++,h=0}for(;u<e.generatedLine;)o.add(c()),u++;if(h<e.generatedColumn){var t=l[0];o.add(t.substr(0,e.generatedColumn)),l[0]=t.substr(e.generatedColumn),h=e.generatedColumn}d=e},this),l.length>0&&(d&&r(d,c()),o.add(l.join(""))),t.sources.forEach(function(e){var r=t.sourceContentFor(e);null!=r&&(null!=n&&(e=a.join(n,e)),o.setSourceContent(e,r))}),o},i.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[c]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},i.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[c]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},i.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)t=this.children[n],t[c]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},i.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[c]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},i.prototype.setSourceContent=function(e,t){this.sourceContents[a.toSetString(e)]=t},i.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][c]&&this.children[t].walkSourceContents(e);for(var r=Object.keys(this.sourceContents),t=0,n=r.length;t<n;t++)e(a.fromSetString(r[t]),this.sourceContents[r[t]])},i.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},i.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new o(e),r=!1,i=null,a=null,s=null,c=null;return this.walk(function(e,o){t.code+=e,null!==o.source&&null!==o.line&&null!==o.column?(i===o.source&&a===o.line&&s===o.column&&c===o.name||n.addMapping({source:o.source,original:{line:o.line,column:o.column},generated:{line:t.line,column:t.column},name:o.name}),i=o.source,a=o.line,s=o.column,c=o.name,r=!0):r&&(n.addMapping({generated:{line:t.line,column:t.column}}),i=null,r=!1);for(var u=0,h=e.length;u<h;u++)e.charCodeAt(u)===l?(t.line++,t.column=0,u+1===h?(i=null,r=!1):r&&n.addMapping({source:o.source,original:{line:o.line,column:o.column},generated:{line:t.line,column:t.column},name:o.name})):t.column++}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:t.code,map:n}},t.SourceNode=i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,i,o;(function(a){void function(a,s){i=[n(29),n(30)],r=s,o="function"==typeof r?r.apply(t,i):r,!(void 0!==o&&(e.exports=o))}(this,function(e,t){function n(e,t,n){a(function(){e(t,n)})}function r(e){return JSON.parse(e.replace(/^\)\]\}'/,""))}function i(e,t,i,o){var a;try{a=s(e,t)}catch(e){return n(o,e)}return!a||a.map?n(o,null,a):void i(a.url,function(e,t){if(e)return o(e);try{a.map=r(String(t))}catch(e){return o(e)}o(null,a)})}function o(e,t,n){var i=s(e,t);return!i||i.map?i:(i.map=r(String(n(i.url))),i)}function s(n,i){var o=e.getFrom(n);if(!o)return null;var a=o.match(f);if(a){var s=a[1],l=a[2],c=a[3];if(!p.test(s))throw new Error("Unuseful data uri mime type: "+(s||"text/plain"));return{sourceMappingURL:o,url:null,sourcesRelativeTo:i,map:r(";base64"===l?atob(c):decodeURIComponent(c))}}var u=t(i,o);return{sourceMappingURL:o,url:u,sourcesRelativeTo:u,map:null}}function l(e,t,r,i,o){"function"==typeof i&&(o=i,i={});var a=e.sources.length,s=!1,l={sourcesResolved:[],sourcesContent:[]},c=function(e){if(!s){if(e)return s=!0,o(e);a--,0===a&&o(null,l)}};u(e,t,i,function(e,t,i){l.sourcesResolved[i]=e,"string"==typeof t?(l.sourcesContent[i]=t,n(c,null)):r(e,function(e,t){l.sourcesContent[i]=String(t),c(e)})})}function c(e,t,n,r){var i={sourcesResolved:[],sourcesContent:[]};return u(e,t,r,function(e,t,r){i.sourcesResolved[r]=e,null!==n&&("string"==typeof t?i.sourcesContent[r]=t:i.sourcesContent[r]=String(n(e)))}),i}function u(e,n,r,i){r=r||{};for(var o,a,s=0,l=e.sources.length;s<l;s++)o=e.sourceRoot&&!r.ignoreSourceRoot?t(n,e.sourceRoot.replace(m,"/"),e.sources[s]):t(n,e.sources[s]),a=(e.sourcesContent||[])[s],i(o,a,s)}function h(e,t,n,r,o){"function"==typeof r&&(o=r,r={}),i(e,t,n,function(e,t){return e?o(e):t?void l(t.map,t.sourcesRelativeTo,n,r,function(e,n){return e?o(e):(t.sourcesResolved=n.sourcesResolved,t.sourcesContent=n.sourcesContent,void o(null,t))}):o(null,null)})}function d(e,t,n,r){var i=o(e,t,n);if(!i)return null;var a=c(i.map,i.sourcesRelativeTo,n,r);return i.sourcesResolved=a.sourcesResolved,i.sourcesContent=a.sourcesContent,i}var f=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,p=/^(?:application|text)\/json$/,m=/\/?$/;return{resolveSourceMap:i,resolveSourceMapSync:o,resolveSources:l,resolveSourcesSync:c,resolve:h,resolveSync:d}})}).call(t,n(27).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(28),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return m[p]=r,f(p),p++}function i(e){delete m[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(v)setTimeout(a,0,e);else{var t=m[e];if(t){v=!0;try{o(t)}finally{i(e),v=!1}}}}function s(){f=function(e){t.nextTick(function(){a(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),f=function(n){e.postMessage(t+n,"*")}}function u(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},f=function(t){e.port2.postMessage(t)}}function h(){var e=g.documentElement;f=function(t){var n=g.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function d(){f=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var f,p=1,m={},v=!1,g=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():l()?c():e.MessageChannel?u():g&&"onreadystatechange"in g.createElement("script")?h():d(),y.setImmediate=r,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(4))},function(e,t,n){var r,i;void function(o,a){r=a,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i))}(this,function(){var e=/[#@] sourceMappingURL=([^\s'"]*)/,t=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+e.source+")\\s*\\*/|//(?:"+e.source+"))\\s*$");return{regex:t,_innerRegex:e,getFrom:function(e){var n=e.match(t);return n?n[1]||n[2]||"":null},existsIn:function(e){return t.test(e)},removeFrom:function(e){return e.replace(t,"")},insertBefore:function(e,n){var r=e.match(t);return r?e.slice(0,r.index)+n+e.slice(r.index):e+n}}})},function(e,t,n){var r,i;void function(o,a){r=a,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i))}(this,function(){function e(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(t,n.firstChild);for(var r,i=document.createElement("a"),o=1;o<e;o++)i.href=arguments[o],r=i.href,t.href=r;return n.removeChild(t),r}return e})},function(e,t,n){function r(e){return"\\"===i.sep?e.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):e}var i=n(32);e.exports=r},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===a(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}for(var c=[],l=s;l<i.length;l++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(4))},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),o=r(i),a=(0,o.default)({tag:function(e){return e.isMesh&&e.geometry.type||e.type},parent:"parent",children:"children",class:function(e){return e.userData.className||""},attr:function(e){return function(t){return e.hasOwnProperty(t)?e[t]:e.userData[t]}}});t.default=a},function(e,t,n){function r(e,t){return function(n){return a(n,i(e),t||M)}}function i(e){for(var t in e)o(e,t)&&(e[t]=Function("return function(node, attr) { return node."+e[t]+" }"),e[t]=e[t]());return e}function o(e,t){return e.hasOwnProperty(t)&&"string"==typeof e[t]}function a(e,t,n){function r(e){var t;return"comma"===e.type?void x.unshift(y=[]):"op"===e.type||"any-child"===e.type?(y.unshift(g[e.data]),void y.unshift(o())):(y[0]=y[0]||o(),t=y[0],"!"===e.type?void(t.subject=x[0].subject=!0):void t.push("class"===e.type?a(e.type,e.data):"attr"===e.type?c(e):":"===e.type||"::"===e.type?v(e):"*"===e.type?Boolean:u(e.type,e.data,n)))}function i(e,t){function n(e){for(var t;e.length;)t=e.shift(),l.indexOf(t)===-1&&l.push(t)}var r,i,o,a,l;o=e,l=[];for(var c=0,u=x.length;c<u;++c){y=x[c],r=s,i=y.length,e=o,a=[];for(var h=0;h<i&&(e=r(e,y[h],a),e);h+=2)r=y[h+1];if(h>=i){if(t)return!0;n(y.subject?a:[o])}}return!t&&(!!l.length&&(1===l.length?l[0]:l))}function o(){function e(t,n){for(var r=0,i=e.bits.length;r<i;++r)if(!e.bits[r](t))return!1;return e.subject&&n.push(t),!0}return e.bits=[],e.subject=!1,e.push=function(t){e.bits.push(t)},e}function a(e,n){return function(r){var i=t[e](r);return i=Array.isArray(i)?i:i?i.toString().split(/\s+/):[],i.indexOf(n)>=0}}function c(e){return e.data.lhs?h(t.attr,e.data.lhs,e.data.cmp,e.data.rhs):h(t.attr,e.data)}function u(e,n,r){return function(i){return r(e,t[e](i),n)}}function d(e,n,r){do e=t.parent(e);while(e&&!n(e,r));return e}function f(e,n,r){return e=t.parent(e),e&&n(e,r)?e:null}function p(e,n,r){var i,o=t.parent(e),a=0;i=t.children(o);for(var s=0,l=i.length;s<l;++s)if(i[s]===e){a=s;break}return i[a-1]&&n(i[a-1],r)?i[a-1]:null}function m(e,n,r){var i,o=t.parent(e);i=t.children(o);for(var a=0,s=i.length;a<s;++a){if(i[a]===e)return null;if(n(i[a],r))return i[a]}return null}function v(e){return l(t,e.data,n)}var g,y,b=S(),x=[[]];return y=x[0],g={"":d,">":f,"+":p,"~":m},b.on("data",r).end(e),i}function s(e,t,n){return t(e,n)?e:null}function l(e,t,n){switch(t){case"empty":return p(e);case"first-child":return d(e);case"last-child":return f(e);case"root":return m(e)}return 0===t.indexOf("contains")?v(e,t.slice(9,-1)):0===t.indexOf("any")?u(e,t.slice(4,-1),n):0===t.indexOf("not")?c(e,t.slice(4,-1),n):0===t.indexOf("nth-child")?g(e,t.slice(10,-1)):function(){return!1}}function c(e,t,n){function r(e){return!i(e,!0)}var i=a(t,e,n);return r}function u(e,t,n){var r=a(t,e,n);return r}function h(e,t,n,r){return function(i){var o=e(i,t);return n?1===n.length?o==r:void 0!==o&&null!==o&&E[n.charAt(0)](o,r):!!o}}function d(e){return function(t){return e.children(e.parent(t))[0]===t}}function f(e){return function(t){var n=e.children(e.parent(t));return n[n.length-1]===t}}function p(e){return function(t){return 0===e.children(t).length}}function m(e){return function(t){return!e.parent(t)}}function v(e,t){return function(n){return e.contents(n).indexOf(t)!==-1}}function g(e,t){var n=function(){return!1};"odd"==t?t="2n+1":"even"==t&&(t="2n");var r=/( ?([-|\+])?(\d*)n)? ?((\+|-)? ?(\d+))? ?/,i=t.match(r);if(i){var o=0;if(i[1]){var a="-"!=i[2];o=parseInt(""==i[3]?1:i[3]),o*=a?1:-1}var s=0;if(i[4]){s=parseInt(i[6]);var l="-"!=i[5];s*=l?1:-1}0==o?0!=s&&(n=function(e,t){return e[s-1]===t}):n=function(e,t){for(var n=[],r=e.length,i=1;i<=r;i++){var a=(i-s)%o==0;a&&(o>0?n.push(i):(i-s)/o>=0&&n.push(i))}for(var l=0;l<n.length;l++)if(e[n[l]-1]===t)return!0;return!1}}return function(t){var r=e.children(e.parent(t));return n(r,t)}}function y(e,t){return e.slice(e.length-t.length)===t}function b(e,t){return e.slice(0,t.length)===t}function x(e,t){return e.indexOf(t)>-1}function w(e,t){return e.split(/\s+/).indexOf(t)>-1}function _(e,t){return e.split("-").indexOf(t)>-1}function M(e,t,n){return t===n}e.exports=r;var S=n(36),E={$:y,"^":b,"*":x,"~":w,"|":_}},function(e,t,n){function r(){function e(e){for(H=H.concat(e.split("")),O=H.length;V<O&&(B=H[V++]);)switch(G){case d:n();break;case s:S();break;case f:M();break;case a:C();break;case l:A();break;case c:L();break;case h:case u:E();break;case o:T();break;case x:case y:case p:R()}H=H.slice(V)}function t(t){arguments.length&&e(t),j.length&&k.queue(P())}function n(){switch(!0){case"#"===B:G=x;break;case"."===B:G=p;break;case":"===B:G=h;break;case"["===B:G=a;break;case"!"===B:r();break;case"*"===B:w();break;case","===B:_();break;case/[>\+~]/.test(B):G=f;break;case/\s/.test(B):G=s;break;case/[\w\d\-_]/.test(B):G=y,--V}}function r(){G=g,j=["!"],k.queue(P()),G=d}function w(){G=b,j=["*"],k.queue(P()),G=d}function _(){G=m,j=[","],k.queue(P()),G=d}function M(){return/[>\+~]/.test(B)?j.push(B):void(/\s/.test(B)||(k.queue(P()),G=d,--V))}function S(){if(!/\s/.test(B)){if(/[>\+~]/.test(B))return--V,G=f;k.queue(P()),G=d,--V}}function E(){if(U=G,R(!0),G===d){if("("===B)return I=j.join(""),G=o,j.length=0,D=1,void++V;G=h,k.queue(P()),G=d}}function T(){if(0!==j.length||N||!(N=/['"]/.test(B)?B:null)){if(N)return z||B!==N?"\\"===B?void(z?j.push(B):z=!0):(z=!1,void j.push(B)):void(N=null);j.push(B),"("===B?++D:")"===B&&--D,D||(j.pop(),k.queue({type:U,data:I+"("+j.join("")+")"}),G=d,I=U=F=null,j.length=0)}}function C(){if(R(!0),G===d){if("]"===B)return G=v,k.queue(P()),void(G=d);I=j.join(""),j.length=0,G=l}}function A(){if(/[=~|$^*]/.test(B)&&j.push(B),2===j.length||"="===B)return F=j.join(""),j.length=0,G=c,void(N=null)}function L(){if(j.length||N||!(N=/['"]/.test(B)?B:null)){if(N)return z||B!==N?"\\"===B?(z&&j.push(B),void(z=!z)):(z=!1,void j.push(B)):void(N=null);R(!0),G===d&&(k.queue({type:v,data:{lhs:I,rhs:j.join(""),cmp:F}}),G=d,I=U=F=null,j.length=0)}}function R(e){return/[^\d\w\-_]/.test(B)&&!z?void("\\"===B?z=!0:(!e&&k.queue(P()),G=d,--V)):(z=!1,void j.push(B))}function P(){var e=j.join("");return j.length=0,{type:G,data:e}}var k,O,N,D,I,U,F,B,z=!1,j=[],G=d,H=[],V=0;return k=i(e,t)}e.exports=r;var i=n(37),o="pseudo-start",a="attr-start",s="any-child",l="attr-comp",c="attr-end",u="::",h=":",d="(ready)",f="op",p="class",m="comma",v="attr",g="!",y="tag",b="*",x="id"},function(e,t,n){(function(r){function i(e,t,n){function i(){for(;c.length&&!h.paused;){var e=c.shift();if(null===e)return h.emit("end");h.emit("data",e)}}function a(){h.writable=!1,t.call(h),!h.readable&&h.autoDestroy&&h.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var s=!1,l=!1,c=[],u=!1,h=new o;return h.readable=h.writable=!0,h.paused=!1,h.autoDestroy=!(n&&n.autoDestroy===!1),h.write=function(t){return e.call(this,t),!h.paused},h.queue=h.push=function(e){return u?h:(null===e&&(u=!0),c.push(e),i(),h)},h.on("end",function(){h.readable=!1,!h.writable&&h.autoDestroy&&r.nextTick(function(){h.destroy()})}),h.end=function(e){if(!s)return s=!0,arguments.length&&h.write(e),a(),h},h.destroy=function(){if(!l)return l=!0,s=!0,c.length=0,h.writable=h.readable=!1,h.emit("close"),h},h.pause=function(){if(!h.paused)return h.paused=!0,h},h.resume=function(){return h.paused&&(h.paused=!1,h.emit("resume")),i(),h.paused||h.emit("drain"),h},h}var o=n(38);t=e.exports=i,i.through=i}).call(t,n(4))},function(e,t,n){function r(){i.call(this)}e.exports=r;var i=n(39).EventEmitter,o=n(13);o(r,i),r.Readable=n(40),r.Writable=n(57),r.Duplex=n(58),r.Transform=n(59),r.PassThrough=n(60),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,e.end())}function a(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(l(),0===i.listenerCount(this,"error"))throw e}function l(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",l),c.removeListener("close",l),e.removeListener("close",l)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",a));var u=!1;return c.on("error",s),e.on("error",s),c.on("end",l),c.on("close",l),e.on("close",l),e.emit("pipe",c),e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,l=0;l<i;l++)c[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(function(r){var i=function(){try{return n(38)}catch(e){}}();t=e.exports=n(41),t.Stream=i||t,t.Readable=t,t.Writable=n(52),t.Duplex=n(51),t.Transform=n(55),t.PassThrough=n(56),!r.browser&&"disable"===r.env.READABLE_STREAM&&i&&(e.exports=i)}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function r(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?P(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function i(e,t){L=L||n(51),e=e||{},this.objectMode=!!e.objectMode,t instanceof L&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(B||(B=n(54).StringDecoder),this.decoder=new B(e.encoding),this.encoding=e.encoding)}function o(e){return L=L||n(51),this instanceof o?(this._readableState=new i(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void k.call(this)):new o(e)}function a(e,t,n,r,i){var o=u(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,h(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var l=new Error("stream.unshift() after end event");e.emit("error",l)}else{var c;!t.decoder||i||r||(n=t.decoder.write(n),c=!t.objectMode&&0===n.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&d(e))),p(e,t)}else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function l(e){return e>=j?e=j:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=l(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function u(e,t){var n=null;return N.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function h(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,d(e)}}function d(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(F("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?R(f,e):f(e))}function f(e){F("emit readable"),e.emit("readable"),x(e)}function p(e,t){t.readingMore||(t.readingMore=!0,R(m,e,t))}function m(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(F("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;F("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&O(e,"data")&&(t.flowing=!0,x(e))}}function g(e){F("readable nexttick read 0"),e.read(0)}function y(e,t){t.resumeScheduled||(t.resumeScheduled=!0,R(b,e,t))}function b(e,t){t.reading||(F("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(F("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=_(e,t.buffer,t.decoder),n}function _(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?M(e,t):S(e,t),r}function M(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(i+=a===o.length?o:o.slice(0,e),e-=a,0===e){a===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++r}return t.length-=r,i}function S(e,t){var n=D.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),e-=a,0===e){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}function E(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,R(T,t,e))}function T(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function A(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;
return-1}e.exports=o;var L,R=n(42),P=n(43);o.ReadableState=i;var k,O=(n(39).EventEmitter,function(e,t){return e.listeners(t).length});!function(){try{k=n(38)}catch(e){}finally{k||(k=n(39).EventEmitter)}}();var N=n(44).Buffer,D=n(47),I=n(48);I.inherits=n(13);var U=n(49),F=void 0;F=U&&U.debuglog?U.debuglog("stream"):function(){};var B,z=n(50);I.inherits(o,k),o.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=D.from(e,t),t="")),a(this,n,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return a(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(e){return B||(B=n(54).StringDecoder),this._readableState.decoder=new B(e),this._readableState.encoding=e,this};var j=8388608;o.prototype.read=function(e){F("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return F("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):d(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&E(this),null;var r=t.needReadable;F("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,F("length less than watermark",r)),t.ended||t.reading?(r=!1,F("reading or ended",r)):r&&(F("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=c(n,t)));var i;return i=e>0?w(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&E(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,n){function i(e){F("onunpipe"),e===d&&a()}function o(){F("onend"),e.end()}function a(){F("cleanup"),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("drain",g),e.removeListener("error",l),e.removeListener("unpipe",i),d.removeListener("end",o),d.removeListener("end",a),d.removeListener("data",s),y=!0,!f.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){F("ondata"),b=!1;var n=e.write(t);!1!==n||b||((1===f.pipesCount&&f.pipes===e||f.pipesCount>1&&A(f.pipes,e)!==-1)&&!y&&(F("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,b=!0),d.pause())}function l(t){F("onerror",t),h(),e.removeListener("error",l),0===O(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",u),h()}function u(){F("onfinish"),e.removeListener("close",c),h()}function h(){F("unpipe"),d.unpipe(e)}var d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,F("pipe count=%d opts=%j",f.pipesCount,n);var p=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,m=p?o:a;f.endEmitted?R(m):d.once("end",m),e.on("unpipe",i);var g=v(d);e.on("drain",g);var y=!1,b=!1;return d.on("data",s),r(e,"error",l),e.once("close",c),e.once("finish",u),e.emit("pipe",d),f.flowing||(F("pipe resume"),d.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=A(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var n=k.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&d(this,r):R(g,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(F("resume"),e.flowing=!0,y(this,e)),this},o.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(F("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(F("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return C(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){F("wrapped _read",t),n&&(n=!1,e.resume())},r},o._fromList=w}).call(t,n(4))},function(e,t,n){(function(t){"use strict";function n(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(t,n(4))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,r):"string"==typeof t?h(e,t,n):p(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return l(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function u(e,t){if(l(t),e=o(e,t<0?0:0|m(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function d(e,t){var n=t.length<0?0:0|m(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=d(e,t),e}function p(e,t){if(a.isBuffer(t)){var n=0|m(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Z(t.length)?o(e,0):d(e,t);if("Buffer"===t.type&&Q(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),a.alloc(+e)}function g(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return L(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function x(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var c;if(i){var u=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===l)return u*a}else u!==-1&&(c-=c-u),u=-1}else for(n+l>s&&(n=s-l),c=n;c>=0;c--){for(var h=!0,d=0;d<l;d++)if(o(e,c+d)!==o(t,d)){h=!1;break}if(h)return c}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function M(e,t,n,r){return $(W(t,e.length-n),e,n,r)}function S(e,t,n,r){return $(X(t),e,n,r)}function E(e,t,n,r){return S(e,t,n,r)}function T(e,t,n,r){return $(Y(t),e,n,r)}function C(e,t,n,r){return $(q(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function L(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var l,c,u,h;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128===(192&l)&&(h=(31&o)<<6|63&l,h>127&&(a=h));break;case 3:l=e[i+1],c=e[i+2],128===(192&l)&&128===(192&c)&&(h=(15&o)<<12|(63&l)<<6|63&c,h>2047&&(h<55296||h>57343)&&(a=h));break;case 4:l=e[i+1],c=e[i+2],u=e[i+3],128===(192&l)&&128===(192&c)&&128===(192&u)&&(h=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u,h>65535&&h<1114112&&(a=h))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return R(r)}function R(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=V(e[o]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function G(e){if(e=H(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function X(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function Y(e){return K.toByteArray(G(e))}function $(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Z(e){return e!==e}var K=n(45),J=n(46),Q=n(43);t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return c(null,e,t,n)},a.allocUnsafe=function(e){return u(null,e)},a.allocUnsafeSlow=function(e){return u(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?L(this,0,e):y.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,l=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n),h=0;h<l;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},a.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return M(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),J.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),J.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),J.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),J.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;I(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;I(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:W(new a(e,r).toString()),l=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-n(e)}function i(e){var t,r,i,o,a,s,l=e.length;a=n(e),s=new u(3*l/4-a),i=a>0?l-4:l;var h=0;for(t=0,r=0;t<i;t+=4,r+=3)o=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],s[h++]=o>>16&255,s[h++]=o>>8&255,s[h++]=255&o;return 2===a?(o=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,s[h++]=255&o):1===a&&(o=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,s[h++]=o>>8&255,s[h++]=255&o),s}function o(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function a(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(o(r));return i.join("")}function s(e){for(var t,n=e.length,r=n%3,i="",o=[],s=16383,c=0,u=n-r;c<u;c+=s)o.push(a(e,c,c+s>u?u:c+s));return 1===r?(t=e[n-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=r,t.toByteArray=i,t.fromByteArray=s;for(var l=[],c=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,f=h.length;d<f;++d)l[d]=h[d],c[h.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:(f?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+h>=1?d/l:d*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+f]=255&a,f+=p,a/=256,c-=8);e[n+f-p]|=128*m}},function(e,t,n){(function(e){"use strict";var r=n(44),i=r.Buffer,o=r.SlowBuffer,a=r.kMaxLength||2147483647;t.alloc=function(e,t,n){if("function"==typeof i.alloc)return i.alloc(e,t,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");var r=n,o=t;void 0===o&&(r=void 0,o=0);var s=new i(e);if("string"==typeof o)for(var l=new i(o,r),c=l.length,u=-1;++u<e;)s[u]=l[u%c];else s.fill(o);return s},t.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");return new i(e)},t.from=function(t,n,r){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,n,r);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,n);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new i(t);"undefined"==typeof o&&(o=0);var a=r;if("undefined"==typeof a&&(a=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(a>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(t.slice(o,o+a))}if(i.isBuffer(t)){var s=new i(t.length);return t.copy(s,0,0,t.length),s}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=a)throw new RangeError("size is too large");return new o(e)}}).call(t,function(){return this}())},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function c(e){return void 0===e}function u(e){return"[object RegExp]"===v(e)}function h(e){return"object"==typeof e&&null!==e}function d(e){return"[object Date]"===v(e)}function f(e){return"[object Error]"===v(e)||e instanceof Error}function p(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function v(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=l,t.isUndefined=c,t.isRegExp=u,t.isObject=h,t.isDate=d,t.isError=f,t.isFunction=p,t.isPrimitive=m,t.isBuffer=e.isBuffer}).call(t,n(44).Buffer)},function(e,t){},function(e,t,n){"use strict";function r(){this.head=null,this.tail=null,this.length=0}var i=(n(44).Buffer,n(47));e.exports=r,r.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},r.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},r.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},r.prototype.clear=function(){this.head=this.tail=null,this.length=0},r.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},r.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),n=this.head,r=0;n;)n.data.copy(t,r),r+=n.data.length,n=n.next;return t}},function(e,t,n){"use strict";function r(e){return this instanceof r?(c.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var s=n(42),l=n(48);l.inherits=n(13);var c=n(41),u=n(52);l.inherits(r,c);for(var h=a(u.prototype),d=0;d<h.length;d++){var f=h[d];r.prototype[f]||(r.prototype[f]=u.prototype[f])}},function(e,t,n){(function(t,r){"use strict";function i(){}function o(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function a(e,t){S=S||n(51),e=e||{},this.objectMode=!!e.objectMode,t instanceof S&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new M(this)}function s(e){return S=S||n(51),k.call(s,this)||this instanceof S?(this._writableState=new a(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void A.call(this)):new s(e)}function l(e,t){var n=new Error("write after end");e.emit("error",n),E(t,n)}function c(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):R.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),E(r,o),i=!1),i}function u(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=P.from(t,n)),t}function h(e,t,n,r,i){n=u(t,n,r),R.isBuffer(n)&&(r="buffer");var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new o(n,r,i),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,a,n,r,i);return s}function d(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function f(e,t,n,r,i){--t.pendingcb,n?E(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(p(n),t)f(e,n,r,t,i);else{var o=b(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||y(e,n),r?T(v,e,n,o,i):v(e,n,o,i)}}function v(e,t,n,r){n||g(e,t),t.pendingcb--,r(),w(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function y(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;d(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new M(t)}else{for(;n;){var s=n.chunk,l=n.encoding,c=n.callback,u=t.objectMode?1:s.length;if(d(e,t,!1,u,s,l,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function b(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=b(t);return n&&(0===t.pendingcb?(x(e,t),t.finished=!0,e.emit("finish")):x(e,t)),n}function _(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?E(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function M(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=s;var S,E=n(42),T=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:E;s.WritableState=a;var C=n(48);C.inherits=n(13);var A,L={deprecate:n(53)};!function(){try{A=n(38)}catch(e){}finally{A||(A=n(39).EventEmitter)}}();var R=n(44).Buffer,P=n(47);C.inherits(s,A),a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:L.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var k;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!k.call(this,e)||e&&e._writableState instanceof a}})):k=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,n){var r=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),R.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=i),r.ended?l(this,n):c(this,r,e,n)&&(r.pendingcb++,o=h(this,r,e,t,n)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},s.prototype.setDefaultEncoding=function(e){
if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||_(this,r,n)}}).call(t,n(4),n(27).setImmediate)},function(e,t){(function(t){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,function(){return this}())},function(e,t,n){function r(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=n(44).Buffer,l=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(t)})}function a(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var s=n(51),l=n(48);l.inherits=n(13),l.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,n){"use strict";function r(e){return this instanceof r?void i.call(this,e):new r(e)}e.exports=r;var i=n(55),o=n(48);o.inherits=n(13),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(52)},function(e,t,n){e.exports=n(51)},function(e,t,n){e.exports=n(55)},function(e,t,n){e.exports=n(56)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MeshPhongMaterial",n=e.type||t,r=Object.assign({},e),i=void 0;if(!c[n]||!c[n].prototype.isMaterial)throw new Error('Invalid material type "'+n+'"');return d.forEach(function(e){delete r[e]}),Object.keys(r).forEach(function(e){if(e in y){var t=y[e],n=r[e],i=t&&t.cast||t.default.constructor;t.enum&&t.enum.indexOf(n)===-1&&(n=t.default),r[e]=i(n)}}),i=new c[n],i.setValues(r),i}function s(e){var t={},n=(0,h.default)(e).nodes.filter(function(e){var t=e.type;return"space"!==t}),r=void 0;if("function"!==n[0].type||"url"!==n[0].value)return console.error('Expected texture declaration value to begin with "url(...)"'),console.log(n),null;r=n[0].nodes[0].value,n.forEach(function(e){var n=e.type,r=e.value;"word"===n&&(isNaN(Number(r))?v.indexOf(r)>=0?t.mapping=p(r):g.indexOf(r)>=0&&(r=p(r),t.wrapS?t.wrapT=r:t.wrapS=t.wrapT=r):(r=Number(r),t.repeat?1===t.repeat.length?t.repeat.push(r):t.offset?t.offset.push(r):t.offset=[r]:t.repeat=[r]))}),t.repeat&&(t.repeat=new(Function.prototype.bind.apply(c.Vector2,[null].concat(o(t.repeat)))));var i=Object.assign((new c.TextureLoader).load(r),t);return i}Object.defineProperty(t,"__esModule",{value:!0}),t.PROPERTIES=t.BLACKLIST=void 0,t.default=a;var l=n(5),c=i(l),u=n(62),h=r(u),d=t.BLACKLIST=["id","uuid","name","type"],f=function(e){return Math.max(0,Math.min(1,Number(e)))},p=function(e){return c[e]},m=function(e){var t=e.match(/^(#|0x)[0-9a-z]$/i);return t&&(e=Number(t[1])),new c.Color(e)},v=["UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping"],g=["RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping"],y=t.PROPERTIES={fog:{default:!0,cast:Boolean},lights:{default:!0,cast:Boolean},blending:{default:"NormalBlending",cast:p,enum:["NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending"]},side:{default:"FrontSide",cast:p,enum:["FrontSide","BackSide","DoubleSide"]},shading:{default:"SmoothShading",cast:p,enum:["FlatShading","SmoothShading"]},vertexColors:{default:"NoColors",cast:p,enum:["NoColors","VertexColors","FaceColors"]},opacity:{default:1,cast:f},transparent:{default:!1,cast:Boolean},blendSrc:{default:"SrcAlphaFactor",cast:p,enum:["ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor"]},blendDst:{default:"OneMinusSrcAlphaFactor",cast:p,enum:["ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor"]},blendEquation:{default:"AddEquation",cast:p,enum:["AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation"]},depthFunc:{default:"LessEqualDepth",cast:p,enum:["NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth"]},depthTest:{default:!0,cast:Boolean},depthWrite:{default:!0,cast:Boolean},alphaTest:{default:0,cast:f},premultipliedAlpha:{default:!1,cast:Boolean},overdraw:{default:0,cast:f},visible:{default:!0,cast:Boolean},color:{default:new c.Color(16777215),cast:m},map:{default:null,cast:s},aoMap:{default:null,cast:s},specularMap:{default:null,cast:s},alphaMap:{default:null,cast:s},envMap:{default:null,cast:s},reflectivity:{default:1,cast:f},refractionRatio:{default:.98,cast:f},wireframe:{default:!1,cast:Boolean},wireframeLinewidth:{default:1,cast:f},wireframeLinecap:{default:"round",cast:p,enum:["butt","round","square"]},wireframeLinejoin:{default:"round",cast:p,enum:["round","bevel","miter"]},skinning:{default:!1,cast:Boolean},morphTargets:{default:!1,cast:Boolean},scale:{default:1},linewidth:{default:1},linecap:{default:"round",cast:p,enum:["butt","round","square"]},linejoin:{default:"round",cast:p,enum:["round","bevel","miter"]},dashSize:{default:3},gapSize:{default:1},lightMap:{default:null,cast:s},emissiveMap:{default:null,cast:s},bumpMap:{default:null,cast:s},normalMap:{default:null,cast:s},displacementMap:{default:null,cast:s},specular:{default:new c.Color(1118481),cast:m},shininess:{default:30,cast:Number},emissive:{default:new c.Color(0),cast:m},emissiveIntensity:{default:1,cast:Number},morphNormals:{default:!1,cast:Boolean},size:{default:1,cast:Number},sizeAttenuation:{default:!0,cast:Boolean}}},function(e,t,n){function r(e){return this instanceof r?(this.nodes=i(e),this):new r(e)}var i=n(63),o=n(64),a=n(65);r.prototype.toString=function(){return Array.isArray(this.nodes)?a(this.nodes):""},r.prototype.walk=function(e,t){return o(this.nodes,e,t),this},r.unit=n(66),r.walk=o,r.stringify=a,e.exports=r},function(e,t){var n="(".charCodeAt(0),r=")".charCodeAt(0),i="'".charCodeAt(0),o='"'.charCodeAt(0),a="\\".charCodeAt(0),s="/".charCodeAt(0),l=",".charCodeAt(0),c=":".charCodeAt(0),u="*".charCodeAt(0);e.exports=function(e){for(var t,h,d,f,p,m,v,g,y=[],b=e,x=0,w=b.charCodeAt(x),_=b.length,M=[{nodes:y}],S=0,E="",T="",C="";x<_;)if(w<=32){t=x;do t+=1,w=b.charCodeAt(t);while(w<=32);f=b.slice(x,t),d=y[y.length-1],w===r&&S?C=f:d&&"div"===d.type?d.after=f:w===l||w===c||w===s&&b.charCodeAt(t+1)!==u?T=f:y.push({type:"space",sourceIndex:x,value:f}),x=t}else if(w===i||w===o){t=x,h=w===i?"'":'"',f={type:"string",sourceIndex:x,quote:h};do if(p=!1,t=b.indexOf(h,t+1),~t)for(m=t;b.charCodeAt(m-1)===a;)m-=1,p=!p;else b+=h,t=b.length-1,f.unclosed=!0;while(p);f.value=b.slice(x+1,t),y.push(f),x=t+1,w=b.charCodeAt(x)}else if(w===s&&b.charCodeAt(x+1)===u)f={type:"comment",sourceIndex:x},t=b.indexOf("*/",x),t===-1&&(f.unclosed=!0,t=b.length),f.value=b.slice(x+2,t),y.push(f),x=t+2,w=b.charCodeAt(x);else if(w===s||w===l||w===c)f=b[x],y.push({type:"div",sourceIndex:x-T.length,value:f,before:T,after:""}),T="",x+=1,w=b.charCodeAt(x);else if(n===w){t=x;do t+=1,w=b.charCodeAt(t);while(w<=32);if(f={type:"function",sourceIndex:x-E.length,value:E,before:b.slice(x+1,t)},x=t,"url"===E&&w!==i&&w!==o){t-=1;do if(p=!1,t=b.indexOf(")",t+1),~t)for(m=t;b.charCodeAt(m-1)===a;)m-=1,p=!p;else b+=")",t=b.length-1,f.unclosed=!0;while(p);v=t;do v-=1,w=b.charCodeAt(v);while(w<=32);x!==v+1?f.nodes=[{type:"word",sourceIndex:x,value:b.slice(x,v+1)}]:f.nodes=[],f.unclosed&&v+1!==t?(f.after="",f.nodes.push({type:"space",sourceIndex:v+1,value:b.slice(v+1,t)})):f.after=b.slice(v+1,t),x=t+1,w=b.charCodeAt(x),y.push(f)}else S+=1,f.after="",y.push(f),M.push(f),y=f.nodes=[],g=f;E=""}else if(r===w&&S)x+=1,w=b.charCodeAt(x),g.after=C,C="",S-=1,M.pop(),g=M[S],y=g.nodes;else{t=x;do w===a&&(t+=1),t+=1,w=b.charCodeAt(t);while(t<_&&!(w<=32||w===i||w===o||w===l||w===c||w===s||w===n||w===r&&S));f=b.slice(x,t),n===w?E=f:y.push({type:"word",sourceIndex:x,value:f}),x=t}for(x=M.length-1;x;x-=1)M[x].unclosed=!0;return M[0].nodes}},function(e,t){e.exports=function e(t,n,r){var i,o,a,s;for(i=0,o=t.length;i<o;i+=1)a=t[i],r||(s=n(a,i,t)),s!==!1&&"function"===a.type&&Array.isArray(a.nodes)&&e(a.nodes,n,r),r&&n(a,i,t)}},function(e,t){function n(e,t){var n,i,o=e.type,a=e.value;return t&&void 0!==(i=t(e))?i:"word"===o||"space"===o?a:"string"===o?(n=e.quote||"",n+a+(e.unclosed?"":n)):"comment"===o?"/*"+a+(e.unclosed?"":"*/"):"div"===o?(e.before||"")+a+(e.after||""):Array.isArray(e.nodes)?(n=r(e.nodes),"function"!==o?n:a+"("+(e.before||"")+n+(e.after||"")+(e.unclosed?"":")")):a}function r(e,t){var r,i;if(Array.isArray(e)){for(r="",i=e.length-1;~i;i-=1)r=n(e[i],t)+r;return r}return n(e,t)}e.exports=r},function(e,t){var n="-".charCodeAt(0),r="+".charCodeAt(0),i=".".charCodeAt(0);e.exports=function(e){for(var t,o=0,a=e.length,s=!1,l=!1,c="";o<a;){if(t=e.charCodeAt(o),t>=48&&t<=57)c+=e[o],l=!0;else if(t===i){if(s)break;s=!0,c+=e[o]}else{if(t!==r&&t!==n)break;if(0!==o)break;c+=e[o]}o+=1}return!!l&&{number:c,unit:e.slice(o)}}},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n){var i=new Proxy(e,{set:function(e,i,o){var a=!t||t.indexOf(i)!==-1;return a&&o instanceof Object&&(o=r(o,null,n)),e[i]=o,a&&n(i,e[i],o),!0}});return t&&t.forEach(function(t){var i=e[t];i instanceof Object&&(e[t]=r(i,null,n))}),i}function i(e,t){function o(e){e.addEventListener("propertyChanged",l),e.addEventListener("childUpdated",l),e.addEventListener("childrenUpdated",l),e.addEventListener("removed",function(t){e.removeEventListener("propertyChanged",l),e.removeEventListener("childUpdated",l),e.removeEventListener("childrenUpdated",l),l(t)})}var a=r(e,t,function(t,n,r){e.dispatchEvent({type:"propertyChanged",property:t,original:n,value:r})}),s=e.add.bind(e),l=function(t){e.dispatchEvent({type:"childUpdated",context:t.context||t.target})};return e.children=e.children.map(function(e){return i(e,t)}),e.children.forEach(o),e.add=function(){for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];a.forEach(o),s.apply(void 0,n(a.map(function(e){return i(e,t)}))),e.dispatchEvent({type:"childrenUpdated",context:e})},a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=r(i),a=n(69),s=r(a),l=function(e,t){return e("i",{class:"fa fa-"+t})};t.default=o.default.component("live-editor",{props:["title","mode","value"],data:function(){return{autoUpdate:!0,value_:null}},created:function(){this.value_=this.value},methods:{onToggleAutoUpdate:function(){this.autoUpdate=!this.autoUpdate},onChange:function(e){this.value_=e,this.autoUpdate&&this.$emit("change",e)},onUpdate:function(){this.$emit("change",this.value_)},onReset:function(){this.value_=this.value}},render:function(e){var t=this.title,n=this.mode,r=this.autoUpdate;return e("div",[e("h2",t),e("div",{class:"buttons"},[e("button",{on:{click:this.onReset}},[l(e,"undo"),"Reset"]),!r&&e("button",{on:{click:this.onUpdate},key:"update"},[l(e,"play"),"Update"]),e("button",{on:{click:this.onToggleAutoUpdate}},[l(e,"toggle-"+(r?"on":"off")),"Auto-update"])]),e(s.default,{class:"editor",props:{mode:n,value:this.value_},on:{change:this.onChange}})])}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=r(i),a=n(70),s=r(a);n(71),n(75),n(77),n(78),t.default=o.default.component("codemirror-editor",{props:["mode","value"],data:function(){return{value:null}},mounted:function(){var e=this,t=this.$el.querySelector("textarea"),n={mode:this.mode,theme:"material",lineNumbers:!0,value:this.value||""};this.instance=(0,s.default)(function(n){return e.$el.replaceChild(n,t)},n),this.instance.on("change",function(t){e.$emit("change",t.getValue())})},watch:{value:function(){this.instance.getValue()!==this.value&&this.instance.setValue(this.value)}},render:function(e){var t={};return this.name&&(t.name=this.name),e("div",t,[e("textarea")])}})},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function t(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function n(e,n){return t(e).appendChild(n)}function r(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function i(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function o(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function a(t,n){var r=t.className;e(n).test(r)||(t.className+=(r?" ":"")+n)}function s(t,n){for(var r=t.split(" "),i=0;i<r.length;i++)r[i]&&!e(r[i]).test(n)&&(n+=" "+r[i]);return n}function l(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function c(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||n===!1&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function u(e,t,n,r,i){null==t&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var o=r||0,a=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}}function h(){this.id=null}function d(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function f(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);o==-1&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=t)return r}}function p(e){for(;La.length<=e;)La.push(m(La)+" ");return La[e]}function m(e){return e[e.length-1]}function v(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function g(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}function y(){}function b(e,t){var n;return Object.create?n=Object.create(e):(y.prototype=e,n=new y),t&&c(t,n),n}function x(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ra.test(e))}function w(e,t){return t?!!(t.source.indexOf("\\w")>-1&&x(e))||t.test(e):x(e)}function _(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function M(e){return e.charCodeAt(0)>=768&&Pa.test(e)}function S(e,t,n){var i=this;this.input=n,i.scrollbarFiller=r("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=r("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=r("div",null,"CodeMirror-code"),i.selectionDiv=r("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=r("div",null,"CodeMirror-cursors"),i.measure=r("div",null,"CodeMirror-measure"),i.lineMeasure=r("div",null,"CodeMirror-measure"),i.lineSpace=r("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=r("div",[r("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=r("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=r("div",null,null,"position: absolute; height: "+Sa+"px; width: 1px;"),i.gutters=r("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=r("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=r("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),na&&ra<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),ia||Qo&&da||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function E(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function T(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function C(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function A(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function L(e){if(null==e.parent)return null;for(var t=e.parent,n=d(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function R(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a],l=s.height;if(t<l)break;t-=l}return n+a}function P(e,t){return t>=e.first&&t<e.first+e.size}function k(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function O(e,t){return this instanceof O?(this.line=e,void(this.ch=t)):new O(e,t)}function N(e,t){return e.line-t.line||e.ch-t.ch}function D(e){return O(e.line,e.ch)}function I(e,t){return N(e,t)<0?t:e}function U(e,t){return N(e,t)<0?e:t}function F(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function B(e,t){if(t.line<e.first)return O(e.first,0);var n=e.first+e.size-1;return t.line>n?O(n,E(e,n).text.length):z(t,E(e,t.line).text.length)}function z(e,t){var n=e.ch;return null==n||n>t?O(e.line,t):n<0?O(e.line,0):e}function j(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=B(e,t[r]);return n}function G(){ka=!0}function H(){Oa=!0}function V(e,t,n){this.marker=e,this.from=t,this.to=n}function W(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function X(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function q(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Y(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new V(a,o.from,l?null:o.to))}}return r}function $(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new V(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return r}function Z(e,t){if(t.full)return null;var n=P(e,t.from.line)&&E(e,t.from.line).markedSpans,r=P(e,t.to.line)&&E(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==N(t.from,t.to),s=Y(n,i,a),l=$(r,o,a),c=1==t.text.length,u=m(t.text).length+(c?i:0);if(s)for(var h=0;h<s.length;++h){var d=s[h];if(null==d.to){var f=W(l,d.marker);f?c&&(d.to=null==f.to?null:f.to+u):d.to=i}}if(l)for(var p=0;p<l.length;++p){var v=l[p];if(null!=v.to&&(v.to+=u),null==v.from){var g=W(s,v.marker);g||(v.from=u,c&&(s||(s=[])).push(v))}else v.from+=u,c&&(s||(s=[])).push(v)}s&&(s=K(s)),l&&l!=s&&(l=K(l));var y=[s];if(!c){var b,x=t.text.length-2;if(x>0&&s)for(var w=0;w<s.length;++w)null==s[w].to&&(b||(b=[])).push(new V(s[w].marker,null,null));for(var _=0;_<x;++_)y.push(b);y.push(l)}return y}function K(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function J(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&d(r,n)!=-1||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var c=i[l];if(!(N(c.to,s.from)<0||N(c.from,s.to)>0)){var u=[l,1],h=N(c.from,s.from),f=N(c.to,s.to);(h<0||!a.inclusiveLeft&&!h)&&u.push({from:c.from,to:s.from}),(f>0||!a.inclusiveRight&&!f)&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),l+=u.length-1}}return i}function Q(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function ee(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function te(e){return e.inclusiveLeft?-1:0}function ne(e){return e.inclusiveRight?1:0}function re(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=N(r.from,i.from)||te(e)-te(t);if(o)return-o;var a=N(r.to,i.to)||ne(e)-ne(t);return a?a:t.id-e.id}function ie(e,t){var n,r=Oa&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!n||re(n,i.marker)<0)&&(n=i.marker);return n}function oe(e){return ie(e,!0)}function ae(e){return ie(e,!1)}function se(e,t,n,r,i){var o=E(e,t),a=Oa&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var c=l.marker.find(0),u=N(c.from,n)||te(l.marker)-te(i),h=N(c.to,r)||ne(l.marker)-ne(i);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?N(c.to,n)>=0:N(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?N(c.from,r)<=0:N(c.from,r)<0)))return!0}}}function le(e){for(var t;t=oe(e);)e=t.find(-1,!0).line;return e}function ce(e){for(var t,n;t=ae(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function ue(e,t){var n=E(e,t),r=le(n);return n==r?t:L(r)}function he(e,t){if(t>e.lastLine())return t;var n,r=E(e,t);if(!de(e,r))return t;for(;n=ae(r);)r=n.find(1,!0).line;return L(r)+1}function de(e,t){var n=Oa&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&fe(e,t,r))return!0}}function fe(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return fe(e,r.line,W(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&fe(e,t,i))return!0}function pe(e){e=le(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function me(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=oe(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=ae(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,r=o.to.line,n+=r.text.length-o.to.ch}return n}function ve(e){var t=e.display,n=e.doc;t.maxLine=E(n,n.first),t.maxLineLength=me(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=me(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function ge(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function ye(e){return e.level%2?e.to:e.from}function be(e){return e.level%2?e.from:e.to}function xe(e){var t=Ce(e);return t?ye(t[0]):0}function we(e){var t=Ce(e);return t?be(m(t)):e.text.length}function _e(e,t,n){var r=e[0].level;return t==r||n!=r&&t<n}function Me(e,t){var n;Na=null;for(var r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return _e(e,i.level,e[n].level)?(i.from!=i.to&&(Na=n),r):(i.from!=i.to&&(Na=r),n);n=r}}return n}function Se(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&M(e.text.charAt(t)));return t}function Ee(e,t,n,r){var i=Ce(e);if(!i)return Te(e,t,n,r);for(var o=Me(i,t),a=i[o],s=Se(e,t,a.level%2?-n:n,r);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return Me(i,s)==o?s:(a=i[o+=n],n>0==a.level%2?a.to:a.from);if(a=i[o+=n],!a)return null;s=n>0==a.level%2?Se(e,a.to,-1,r):Se(e,a.from,1,r)}}function Te(e,t,n,r){var i=t+n;if(r)for(;i>0&&M(e.text.charAt(i));)i+=n;return i<0||i>e.text.length?null:i}function Ce(e){var t=e.order;return null==t&&(t=e.order=Da(e.text)),t}function Ae(e,t){return e._handlers&&e._handlers[t]||Ia}function Le(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=d(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function Re(e,t){var n=Ae(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function Pe(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Re(e,n||t.type,e,t),Ue(t)||t.codemirrorIgnore}function ke(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)d(n,t[r])==-1&&n.push(t[r])}function Oe(e,t){return Ae(e,t).length>0}function Ne(e){e.prototype.on=function(e,t){Ua(this,e,t)},e.prototype.off=function(e,t){Le(this,e,t)}}function De(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ie(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ue(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Fe(e){De(e),Ie(e)}function Be(e){return e.target||e.srcElement}function ze(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),fa&&e.ctrlKey&&1==t&&(t=3),t}function je(e){if(null==_a){var t=r("span","​");n(e,r("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(_a=t.offsetWidth<=1&&t.offsetHeight>2&&!(na&&ra<8))}var i=_a?r("span","​"):r("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Ge(e){if(null!=Ma)return Ma;var r=n(e,document.createTextNode("AخA")),i=ga(r,0,1).getBoundingClientRect(),o=ga(r,1,2).getBoundingClientRect();return t(e),!(!i||i.left==i.right)&&(Ma=o.right-i.right<3)}function He(e){if(null!=Ga)return Ga;var t=n(e,r("span","x")),i=t.getBoundingClientRect(),o=ga(t,0,1).getBoundingClientRect();return Ga=Math.abs(i.left-o.left)>1}function Ve(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ha[e]=t}function We(e,t){Va[e]=t}function Xe(e){if("string"==typeof e&&Va.hasOwnProperty(e))e=Va[e];else if(e&&"string"==typeof e.name&&Va.hasOwnProperty(e.name)){var t=Va[e.name];"string"==typeof t&&(t={name:t}),e=b(t,e),e.name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Xe("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Xe("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"
}}function qe(e,t){t=Xe(t);var n=Ha[t.name];if(!n)return qe(e,"text/plain");var r=n(e,t);if(Wa.hasOwnProperty(t.name)){var i=Wa[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}function Ye(e,t){var n=Wa.hasOwnProperty(e)?Wa[e]:Wa[e]={};c(t,n)}function $e(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Ze(e,t){for(var n;e.innerMode&&(n=e.innerMode(t),n&&n.mode!=e);)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ke(e,t,n){return!e.startState||e.startState(t,n)}function Je(e,t,n,r){var i=[e.state.modeGen],o={};at(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},o,r);for(var a=function(n){var r=e.state.overlays[n],a=1,s=0;at(e,t.text,r.mode,!0,function(e,t){for(var n=a;s<e;){var o=i[a];o>e&&i.splice(a,1,e,i[a+1],o),a+=2,s=Math.min(e,o)}if(t)if(r.opaque)i.splice(n,a-n,e,"overlay "+t),a=n+2;else for(;n<a;n+=2){var l=i[n+1];i[n+1]=(l?l+" ":"")+"overlay "+t}},o)},s=0;s<e.state.overlays.length;++s)a(s);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Qe(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=et(e,L(t)),i=Je(e,t,t.text.length>e.options.maxHighlightLength?$e(e.doc.mode,r):r);t.stateAfter=r,t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++}return t.styles}function et(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=st(e,t,n),a=o>r.first&&E(r,o-1).stateAfter;return a=a?$e(r.mode,a):Ke(r.mode),r.iter(o,t,function(n){tt(e,n.text,a);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=s?$e(r.mode,a):null,++o}),n&&(r.frontier=o),a}function tt(e,t,n,r){var i=e.doc.mode,o=new Xa(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&nt(i,n);!o.eol();)rt(i,o,n),o.start=o.pos}function nt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ze(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function rt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Ze(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function it(e,t,n,r){var i,o=function(e){return{start:h.start,end:h.pos,string:h.current(),type:i||null,state:e?$e(a.mode,u):u}},a=e.doc,s=a.mode;t=B(a,t);var l,c=E(a,t.line),u=et(e,t.line,n),h=new Xa(c.text,e.options.tabSize);for(r&&(l=[]);(r||h.pos<t.ch)&&!h.eol();)h.start=h.pos,i=rt(s,h,u),r&&l.push(o(!0));return r?l:o()}function ot(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function at(e,t,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,c=0,u=null,h=new Xa(t,e.options.tabSize),d=e.options.addModeClass&&[null];for(""==t&&ot(nt(n,r),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(s=!1,a&&tt(e,t,r,h.pos),h.pos=t.length,l=null):l=ot(rt(n,h,r,d),o),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!s||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e3),i(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e3);i(p,u),c=p}}function st(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=E(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var c=u(l.text,null,e.options.tabSize);(null==i||r>c)&&(i=s-1,r=c)}return i}function lt(e,t,n){this.text=e,ee(this,t),this.height=n?n(this):1}function ct(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Q(e),ee(e,n);var i=r?r(e):1;i!=e.height&&A(e,i)}function ut(e){e.parent=null,Q(e)}function ht(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?$a:Ya;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function dt(e,t){var n=r("span",null,null,ia?"padding-right: .1px":null),i={pre:r("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(na||ia)&&e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var a=o?t.rest[o-1]:t.line,l=void 0;i.pos=0,i.addToken=pt,Ge(e.display.measure)&&(l=Ce(a))&&(i.addToken=vt(i.addToken,l)),i.map=[];var c=t!=e.display.externalMeasured&&L(a);yt(a,i,Qe(e,a,c)),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=s(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=s(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(je(e.display.measure))),0==o?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(ia){var u=i.content.lastChild;(/\bcm-tab\b/.test(u.className)||u.querySelector&&u.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return Re(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=s(i.pre.className,i.textClass||"")),i}function ft(e){var t=r("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function pt(e,t,n,i,o,a,s){if(t){var l,c=e.splitSpaces?mt(t,e.trailingSpace):t,u=e.cm.state.specialChars,h=!1;if(u.test(t)){l=document.createDocumentFragment();for(var d=0;;){u.lastIndex=d;var f=u.exec(t),m=f?f.index-d:t.length-d;if(m){var v=document.createTextNode(c.slice(d,d+m));na&&ra<9?l.appendChild(r("span",[v])):l.appendChild(v),e.map.push(e.pos,e.pos+m,v),e.col+=m,e.pos+=m}if(!f)break;d+=m+1;var g=void 0;if("\t"==f[0]){var y=e.cm.options.tabSize,b=y-e.col%y;g=l.appendChild(r("span",p(b),"cm-tab")),g.setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),e.col+=b}else"\r"==f[0]||"\n"==f[0]?(g=l.appendChild(r("span","\r"==f[0]?"␍":"␤","cm-invalidchar")),g.setAttribute("cm-text",f[0]),e.col+=1):(g=e.cm.options.specialCharPlaceholder(f[0]),g.setAttribute("cm-text",f[0]),na&&ra<9?l.appendChild(r("span",[g])):l.appendChild(g),e.col+=1);e.map.push(e.pos,e.pos+1,g),e.pos++}}else e.col+=t.length,l=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,l),na&&ra<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),n||i||o||h||s){var x=n||"";i&&(x+=i),o&&(x+=o);var w=r("span",[l],x,s);return a&&(w.title=a),e.content.appendChild(w)}e.content.appendChild(l)}}function mt(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),r+=o,n=" "==o}return r}function vt(e,t){return function(n,r,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var h=void 0,d=0;d<t.length&&(h=t[d],!(h.to>c&&h.from<=c));d++);if(h.to>=u)return e(n,r,i,o,a,s,l);e(n,r.slice(0,h.to-c),i,o,null,s,l),o=null,r=r.slice(h.to-c),c=h.to}}}function gt(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function yt(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,c,u,h,d,f=i.length,p=0,m=1,v="",g=0;;){if(g==p){l=c=u=h=s="",d=null,g=1/0;for(var y=[],b=void 0,x=0;x<r.length;++x){var w=r[x],_=w.marker;"bookmark"==_.type&&w.from==p&&_.widgetNode?y.push(_):w.from<=p&&(null==w.to||w.to>p||_.collapsed&&w.to==p&&w.from==p)?(null!=w.to&&w.to!=p&&g>w.to&&(g=w.to,c=""),_.className&&(l+=" "+_.className),_.css&&(s=(s?s+";":"")+_.css),_.startStyle&&w.from==p&&(u+=" "+_.startStyle),_.endStyle&&w.to==g&&(b||(b=[])).push(_.endStyle,w.to),_.title&&!h&&(h=_.title),_.collapsed&&(!d||re(d.marker,_)<0)&&(d=w)):w.from>p&&g>w.from&&(g=w.from)}if(b)for(var M=0;M<b.length;M+=2)b[M+1]==g&&(c+=" "+b[M]);if(!d||d.from==p)for(var S=0;S<y.length;++S)gt(t,0,y[S]);if(d&&(d.from||0)==p){if(gt(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=f)break;for(var E=Math.min(f,g);;){if(v){var T=p+v.length;if(!d){var C=T>E?v.slice(0,E-p):v;t.addToken(t,C,a?a+l:l,u,p+C.length==g?c:"",h,s)}if(T>=E){v=v.slice(E-p),p=E;break}p=T,u=""}v=i.slice(o,o=n[m++]),a=ht(n[m++],t.cm.options)}}else for(var A=1;A<n.length;A+=2)t.addToken(t,i.slice(o,o=n[A]),ht(n[A+1],t.cm.options))}function bt(e,t,n){this.line=t,this.rest=ce(t),this.size=this.rest?L(m(this.rest))-n+1:1,this.node=this.text=null,this.hidden=de(e,t)}function xt(e,t,n){for(var r,i=[],o=t;o<n;o=r){var a=new bt(e.doc,E(e.doc,o),o);r=o+a.size,i.push(a)}return i}function wt(e){Za?Za.ops.push(e):e.ownsGroup=Za={ops:[e],delayedCallbacks:[]}}function _t(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}function Mt(e,t){var n=e.ownsGroup;if(n)try{_t(n)}finally{Za=null,t(n)}}function St(e,t){var n=Ae(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);Za?r=Za.delayedCallbacks:Ka?r=Ka:(r=Ka=[],setTimeout(Et,0));for(var o=function(e){r.push(function(){return n[e].apply(null,i)})},a=0;a<n.length;++a)o(a)}}function Et(){var e=Ka;Ka=null;for(var t=0;t<e.length;++t)e[t]()}function Tt(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?Rt(e,t):"gutter"==o?kt(e,t,n,r):"class"==o?Pt(t):"widget"==o&&Ot(e,t,r)}t.changes=null}function Ct(e){return e.node==e.text&&(e.node=r("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),na&&ra<8&&(e.node.style.zIndex=2)),e.node}function At(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=Ct(e);e.background=n.insertBefore(r("div",null,t),n.firstChild)}}function Lt(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):dt(e,t)}function Rt(e,t){var n=t.text.className,r=Lt(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,Pt(t)):n&&(t.text.className=n)}function Pt(e){At(e),e.line.wrapClass?Ct(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function kt(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=Ct(t);t.gutterBackground=r("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),o.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var s=Ct(t),l=t.gutter=r("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),s.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(r("div",k(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var c=0;c<e.options.gutters.length;++c){var u=e.options.gutters[c],h=a.hasOwnProperty(u)&&a[u];h&&l.appendChild(r("div",[h],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function Ot(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);Dt(e,t,n)}function Nt(e,t,n,r){var i=Lt(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),Pt(t),kt(e,t,n,r),Dt(e,t,r),t.node}function Dt(e,t,n){if(It(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)It(e,t.rest[r],t,n,!1)}function It(e,t,n,i,o){if(t.widgets)for(var a=Ct(n),s=0,l=t.widgets;s<l.length;++s){var c=l[s],u=r("div",[c.node],"CodeMirror-linewidget");c.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Ut(c,u,n,i),e.display.input.setUneditable(u),o&&c.above?a.insertBefore(u,n.gutter||n.text):a.appendChild(u),St(c,"redraw")}}function Ut(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function Ft(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!i(document.body,e.node)){var o="position: relative;";e.coverGutter&&(o+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(o+="width: "+t.display.wrapper.clientWidth+"px;"),n(t.display.measure,r("div",[e.node],null,o))}return e.height=e.node.parentNode.offsetHeight}function Bt(e,t){for(var n=Be(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function zt(e){return e.lineSpace.offsetTop}function jt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Gt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=n(e.measure,r("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,o={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(o.left)||isNaN(o.right)||(e.cachedPaddingH=o),o}function Ht(e){return Sa-e.display.nativeBarWidth}function Vt(e){return e.display.scroller.clientWidth-Ht(e)-e.display.barWidth}function Wt(e){return e.display.scroller.clientHeight-Ht(e)-e.display.barHeight}function Xt(e,t,n){var r=e.options.lineWrapping,i=r&&Vt(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function qt(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(L(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Yt(e,t){t=le(t);var r=L(t),i=e.display.externalMeasured=new bt(e.doc,t,r);i.lineN=r;var o=i.built=dt(e,i);return i.text=o.pre,n(e.display.lineMeasure,o.pre),i}function $t(e,t,n,r){return Jt(e,Kt(e,t),n,r)}function Zt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Sn(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Kt(e,t){var n=L(t),r=Zt(e,n);r&&!r.text?r=null:r&&r.changes&&(Tt(e,r,n,bn(e)),e.curOp.forceUpdate=!0),r||(r=Yt(e,t));var i=qt(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Jt(e,t,n,r,i){t.before&&(n=-1);var o,a=n+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Xt(e,t.view,t.rect),t.hasHeights=!0),o=tn(e,t,n,r),o.bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function Qt(e,t,n){for(var r,i,o,a,s,l,c=0;c<e.length;c+=3)if(s=e[c],l=e[c+1],t<s?(i=0,o=1,a="left"):t<l?(i=t-s,o=i+1):(c==e.length-3||t==l&&e[c+3]>t)&&(o=l-s,i=o-1,t>=l&&(a="right")),null!=i){if(r=e[c+2],s==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[(c-=3)+2],a="left";if("right"==n&&i==l-s)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:l}}function en(e,t){var n=Ja;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function tn(e,t,n,r){var i,o=Qt(t.map,n,r),a=o.node,s=o.start,l=o.end,c=o.collapse;if(3==a.nodeType){for(var u=0;u<4;u++){for(;s&&M(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+l<o.coverEnd&&M(t.line.text.charAt(o.coverStart+l));)++l;if(i=na&&ra<9&&0==s&&l==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():en(ga(a,s,l).getClientRects(),r),i.left||i.right||0==s)break;l=s,s-=1,c="right"}na&&ra<11&&(i=nn(e.display.measure,i))}else{s>0&&(c=r="right");var h;i=e.options.lineWrapping&&(h=a.getClientRects()).length>1?h["right"==r?h.length-1:0]:a.getBoundingClientRect()}if(na&&ra<9&&!s&&(!i||!i.left&&!i.right)){var d=a.parentNode.getClientRects()[0];i=d?{left:d.left,right:d.left+yn(e.display),top:d.top,bottom:d.bottom}:Ja}for(var f=i.top-t.rect.top,p=i.bottom-t.rect.top,m=(f+p)/2,v=t.view.measure.heights,g=0;g<v.length-1&&!(m<v[g]);g++);var y=g?v[g-1]:0,b=v[g],x={left:("right"==c?i.right:i.left)-t.rect.left,right:("left"==c?i.left:i.right)-t.rect.left,top:y,bottom:b};return i.left||i.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=f,x.rbottom=p),x}function nn(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!He(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function rn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function on(e){e.display.externalMeasure=null,t(e.display.lineMeasure);for(var n=0;n<e.display.view.length;n++)rn(e.display.view[n])}function an(e){on(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function sn(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ln(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function cn(e,t,n,r,i){if(!i&&t.widgets)for(var o=0;o<t.widgets.length;++o)if(t.widgets[o].above){var a=Ft(t.widgets[o]);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var s=pe(t);if("local"==r?s+=zt(e.display):s-=e.display.viewOffset,"page"==r||"window"==r){var l=e.display.lineSpace.getBoundingClientRect();s+=l.top+("window"==r?0:ln());var c=l.left+("window"==r?0:sn());n.left+=c,n.right+=c}return n.top+=s,n.bottom+=s,n}function un(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=sn(),i-=ln();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function hn(e,t,n,r,i){return r||(r=E(e.doc,t.line)),cn(e,r,$t(e,r,t.ch,i),n)}function dn(e,t,n,r,i,o){function a(t,a){var s=Jt(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,cn(e,r,s,n)}function s(e,t){var n=l[t],r=n.level%2;return e==ye(n)&&t&&n.level<l[t-1].level?(n=l[--t],e=be(n)-(n.level%2?0:1),r=!0):e==be(n)&&t<l.length-1&&n.level<l[t+1].level&&(n=l[++t],e=ye(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?a(e-1):a(e,r)}r=r||E(e.doc,t.line),i||(i=Kt(e,r));var l=Ce(r),c=t.ch;if(!l)return a(c);var u=Me(l,c),h=s(c,u);return null!=Na&&(h.other=s(c,Na)),h}function fn(e,t){var n=0;t=B(e.doc,t),e.options.lineWrapping||(n=yn(e.display)*t.ch);var r=E(e.doc,t.line),i=pe(r)+zt(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function pn(e,t,n,r){var i=O(e,t);return i.xRel=r,n&&(i.outside=!0),i}function mn(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,n<0)return pn(r.first,0,!0,-1);var i=R(r,n),o=r.first+r.size-1;if(i>o)return pn(r.first+r.size-1,E(r,o).text.length,!0,1);t<0&&(t=0);for(var a=E(r,i);;){var s=vn(e,a,i,t,n),l=ae(a),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;i=L(a=c.to.line)}}function vn(e,t,n,r,i){function o(r){var i=dn(e,O(n,r),"line",t,c);return s=!0,a>i.bottom?i.left-l:a<i.top?i.left+l:(s=!1,i.left)}var a=i-pe(t),s=!1,l=2*e.display.wrapper.clientWidth,c=Kt(e,t),u=Ce(t),h=t.text.length,d=xe(t),f=we(t),p=o(d),m=s,v=o(f),g=s;if(r>v)return pn(n,f,g,1);for(;;){if(u?f==d||f==Ee(t,d,1):f-d<=1){var y=r<p||r-p<=v-r?d:f,b=y==d?m:g,x=r-(y==d?p:v);if(g&&!u&&!/\s/.test(t.text.charAt(y))&&x>0&&y<t.text.length&&c.view.measure.heights.length>1){var w=Jt(e,c,y,"right");a<=w.bottom&&a>=w.top&&Math.abs(r-w.right)<x&&(b=!1,y++,x=r-w.right)}for(;M(t.text.charAt(y));)++y;var _=pn(n,y,b,x<-1?-1:x>1?1:0);return _}var S=Math.ceil(h/2),E=d+S;if(u){E=d;for(var T=0;T<S;++T)E=Ee(t,E,1)}var C=o(E);C>r?(f=E,v=C,(g=s)&&(v+=1e3),h=S):(d=E,p=C,m=s,h-=S)}}function gn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==qa){qa=r("pre");for(var i=0;i<49;++i)qa.appendChild(document.createTextNode("x")),qa.appendChild(r("br"));qa.appendChild(document.createTextNode("x"))}n(e.measure,qa);var o=qa.offsetHeight/50;return o>3&&(e.cachedTextHeight=o),t(e.measure),o||1}function yn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=r("span","xxxxxxxxxx"),i=r("pre",[t]);n(e.measure,i);var o=t.getBoundingClientRect(),a=(o.right-o.left)/10;return a>2&&(e.cachedCharWidth=a),a||10}function bn(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[a]]=o.clientWidth;return{fixedPos:xn(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function xn(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function wn(e){var t=gn(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/yn(e.display)-3);return function(i){if(de(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function _n(e){var t=e.doc,n=wn(e);t.iter(function(e){var t=n(e);t!=e.height&&A(e,t)})}function Mn(e,t,n,r){var i=e.display;if(!n&&"true"==Be(t).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(e){return null}var l,c=mn(e,o,a);if(r&&1==c.xRel&&(l=E(e.doc,c.line).text).length==c.ch){var h=u(l,l.length,e.options.tabSize)-l.length;c=O(c.line,Math.max(0,Math.round((o-Gt(e.display).left)/yn(e.display))-h))}return c}function Sn(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,t<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,t<0)return r}function En(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Tn(e,t){for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t!==!1||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&Cn(e,s.head,i),l||An(e,s,o)}}return r}function Cn(e,t,n){var i=dn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=n.appendChild(r("div"," ","CodeMirror-cursor"));if(o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var a=n.appendChild(r("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=i.other.left+"px",a.style.top=i.other.top+"px",a.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function An(e,t,n){function i(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),l.appendChild(r("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?h-e:n)+"px;\n                             height: "+(i-t)+"px"))}function o(t,n,r){function o(n,r){return hn(e,O(t,n),"div",c,r)}var a,l,c=E(s,t),d=c.text.length;return ge(Ce(c),n||0,null==r?d:r,function(e,t,s){var c,f,p,m=o(e,"left");if(e==t)c=m,f=p=m.left;else{if(c=o(t-1,"right"),"rtl"==s){var v=m;m=c,c=v}f=m.left,p=c.right}null==n&&0==e&&(f=u),c.top-m.top>3&&(i(f,m.top,null,m.bottom),f=u,m.bottom<c.top&&i(f,m.bottom,null,c.top)),null==r&&t==d&&(p=h),(!a||m.top<a.top||m.top==a.top&&m.left<a.left)&&(a=m),(!l||c.bottom>l.bottom||c.bottom==l.bottom&&c.right>l.right)&&(l=c),f<u+1&&(f=u),i(f,c.top,p-f,c.bottom)}),{start:a,end:l}}var a=e.display,s=e.doc,l=document.createDocumentFragment(),c=Gt(e.display),u=c.left,h=Math.max(a.sizerWidth,Vt(e)-a.sizer.offsetLeft)-c.right,d=t.from(),f=t.to();if(d.line==f.line)o(d.line,d.ch,f.ch);else{var p=E(s,d.line),m=E(s,f.line),v=le(p)==le(m),g=o(d.line,d.ch,v?p.text.length+1:null).end,y=o(f.line,v?0:null,f.ch).start;v&&(g.top<y.top-2?(i(g.right,g.top,null,g.bottom),i(u,y.top,y.left,y.bottom)):i(g.right,g.top,y.left-g.right,g.bottom)),g.bottom<y.top&&i(u,g.bottom,null,y.top)}n.appendChild(l)}function Ln(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Rn(e){e.state.focused||(e.display.input.focus(),kn(e))}function Pn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,On(e))},100)}function kn(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Re(e,"focus",e,t),e.state.focused=!0,a(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),ia&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Ln(e))}function On(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Re(e,"blur",e,t),e.state.focused=!1,xa(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Nn(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=xn(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Dn(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=k(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var o=i.measure.appendChild(r("div",[r("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=o.firstChild.offsetWidth,s=o.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",Tr(e),!0}return!1}function In(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=void 0;if(!i.hidden){if(na&&ra<8){var a=i.node.offsetTop+i.node.offsetHeight;o=a-n,n=a}else{var s=i.node.getBoundingClientRect();o=s.bottom-s.top}var l=i.line.height-o;if(o<2&&(o=gn(t)),(l>.001||l<-.001)&&(A(i.line,o),Un(i.line),i.rest))for(var c=0;c<i.rest.length;c++)Un(i.rest[c])}}}function Un(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function Fn(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-zt(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=R(t,r),a=R(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=R(t,pe(E(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=R(t,pe(E(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function Bn(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Qo||Sr(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),Qo&&Sr(e),br(e,100))}function zn(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,Nn(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function jn(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function Gn(e){var t=jn(e);return t.x*=es,t.y*=es,t}function Hn(e,t){var n=jn(t),r=n.x,i=n.y,o=e.display,a=o.scroller,s=a.scrollWidth>a.clientWidth,l=a.scrollHeight>a.clientHeight;if(r&&s||i&&l){if(i&&fa&&ia)e:for(var c=t.target,u=o.view;c!=a;c=c.parentNode)for(var h=0;h<u.length;h++)if(u[h].node==c){e.display.currentWheelTarget=c;break e}if(r&&!Qo&&!sa&&null!=es)return i&&l&&Bn(e,Math.max(0,Math.min(a.scrollTop+i*es,a.scrollHeight-a.clientHeight))),zn(e,Math.max(0,Math.min(a.scrollLeft+r*es,a.scrollWidth-a.clientWidth))),(!i||i&&l)&&De(t),void(o.wheelStartX=null);if(i&&null!=es){var d=i*es,f=e.doc.scrollTop,p=f+o.wrapper.clientHeight;d<0?f=Math.max(0,f+d-50):p=Math.min(e.doc.height,p+d+50),Sr(e,{top:f,bottom:p})}Qa<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout(function(){if(null!=o.wheelStartX){var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(es=(es*Qa+n)/(Qa+1),++Qa)}},200)):(o.wheelDX+=r,o.wheelDY+=i))}}function Vn(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+jt(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Ht(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function Wn(e,t){t||(t=Vn(e));var n=e.display.barWidth,r=e.display.barHeight;Xn(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&In(e),Xn(e,Vn(e)),n=e.display.barWidth,r=e.display.barHeight}function Xn(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function qn(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&xa(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new rs[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Ua(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true");
},function(t,n){"horizontal"==n?zn(e,t):Bn(e,t)},e),e.display.scrollbars.addClass&&a(e.display.wrapper,e.display.scrollbars.addClass)}function Yn(e,t){if(!Pe(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),o=null;if(t.top+i.top<0?o=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!ua){var a=r("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-zt(e.display))+"px;\n                         height: "+(t.bottom-t.top+Ht(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(o),e.display.lineSpace.removeChild(a)}}}function $n(e,t,n,r){null==r&&(r=0);for(var i,o=0;o<5;o++){var a=!1;i=dn(e,t);var s=n&&n!=t?dn(e,n):i,l=Kn(e,Math.min(i.left,s.left),Math.min(i.top,s.top)-r,Math.max(i.left,s.left),Math.max(i.bottom,s.bottom)+r),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=l.scrollTop&&(Bn(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(a=!0)),null!=l.scrollLeft&&(zn(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(a=!0)),!a)break}return i}function Zn(e,t,n,r,i){var o=Kn(e,t,n,r,i);null!=o.scrollTop&&Bn(e,o.scrollTop),null!=o.scrollLeft&&zn(e,o.scrollLeft)}function Kn(e,t,n,r,i){var o=e.display,a=gn(e.display);n<0&&(n=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=Wt(e),c={};i-n>l&&(i=n+l);var u=e.doc.height+jt(o),h=n<a,d=i>u-a;if(n<s)c.scrollTop=h?0:n;else if(i>s+l){var f=Math.min(n,(d?u:i)-l);f!=s&&(c.scrollTop=f)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=Vt(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),v=r-t>m;return v&&(r=t+m),t<10?c.scrollLeft=0:t<p?c.scrollLeft=Math.max(0,t-(v?0:10)):r>m+p-3&&(c.scrollLeft=r+(v?0:10)-m),c}function Jn(e,t,n){null==t&&null==n||er(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function Qn(e){er(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?O(t.line,t.ch-1):t,r=O(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function er(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=fn(e,t.from),r=fn(e,t.to),i=Kn(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function tr(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++is},wt(e.curOp)}function nr(e){var t=e.curOp;Mt(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;rr(e)})}function rr(e){for(var t=e.ops,n=0;n<t.length;n++)ir(t[n]);for(var r=0;r<t.length;r++)or(t[r]);for(var i=0;i<t.length;i++)ar(t[i]);for(var o=0;o<t.length;o++)sr(t[o]);for(var a=0;a<t.length;a++)lr(t[a])}function ir(e){var t=e.cm,n=t.display;wr(t),e.updateMaxLine&&ve(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new os(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function or(e){e.updatedDisplay=e.mustUpdate&&_r(e.cm,e.update)}function ar(e){var t=e.cm,n=t.display;e.updatedDisplay&&In(t),e.barMeasure=Vn(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=$t(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Ht(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Vt(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection(e.focus))}function sr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&zn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==o()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Wn(t,e.barMeasure),e.updatedDisplay&&Cr(t,e.barMeasure),e.selectionChanged&&Ln(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Rn(e.cm)}function lr(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&Mr(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(r.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(r.scrollTop),n.scroller.scrollTop=r.scrollTop),null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(r.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,e.scrollLeft)),n.scrollbars.setScrollLeft(r.scrollLeft),n.scroller.scrollLeft=r.scrollLeft,Nn(t)),e.scrollToPos){var i=$n(t,B(r,e.scrollToPos.from),B(r,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Yn(t,i)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Re(o[s],"hide");if(a)for(var l=0;l<a.length;++l)a[l].lines.length&&Re(a[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Re(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function cr(e,t){if(e.curOp)return t();tr(e);try{return t()}finally{nr(e)}}function ur(e,t){return function(){if(e.curOp)return t.apply(e,arguments);tr(e);try{return t.apply(e,arguments)}finally{nr(e)}}}function hr(e){return function(){if(this.curOp)return e.apply(this,arguments);tr(this);try{return e.apply(this,arguments)}finally{nr(this)}}}function dr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);tr(t);try{return e.apply(this,arguments)}finally{nr(t)}}}function fr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Oa&&ue(e.doc,t)<i.viewTo&&mr(e);else if(n<=i.viewFrom)Oa&&he(e.doc,n+r)>i.viewFrom?mr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)mr(e);else if(t<=i.viewFrom){var o=vr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):mr(e)}else if(n>=i.viewTo){var a=vr(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):mr(e)}else{var s=vr(e,t,t,-1),l=vr(e,n,n+r,1);s&&l?(i.view=i.view.slice(0,s.index).concat(xt(e,s.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):mr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function pr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[Sn(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);d(a,n)==-1&&a.push(n)}}}function mr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function vr(e,t,n,r){var i,o=Sn(e,t),a=e.display.view;if(!Oa||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=e.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=t){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-t,o++}else i=s-t;t+=i,n+=i}for(;ue(e.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function gr(e,t,n){var r=e.display,i=r.view;0==i.length||t>=r.viewTo||n<=r.viewFrom?(r.view=xt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=xt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Sn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(xt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Sn(e,n)))),r.viewTo=n}function yr(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function br(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,l(xr,e))}function xr(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=$e(t.mode,et(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength,l=Je(e,o,s?$e(t.mode,r):r,!0);o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var h=!a||a.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),d=0;!h&&d<a.length;++d)h=a[d]!=o.styles[d];h&&i.push(t.frontier),o.stateAfter=s?r:$e(t.mode,r)}else o.text.length<=e.options.maxHighlightLength&&tt(e,o.text,r),o.stateAfter=t.frontier%5==0?$e(t.mode,r):null;if(++t.frontier,+new Date>n)return br(e,e.options.workDelay),!0}),i.length&&cr(e,function(){for(var t=0;t<i.length;t++)pr(e,i[t],"text")})}}function wr(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ht(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ht(e)+"px",t.scrollbarsClipped=!0)}function _r(e,n){var r=e.display,i=e.doc;if(n.editorIsHidden)return mr(e),!1;if(!n.force&&n.visible.from>=r.viewFrom&&n.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==yr(e))return!1;Dn(e)&&(mr(e),n.dims=bn(e));var a=i.first+i.size,s=Math.max(n.visible.from-e.options.viewportMargin,i.first),l=Math.min(a,n.visible.to+e.options.viewportMargin);r.viewFrom<s&&s-r.viewFrom<20&&(s=Math.max(i.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(a,r.viewTo)),Oa&&(s=ue(e.doc,s),l=he(e.doc,l));var c=s!=r.viewFrom||l!=r.viewTo||r.lastWrapHeight!=n.wrapperHeight||r.lastWrapWidth!=n.wrapperWidth;gr(e,s,l),r.viewOffset=pe(E(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var u=yr(e);if(!c&&0==u&&!n.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var h=o();return u>4&&(r.lineDiv.style.display="none"),Er(e,r.updateLineNumbers,n.dims),u>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,h&&o()!=h&&h.offsetHeight&&h.focus(),t(r.cursorDiv),t(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,c&&(r.lastWrapHeight=n.wrapperHeight,r.lastWrapWidth=n.wrapperWidth,br(e,400)),r.updateLineNumbers=null,!0}function Mr(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Vt(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+jt(e.display)-Wt(e),n.top)}),t.visible=Fn(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&_r(e,t);r=!1){In(e);var i=Vn(e);En(e),Wn(e,i),Cr(e,i)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Sr(e,t){var n=new os(e,t);if(_r(e,n)){In(e),Mr(e,n);var r=Vn(e);En(e),Wn(e,r),Cr(e,r),n.finish()}}function Er(e,n,r){function i(t){var n=t.nextSibling;return ia&&fa&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var o=e.display,a=e.options.lineNumbers,s=o.lineDiv,l=s.firstChild,c=o.view,u=o.viewFrom,h=0;h<c.length;h++){var f=c[h];if(f.hidden);else if(f.node&&f.node.parentNode==s){for(;l!=f.node;)l=i(l);var p=a&&null!=n&&n<=u&&f.lineNumber;f.changes&&(d(f.changes,"gutter")>-1&&(p=!1),Tt(e,f,u,r)),p&&(t(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(k(e.options,u)))),l=f.node.nextSibling}else{var m=Nt(e,f,u,r);s.insertBefore(m,l)}u+=f.size}for(;l;)l=i(l)}function Tr(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function Cr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Ht(e)+"px"}function Ar(e){var n=e.display.gutters,i=e.options.gutters;t(n);for(var o=0;o<i.length;++o){var a=i[o],s=n.appendChild(r("div",null,"CodeMirror-gutter "+a));"CodeMirror-linenumbers"==a&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}n.style.display=o?"":"none",Tr(e)}function Lr(e){var t=d(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function Rr(e,t){this.ranges=e,this.primIndex=t}function Pr(e,t){this.anchor=e,this.head=t}function kr(e,t){var n=e[t];e.sort(function(e,t){return N(e.from(),t.from())}),t=d(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(N(o.to(),i.from())>=0){var a=U(o.from(),i.from()),s=I(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;r<=t&&--t,e.splice(--r,2,new Pr(l?s:a,l?a:s))}}return new Rr(e,t)}function Or(e,t){return new Rr([new Pr(e,t||e)],0)}function Nr(e){return e.text?O(e.from.line+e.text.length-1,m(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Dr(e,t){if(N(e,t.from)<0)return e;if(N(e,t.to)<=0)return Nr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Nr(t).ch-t.to.ch),O(n,r)}function Ir(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new Pr(Dr(i.anchor,t),Dr(i.head,t)))}return kr(n,e.sel.primIndex)}function Ur(e,t,n){return e.line==t.line?O(n.line,e.ch-t.ch+n.ch):O(n.line+(e.line-t.line),e.ch)}function Fr(e,t,n){for(var r=[],i=O(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=Ur(s.from,i,o),c=Ur(Nr(s),i,o);if(i=s.to,o=c,"around"==n){var u=e.sel.ranges[a],h=N(u.head,u.anchor)<0;r[a]=new Pr(h?c:l,h?l:c)}else r[a]=new Pr(l,l)}return new Rr(r,e.sel.primIndex)}function Br(e){e.doc.mode=qe(e.options,e.doc.modeOption),zr(e)}function zr(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,br(e,100),e.state.modeGen++,e.curOp&&fr(e)}function jr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==m(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Gr(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){ct(e,n,i,r),St(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new lt(c[o],i(o),r));return n}var s=t.from,l=t.to,c=t.text,u=E(e,s.line),h=E(e,l.line),d=m(c),f=i(c.length-1),p=l.line-s.line;if(t.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(jr(e,t)){var v=a(0,c.length-1);o(h,h.text,f),p&&e.remove(s.line,p),v.length&&e.insert(s.line,v)}else if(u==h)if(1==c.length)o(u,u.text.slice(0,s.ch)+d+u.text.slice(l.ch),f);else{var g=a(1,c.length-1);g.push(new lt(d+u.text.slice(l.ch),f,r)),o(u,u.text.slice(0,s.ch)+c[0],i(0)),e.insert(s.line+1,g)}else if(1==c.length)o(u,u.text.slice(0,s.ch)+c[0]+h.text.slice(l.ch),i(0)),e.remove(s.line+1,p);else{o(u,u.text.slice(0,s.ch)+c[0],i(0)),o(h,d+h.text.slice(l.ch),f);var y=a(1,c.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,y)}St(e,"change",e,t)}function Hr(e,t,n){function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;n&&!l||(t(s.doc,l),r(s.doc,e,l))}}}r(e,null,!0)}function Vr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,_n(e),Br(e),e.options.lineWrapping||ve(e),e.options.mode=t.modeOption,fr(e)}function Wr(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Xr(e,t){var n={from:D(t.from),to:Nr(t),text:T(e,t.from,t.to)};return Qr(e,n,t.from.line,t.to.line+1),Hr(e,function(e){return Qr(e,n,t.from.line,t.to.line+1)},!0),n}function qr(e){for(;e.length;){var t=m(e);if(!t.ranges)break;e.pop()}}function Yr(e,t){return t?(qr(e.done),m(e.done)):e.done.length&&!m(e.done).ranges?m(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),m(e.done)):void 0}function $r(e,t,n,r){var i=e.history;i.undone.length=0;var o,a,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=Yr(i,i.lastOp==r)))a=m(o.changes),0==N(t.from,t.to)&&0==N(t.from,a.to)?a.to=Nr(t):o.changes.push(Xr(e,t));else{var l=m(i.done);for(l&&l.ranges||Jr(e.sel,i.done),o={changes:[Xr(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||Re(e,"historyAdded")}function Zr(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Kr(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Zr(e,o,m(i.done),t))?i.done[i.done.length-1]=t:Jr(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&r.clearRedo!==!1&&qr(i.undone)}function Jr(e,t){var n=m(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Qr(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function ei(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function ti(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(ei(n[i]));return r}function ni(e,t){var n=ti(e,t),r=Z(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function ri(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?Rr.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var l=0;l<a.length;++l){var c=a[l],u=void 0;if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&d(t,Number(u[1]))>-1&&(m(s)[h]=c[h],delete c[h])}}}return r}function ii(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var o=N(n,i)<0;o!=N(r,i)<0?(i=n,n=r):o!=N(n,r)<0&&(n=r)}return new Pr(i,n)}return new Pr(r||n,n)}function oi(e,t,n,r){hi(e,new Rr([ii(e,e.sel.primary(),t,n)],0),r)}function ai(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=ii(e,e.sel.ranges[i],t[i],null);var o=kr(r,e.sel.primIndex);hi(e,o,n)}function si(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,hi(e,kr(i,e.sel.primIndex),r)}function li(e,t,n,r){hi(e,Or(t,n),r)}function ci(e,t,n){var r={ranges:t.ranges,update:function(t){var n=this;this.ranges=[];for(var r=0;r<t.length;r++)n.ranges[r]=new Pr(B(e,t[r].anchor),B(e,t[r].head))},origin:n&&n.origin};return Re(e,"beforeSelectionChange",e,r),e.cm&&Re(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?kr(r.ranges,r.ranges.length-1):t}function ui(e,t,n){var r=e.history.done,i=m(r);i&&i.ranges?(r[r.length-1]=t,di(e,t,n)):hi(e,t,n)}function hi(e,t,n){di(e,t,n),Kr(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function di(e,t,n){(Oe(e,"beforeSelectionChange")||e.cm&&Oe(e.cm,"beforeSelectionChange"))&&(t=ci(e,t,n));var r=n&&n.bias||(N(t.primary().head,e.sel.primary().head)<0?-1:1);fi(e,mi(e,t,r,!0)),n&&n.scroll===!1||!e.cm||Qn(e.cm)}function fi(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,ke(e.cm)),St(e,"cursorActivity",e))}function pi(e){fi(e,mi(e,e.sel,null,!1),Ta)}function mi(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=gi(e,a.anchor,s&&s.anchor,n,r),c=gi(e,a.head,s&&s.head,n,r);(i||l!=a.anchor||c!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new Pr(l,c))}return i?kr(i,t.primIndex):t}function vi(e,t,n,r,i){var o=E(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(Re(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var c=l.find(r<0?1:-1),u=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(c=yi(e,c,-r,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=N(c,n))&&(r<0?u<0:u>0))return vi(e,c,t,r,i)}var h=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(h=yi(e,h,r,h.line==t.line?o:null)),h?vi(e,h,t,r,i):null}}return t}function gi(e,t,n,r,i){var o=r||1,a=vi(e,t,n,o,i)||!i&&vi(e,t,n,o,!0)||vi(e,t,n,-o,i)||!i&&vi(e,t,n,-o,!0);return a?a:(e.cantEdit=!0,O(e.first,0))}function yi(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?B(e,O(t.line-1)):null:n>0&&t.ch==(r||E(e,t.line)).text.length?t.line<e.first+e.size-1?O(t.line+1,0):null:new O(t.line,t.ch+n)}function bi(e){e.setSelection(O(e.firstLine(),0),O(e.lastLine()),Ta)}function xi(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=B(e,t)),n&&(r.to=B(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),Re(e,"beforeChange",e,r),e.cm&&Re(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function wi(e,t,n){if(e.cm){if(!e.cm.curOp)return ur(e.cm,wi)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Oe(e,"beforeChange")||e.cm&&Oe(e.cm,"beforeChange"))||(t=xi(e,t,!0))){var r=ka&&!n&&J(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)_i(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else _i(e,t)}}function _i(e,t){if(1!=t.text.length||""!=t.text[0]||0!=N(t.from,t.to)){var n=Ir(e,t);$r(e,t,n,e.cm?e.cm.curOp.id:NaN),Ei(e,t,n,Z(e,t));var r=[];Hr(e,function(e,n){n||d(r,e.history)!=-1||(Ri(e.history,t),r.push(e.history)),Ei(e,t,null,Z(e,t))})}}function Mi(e,t,n){if(!e.cm||!e.cm.state.suppressEdits||n){for(var r,i=e.history,o=e.sel,a="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,l=0;l<a.length&&(r=a[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;r=a.pop(),r.ranges;){if(Jr(r,s),n&&!r.equals(e.sel))return void hi(e,r,{clearRedo:!1});o=r}var c=[];Jr(o,s),s.push({changes:c,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var u=Oe(e,"beforeChange")||e.cm&&Oe(e.cm,"beforeChange"),h=function(n){var i=r.changes[n];if(i.origin=t,u&&!xi(e,i,!1))return a.length=0,{};c.push(Xr(e,i));var o=n?Ir(e,i):m(a);Ei(e,i,o,ni(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Nr(i)});var s=[];Hr(e,function(e,t){t||d(s,e.history)!=-1||(Ri(e.history,i),s.push(e.history)),Ei(e,i,null,ni(e,i))})},f=r.changes.length-1;f>=0;--f){var p=h(f);if(p)return p.v}}}}function Si(e,t){if(0!=t&&(e.first+=t,e.sel=new Rr(v(e.sel.ranges,function(e){return new Pr(O(e.anchor.line+t,e.anchor.ch),O(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){fr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)pr(e.cm,r,"gutter")}}function Ei(e,t,n,r){if(e.cm&&!e.cm.curOp)return ur(e.cm,Ei)(e,t,n,r);if(t.to.line<e.first)return void Si(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Si(e,i),t={from:O(e.first,0),to:O(t.to.line+i,t.to.ch),text:[m(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:O(o,E(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=T(e,t.from,t.to),n||(n=Ir(e,t)),e.cm?Ti(e.cm,t,r):Gr(e,t,r),di(e,n,Ta)}}function Ti(e,t,n){var r=e.doc,i=e.display,o=t.from,a=t.to,s=!1,l=o.line;e.options.lineWrapping||(l=L(le(E(r,o.line))),r.iter(l,a.line+1,function(e){if(e==i.maxLine)return s=!0,!0})),r.sel.contains(t.from,t.to)>-1&&ke(e),Gr(r,t,n,wn(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,function(e){var t=me(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,o.line),br(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?fr(e):o.line!=a.line||1!=t.text.length||jr(e.doc,t)?fr(e,o.line,a.line+1,c):pr(e,o.line,"text");var u=Oe(e,"changes"),h=Oe(e,"change");if(h||u){var d={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};h&&St(e,"change",e,d),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}function Ci(e,t,n,r,i){if(r||(r=n),N(r,n)<0){var o=r;r=n,n=o}"string"==typeof t&&(t=e.splitLines(t)),wi(e,{from:n,to:r,text:t,origin:i})}function Ai(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Li(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)Ai(o.ranges[s].anchor,t,n,r),Ai(o.ranges[s].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=O(c.from.line+r,c.from.ch),c.to=O(c.to.line+r,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function Ri(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Li(e.done,n,r,i),Li(e.undone,n,r,i)}function Pi(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=E(e,F(e,t)):i=L(t),null==i?null:(r(o,i)&&e.cm&&pr(e.cm,i,n),o)}function ki(e){var t=this;this.lines=e,this.parent=null;for(var n=0,r=0;r<e.length;++r)e[r].parent=t,n+=e[r].height;this.height=n}function Oi(e){var t=this;this.children=e;for(var n=0,r=0,i=0;i<e.length;++i){var o=e[i];n+=o.chunkSize(),r+=o.height,o.parent=t}this.size=n,this.height=r,this.parent=null}function Ni(e,t,n){var r=this;if(n)for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);this.doc=e,this.node=t}function Di(e,t,n){pe(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Jn(e,null,n)}function Ii(e,t,n,r){var i=new Ni(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),Pi(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!de(e,t)){var r=pe(t)<e.scrollTop;A(t,t.height+Ft(i)),r&&Jn(o,null,i.height),o.curOp.forceUpdate=!0}return!0}),i}function Ui(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++as}function Fi(e,t,n,i,o){if(i&&i.shared)return zi(e,t,n,i,o);if(e.cm&&!e.cm.curOp)return ur(e.cm,Fi)(e,t,n,i,o);var a=new Ui(e,o),s=N(t,n);if(i&&c(i,a,!1),s>0||0==s&&a.clearWhenEmpty!==!1)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=r("span",[a.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(se(e,t.line,t,n,a)||t.line!=n.line&&se(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");H()}a.addToHistory&&$r(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var l,u=t.line,h=e.cm;if(e.iter(u,n.line+1,function(e){h&&a.collapsed&&!h.options.lineWrapping&&le(e)==h.display.maxLine&&(l=!0),a.collapsed&&u!=t.line&&A(e,0),q(e,new V(a,u==t.line?t.ch:null,u==n.line?n.ch:null)),++u}),a.collapsed&&e.iter(t.line,n.line+1,function(t){de(e,t)&&A(t,0)}),a.clearOnEnter&&Ua(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(G(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++as,a.atomic=!0),h){if(l&&(h.curOp.updateMaxLine=!0),a.collapsed)fr(h,t.line,n.line+1);else if(a.className||a.title||a.startStyle||a.endStyle||a.css)for(var d=t.line;d<=n.line;d++)pr(h,d,"text");a.atomic&&pi(h.doc),St(h,"markerAdded",h,a)}return a}function Bi(e,t){var n=this;this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=n}function zi(e,t,n,r,i){r=c(r),r.shared=!1;var o=[Fi(e,t,n,r,i)],a=o[0],s=r.widgetNode;return Hr(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(Fi(e,B(e,t),B(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=m(o)}),new Bi(o,a)}function ji(e){return e.findMarks(O(e.first,0),e.clipPos(O(e.lastLine())),function(e){return e.parent})}function Gi(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(N(o,a)){var s=Fi(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function Hi(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Hr(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];d(r,o.doc)==-1&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}function Vi(e){var t=this;if(qi(t),!Pe(t,e)&&!Bt(t.display,e)){De(e),na&&(cs=+new Date);var n=Mn(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,s=function(e,r){if(!t.options.allowDropFileTypes||d(t.options.allowDropFileTypes,e.type)!=-1){var s=new FileReader;s.onload=ur(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[r]=e,++a==i){n=B(t.doc,n);var l={from:n,to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};wi(t.doc,l),ui(t.doc,Or(n,Nr(l)))}}),s.readAsText(e)}},l=0;l<i;++l)s(r[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var c=e.dataTransfer.getData("Text");if(c){var u;if(t.state.draggingText&&!t.state.draggingText.copy&&(u=t.listSelections()),di(t.doc,Or(n,n)),u)for(var h=0;h<u.length;++h)Ci(t.doc,"",u[h].anchor,u[h].head,"drag");t.replaceSelection(c,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Wi(e,t){if(na&&(!e.state.draggingText||+new Date-cs<100))return void Fe(t);if(!Pe(e,t)&&!Bt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!la)){var n=r("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",sa&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),sa&&n.parentNode.removeChild(n)}}function Xi(e,t){var i=Mn(e,t);if(i){var o=document.createDocumentFragment();Cn(e,i,o),e.display.dragCursor||(e.display.dragCursor=r("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),n(e.display.dragCursor,o)}}function qi(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Yi(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function $i(){us||(Zi(),us=!0)}function Zi(){var e;Ua(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Yi(Ki)},100))}),Ua(window,"blur",function(){return Yi(On)})}function Ki(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Ji(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,o,a=0;a<t.length-1;a++){var s=t[a];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))n=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);
i=!0}}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Qi(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=v(n.split(" "),Ji),o=0;o<i.length;o++){var a=void 0,s=void 0;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function eo(e,t,n,r){t=ro(t);var i=t.call?t.call(e,r):t[e];if(i===!1)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return eo(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=eo(e,t.fallthrough[o],n,r);if(a)return a}}}function to(e){var t="string"==typeof e?e:hs[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function no(e,t){if(sa&&34==e.keyCode&&e.char)return!1;var n=hs[e.keyCode],r=n;return null!=r&&!e.altGraphKey&&(e.altKey&&"Alt"!=n&&(r="Alt-"+r),(ya?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(r="Ctrl-"+r),(ya?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(r="Cmd-"+r),!t&&e.shiftKey&&"Shift"!=n&&(r="Shift-"+r),r)}function ro(e){return"string"==typeof e?ms[e]:e}function io(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&N(o.from,m(r).to)<=0;){var a=r.pop();if(N(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}cr(e,function(){for(var t=r.length-1;t>=0;t--)Ci(e.doc,"",r[t].from,r[t].to,"+delete");Qn(e)})}function oo(e,t){var n=E(e.doc,t),r=le(n);r!=n&&(t=L(r));var i=Ce(r),o=i?i[0].level%2?we(r):xe(r):0;return O(t,o)}function ao(e,t){for(var n,r=E(e.doc,t);n=ae(r);)r=n.find(1,!0).line,t=null;var i=Ce(r),o=i?i[0].level%2?xe(r):we(r):r.text.length;return O(null==t?L(r):t,o)}function so(e,t){var n=oo(e,t.line),r=E(e.doc,n.line),i=Ce(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return O(n.line,a?0:o)}return n}function lo(e,t,n){if("string"==typeof t&&(t=ys[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=Ea}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function co(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=eo(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&eo(t,e.options.extraKeys,n,e)||eo(t,e.options.keyMap,n,e)}function uo(e,t,n,r){var i=e.state.keySeq;if(i){if(to(t))return"handled";bs.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),t=i+" "+t}var o=co(e,t,r);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&St(e,"keyHandled",e,t,n),"handled"!=o&&"multi"!=o||(De(n),Ln(e)),i&&!o&&/\'$/.test(t)?(De(n),!0):!!o}function ho(e,t){var n=no(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?uo(e,"Shift-"+n,t,function(t){return lo(e,t,!0)})||uo(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return lo(e,t)}):uo(e,n,t,function(t){return lo(e,t)}))}function fo(e,t,n){return uo(e,"'"+n+"'",t,function(t){return lo(e,t,!0)})}function po(e){var t=this;if(t.curOp.focus=o(),!Pe(t,e)){na&&ra<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=ho(t,e);sa&&(xs=r?n:null,!r&&88==n&&!ja&&(fa?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||mo(t)}}function mo(e){function t(e){18!=e.keyCode&&e.altKey||(xa(n,"CodeMirror-crosshair"),Le(document,"keyup",t),Le(document,"mouseover",t))}var n=e.display.lineDiv;a(n,"CodeMirror-crosshair"),Ua(document,"keyup",t),Ua(document,"mouseover",t)}function vo(e){16==e.keyCode&&(this.doc.sel.shift=!1),Pe(this,e)}function go(e){var t=this;if(!(Bt(t.display,e)||Pe(t,e)||e.ctrlKey&&!e.altKey||fa&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(sa&&n==xs)return xs=null,void De(e);if(!sa||e.which&&!(e.which<10)||!ho(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(fo(t,e,i)||t.display.input.onKeyPress(e))}}}function yo(e){var t=this,n=t.display;if(!(Pe(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,Bt(n,e))return void(ia||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!Mo(t,e)){var r=Mn(t,e);switch(window.focus(),ze(e)){case 1:t.state.selectingText?t.state.selectingText(e):r?bo(t,e,r):Be(e)==n.scroller&&De(e);break;case 2:ia&&(t.state.lastMiddleDown=+new Date),r&&oi(t.doc,r),setTimeout(function(){return n.input.focus()},20),De(e);break;case 3:ba?So(t,e):Pn(t)}}}}function bo(e,t,n){na?setTimeout(l(Rn,e),0):e.curOp.focus=o();var r,i=+new Date;gs&&gs.time>i-400&&0==N(gs.pos,n)?r="triple":vs&&vs.time>i-400&&0==N(vs.pos,n)?(r="double",gs={time:i,pos:n}):(r="single",vs={time:i,pos:n});var a,s=e.doc.sel,c=fa?t.metaKey:t.ctrlKey;e.options.dragDrop&&Fa&&!e.isReadOnly()&&"single"==r&&(a=s.contains(n))>-1&&(N((a=s.ranges[a]).from(),n)<0||n.xRel>0)&&(N(a.to(),n)>0||n.xRel<0)?xo(e,t,n,c):wo(e,t,n,r,c)}function xo(e,t,n,r){var i=e.display,o=+new Date,a=ur(e,function(s){ia&&(i.scroller.draggable=!1),e.state.draggingText=!1,Le(document,"mouseup",a),Le(i.scroller,"drop",a),Math.abs(t.clientX-s.clientX)+Math.abs(t.clientY-s.clientY)<10&&(De(s),!r&&+new Date-200<o&&oi(e.doc,n),ia||na&&9==ra?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())});ia&&(i.scroller.draggable=!0),e.state.draggingText=a,a.copy=fa?t.altKey:t.ctrlKey,i.scroller.dragDrop&&i.scroller.dragDrop(),Ua(document,"mouseup",a),Ua(i.scroller,"drop",a)}function wo(e,t,n,r,i){function a(t){if(0!=N(b,t))if(b=t,"rect"==r){for(var i=[],o=e.options.tabSize,a=u(E(h,n.line).text,n.ch,o),s=u(E(h,t.line).text,t.ch,o),l=Math.min(a,s),c=Math.max(a,s),v=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));v<=g;v++){var y=E(h,v).text,x=f(y,l,o);l==c?i.push(new Pr(O(v,x),O(v,x))):y.length>x&&i.push(new Pr(O(v,x),O(v,f(y,c,o))))}i.length||i.push(new Pr(n,n)),hi(h,kr(m.ranges.slice(0,p).concat(i),p),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var w=d,_=w.anchor,M=t;if("single"!=r){var S;S="double"==r?e.findWordAt(t):new Pr(O(t.line,0),B(h,O(t.line+1,0))),N(S.anchor,_)>0?(M=S.head,_=U(w.from(),S.anchor)):(M=S.anchor,_=I(w.to(),S.head))}var T=m.ranges.slice(0);T[p]=new Pr(B(h,_),M),hi(h,kr(T,p),Ca)}}function s(t){var n=++w,i=Mn(e,t,!0,"rect"==r);if(i)if(0!=N(i,b)){e.curOp.focus=o(),a(i);var l=Fn(c,h);(i.line>=l.to||i.line<l.from)&&setTimeout(ur(e,function(){w==n&&s(t)}),150)}else{var u=t.clientY<x.top?-20:t.clientY>x.bottom?20:0;u&&setTimeout(ur(e,function(){w==n&&(c.scroller.scrollTop+=u,s(t))}),50)}}function l(t){e.state.selectingText=!1,w=1/0,De(t),c.input.focus(),Le(document,"mousemove",_),Le(document,"mouseup",M),h.history.lastSelOrigin=null}var c=e.display,h=e.doc;De(t);var d,p,m=h.sel,v=m.ranges;if(i&&!t.shiftKey?(p=h.sel.contains(n),d=p>-1?v[p]:new Pr(n,n)):(d=h.sel.primary(),p=h.sel.primIndex),pa?t.shiftKey&&t.metaKey:t.altKey)r="rect",i||(d=new Pr(n,n)),n=Mn(e,t,!0,!0),p=-1;else if("double"==r){var g=e.findWordAt(n);d=e.display.shift||h.extend?ii(h,d,g.anchor,g.head):g}else if("triple"==r){var y=new Pr(O(n.line,0),B(h,O(n.line+1,0)));d=e.display.shift||h.extend?ii(h,d,y.anchor,y.head):y}else d=ii(h,d,n);i?p==-1?(p=v.length,hi(h,kr(v.concat([d]),p),{scroll:!1,origin:"*mouse"})):v.length>1&&v[p].empty()&&"single"==r&&!t.shiftKey?(hi(h,kr(v.slice(0,p).concat(v.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),m=h.sel):si(h,p,d,Ca):(p=0,hi(h,new Rr([d],0),Ca),m=h.sel);var b=n,x=c.wrapper.getBoundingClientRect(),w=0,_=ur(e,function(e){ze(e)?s(e):l(e)}),M=ur(e,l);e.state.selectingText=M,Ua(document,"mousemove",_),Ua(document,"mouseup",M)}function _o(e,t,n,r){var i,o;try{i=t.clientX,o=t.clientY}catch(e){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&De(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!Oe(e,n))return Ue(t);o-=s.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=a.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i){var u=R(e.doc,o),h=e.options.gutters[l];return Re(e,n,e,u,h,t),Ue(t)}}}function Mo(e,t){return _o(e,t,"gutterClick",!0)}function So(e,t){Bt(e.display,t)||Eo(e,t)||Pe(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function Eo(e,t){return!!Oe(e,"gutterContextMenu")&&_o(e,t,"gutterContextMenu",!1)}function To(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),an(e)}function Co(e){function t(t,r,i,o){e.defaults[t]=r,i&&(n[t]=o?function(e,t,n){n!=ws&&i(e,t,n)}:i)}var n=e.optionHandlers;e.defineOption=t,e.Init=ws,t("value","",function(e,t){return e.setValue(t)},!0),t("mode",null,function(e,t){e.doc.modeOption=t,Br(e)},!0),t("indentUnit",2,Br,!0),t("indentWithTabs",!1),t("smartIndent",!0),t("tabSize",4,function(e){zr(e),an(e),fr(e)},!0),t("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(o==-1)break;i=o+t.length,n.push(O(r,o))}r++});for(var i=n.length-1;i>=0;i--)Ci(e.doc,t,n[i],O(n[i].line,n[i].ch+t.length))}}),t("specialChars",/[\u0000-\u001f\u007f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ws&&e.refresh()}),t("specialCharPlaceholder",ft,function(e){return e.refresh()},!0),t("electricChars",!0),t("inputStyle",da?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),t("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),t("rtlMoveVisually",!ma),t("wholeLineUpdateBefore",!0),t("theme","default",function(e){To(e),Ao(e)},!0),t("keyMap","default",function(e,t,n){var r=ro(t),i=n!=ws&&ro(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),t("extraKeys",null),t("lineWrapping",!1,Ro,!0),t("gutters",[],function(e){Lr(e.options),Ao(e)},!0),t("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?xn(e.display)+"px":"0",e.refresh()},!0),t("coverGutterNextToScrollbar",!1,function(e){return Wn(e)},!0),t("scrollbarStyle","native",function(e){qn(e),Wn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),t("lineNumbers",!1,function(e){Lr(e.options),Ao(e)},!0),t("firstLineNumber",1,Ao,!0),t("lineNumberFormatter",function(e){return e},Ao,!0),t("showCursorWhenSelecting",!1,En,!0),t("resetSelectionOnContextMenu",!0),t("lineWiseCopyCut",!0),t("readOnly",!1,function(e,t){"nocursor"==t?(On(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),t("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),t("dragDrop",!0,Lo),t("allowDropFileTypes",null),t("cursorBlinkRate",530),t("cursorScrollMargin",0),t("cursorHeight",1,En,!0),t("singleCursorHeightPerLine",!0,En,!0),t("workTime",100),t("workDelay",100),t("flattenSpans",!0,zr,!0),t("addModeClass",!1,zr,!0),t("pollInterval",100),t("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),t("historyEventDelay",1250),t("viewportMargin",10,function(e){return e.refresh()},!0),t("maxHighlightLength",1e4,zr,!0),t("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),t("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),t("autofocus",null)}function Ao(e){Ar(e),fr(e),Nn(e)}function Lo(e,t,n){var r=n&&n!=ws;if(!t!=!r){var i=e.display.dragFunctions,o=t?Ua:Le;o(e.display.scroller,"dragstart",i.start),o(e.display.scroller,"dragenter",i.enter),o(e.display.scroller,"dragover",i.over),o(e.display.scroller,"dragleave",i.leave),o(e.display.scroller,"drop",i.drop)}}function Ro(e){e.options.lineWrapping?(a(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(xa(e.display.wrapper,"CodeMirror-wrap"),ve(e)),_n(e),fr(e),an(e),setTimeout(function(){return Wn(e)},100)}function Po(e,t){var n=this;if(!(this instanceof Po))return new Po(e,t);this.options=t=t?c(t):{},c(_s,t,!1),Lr(t);var r=t.value;"string"==typeof r&&(r=new ls(r,t.mode,null,t.lineSeparator)),this.doc=r;var i=new Po.inputStyles[t.inputStyle](this),o=this.display=new S(e,r,i);o.wrapper.CodeMirror=this,Ar(this),To(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),qn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new h,keySeq:null,specialChars:null},t.autofocus&&!da&&o.input.focus(),na&&ra<11&&setTimeout(function(){return n.display.input.reset(!0)},20),ko(this),$i(),tr(this),this.curOp.forceUpdate=!0,Vr(this,r),t.autofocus&&!da||this.hasFocus()?setTimeout(l(kn,this),20):On(this);for(var a in Ms)Ms.hasOwnProperty(a)&&Ms[a](n,t[a],ws);Dn(this),t.finishInit&&t.finishInit(this);for(var s=0;s<Ss.length;++s)Ss[s](n);nr(this),ia&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function ko(e){function t(){i.activeTouch&&(o=setTimeout(function(){return i.activeTouch=null},1e3),a=i.activeTouch,a.end=+new Date)}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function r(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}var i=e.display;Ua(i.scroller,"mousedown",ur(e,yo)),na&&ra<11?Ua(i.scroller,"dblclick",ur(e,function(t){if(!Pe(e,t)){var n=Mn(e,t);if(n&&!Mo(e,t)&&!Bt(e.display,t)){De(t);var r=e.findWordAt(n);oi(e.doc,r.anchor,r.head)}}})):Ua(i.scroller,"dblclick",function(t){return Pe(e,t)||De(t)}),ba||Ua(i.scroller,"contextmenu",function(t){return So(e,t)});var o,a={end:0};Ua(i.scroller,"touchstart",function(t){if(!Pe(e,t)&&!n(t)){i.input.ensurePolled(),clearTimeout(o);var r=+new Date;i.activeTouch={start:r,moved:!1,prev:r-a.end<=300?a:null},1==t.touches.length&&(i.activeTouch.left=t.touches[0].pageX,i.activeTouch.top=t.touches[0].pageY)}}),Ua(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),Ua(i.scroller,"touchend",function(n){var o=i.activeTouch;if(o&&!Bt(i,n)&&null!=o.left&&!o.moved&&new Date-o.start<300){var a,s=e.coordsChar(i.activeTouch,"page");a=!o.prev||r(o,o.prev)?new Pr(s,s):!o.prev.prev||r(o,o.prev.prev)?e.findWordAt(s):new Pr(O(s.line,0),B(e.doc,O(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),De(n)}t()}),Ua(i.scroller,"touchcancel",t),Ua(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Bn(e,i.scroller.scrollTop),zn(e,i.scroller.scrollLeft,!0),Re(e,"scroll",e))}),Ua(i.scroller,"mousewheel",function(t){return Hn(e,t)}),Ua(i.scroller,"DOMMouseScroll",function(t){return Hn(e,t)}),Ua(i.wrapper,"scroll",function(){return i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(t){Pe(e,t)||Fe(t)},over:function(t){Pe(e,t)||(Xi(e,t),Fe(t))},start:function(t){return Wi(e,t)},drop:ur(e,Vi),leave:function(t){Pe(e,t)||qi(e)}};var s=i.input.getField();Ua(s,"keyup",function(t){return vo.call(e,t)}),Ua(s,"keydown",ur(e,po)),Ua(s,"keypress",ur(e,go)),Ua(s,"focus",function(t){return kn(e,t)}),Ua(s,"blur",function(t){return On(e,t)})}function Oo(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=et(e,t):n="prev");var a=e.options.tabSize,s=E(o,t),l=u(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,h=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&(c=o.mode.indent(i,s.text.slice(h.length),s.text),c==Ea||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?u(E(o,t-1).text,null,a):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",f=0;if(e.options.indentWithTabs)for(var m=Math.floor(c/a);m;--m)f+=a,d+="\t";if(f<c&&(d+=p(c-f)),d!=h)return Ci(o,d,O(t,0),O(t,h.length),"+input"),s.stateAfter=null,!0;for(var v=0;v<o.sel.ranges.length;v++){var g=o.sel.ranges[v];if(g.head.line==t&&g.head.ch<h.length){var y=O(t,h.length);si(o,v,new Pr(y,y));break}}}function No(e){Es=e}function Do(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a=e.state.pasteIncoming||"paste"==i,s=Ba(t),l=null;if(a&&r.ranges.length>1)if(Es&&Es.text.join("\n")==t){if(r.ranges.length%Es.text.length==0){l=[];for(var c=0;c<Es.text.length;c++)l.push(o.splitLines(Es.text[c]))}}else s.length==r.ranges.length&&(l=v(s,function(e){return[e]}));for(var u,h=r.ranges.length-1;h>=0;h--){var d=r.ranges[h],f=d.from(),p=d.to();d.empty()&&(n&&n>0?f=O(f.line,f.ch-n):e.state.overwrite&&!a?p=O(p.line,Math.min(E(o,p.line).text.length,p.ch+m(s).length)):Es&&Es.lineWise&&Es.text.join("\n")==t&&(f=p=O(f.line,0))),u=e.curOp.updateInput;var g={from:f,to:p,text:l?l[h%l.length]:s,origin:i||(a?"paste":e.state.cutIncoming?"cut":"+input")};wi(e.doc,g),St(e,"inputRead",e,g)}t&&!a&&Uo(e,t),Qn(e),e.curOp.updateInput=u,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Io(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||cr(t,function(){return Do(t,n,0,null,"paste")}),!0}function Uo(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Oo(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(E(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Oo(e,i.head.line,"smart"));a&&St(e,"electricInput",e,i.head.line)}}}function Fo(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:O(i,0),head:O(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Bo(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function zo(){var e=r("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=r("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return ia?e.style.width="1000px":e.setAttribute("wrap","off"),ha&&(e.style.border="1px solid black"),Bo(e),t}function jo(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&ur(this,t[e])(this,n,i),Re(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](ro(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:hr(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");g(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,fr(this)}),removeOverlay:hr(function(e){for(var t=this,n=this.state.overlays,r=0;r<n.length;++r){var i=n[r].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return n.splice(r,1),t.state.modeGen++,void fr(t)}}),indentLine:hr(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),P(this.doc,e)&&Oo(this,e,t,n)}),indentSelection:hr(function(e){for(var t=this,n=this.doc.sel.ranges,r=-1,i=0;i<n.length;i++){var o=n[i];if(o.empty())o.head.line>r&&(Oo(t,o.head.line,e,!0),r=o.head.line,i==t.doc.sel.primIndex&&Qn(t));else{var a=o.from(),s=o.to(),l=Math.max(r,a.line);r=Math.min(t.lastLine(),s.line-(s.ch?0:1))+1;for(var c=l;c<r;++c)Oo(t,c,e);var u=t.doc.sel.ranges;0==a.ch&&n.length==u.length&&u[i].from().ch>0&&si(t.doc,i,new Pr(a,u[i].to()),Ta)}}}),getTokenAt:function(e,t){return it(this,e,t)},getLineTokens:function(e,t){return it(this,O(e),t,!0)},getTokenTypeAt:function(e){e=B(this.doc,e);var t,n=Qe(this,E(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=this,i=[];if(!n.hasOwnProperty(t))return i;var o=n[t],a=this.getModeAt(e);if("string"==typeof a[t])o[a[t]]&&i.push(o[a[t]]);else if(a[t])for(var s=0;s<a[t].length;s++){var l=o[a[t][s]];l&&i.push(l)}else a.helperType&&o[a.helperType]?i.push(o[a.helperType]):o[a.name]&&i.push(o[a.name]);for(var c=0;c<o._global.length;c++){var u=o._global[c];u.pred(a,r)&&d(i,u.val)==-1&&i.push(u.val)}return i},getStateAfter:function(e,t){var n=this.doc;return e=F(n,null==e?n.first+n.size-1:e),et(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?B(this.doc,e):e?r.from():r.to(),dn(this,n,t||"page")},charCoords:function(e,t){return hn(this,B(this.doc,e),t||"page")},coordsChar:function(e,t){return e=un(this,e,t||"page"),mn(this,e.left,e.top)},lineAtHeight:function(e,t){return e=un(this,{top:e,left:0},t||"page").top,R(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=E(this.doc,e)}else r=e;return cn(this,r,{top:0,left:0},t||"page",n).top+(i?this.doc.height-pe(r):0)},defaultTextHeight:function(){return gn(this.display)},defaultCharWidth:function(){return yn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display;e=dn(this,B(this.doc,e));var a=e.bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&Zn(this,s,a,s+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:hr(po),triggerOnKeyPress:hr(go),triggerOnKeyUp:vo,execCommand:function(e){if(ys.hasOwnProperty(e))return ys[e].call(null,this)},triggerElectric:hr(function(e){Uo(this,e)}),findPosH:function(e,t,n,r){var i=this,o=1;t<0&&(o=-1,t=-t);for(var a=B(this.doc,e),s=0;s<t&&(a=Go(i.doc,a,o,n,r),!a.hitSide);++s);return a},moveH:hr(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Go(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},Aa)}),deleteH:hr(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):io(this,function(n){var i=Go(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=this,o=1,a=r;t<0&&(o=-1,t=-t);for(var s=B(this.doc,e),l=0;l<t;++l){var c=dn(i,s,"div");if(null==a?a=c.left:c.left=a,s=Ho(i,c,o,n),s.hitSide)break}return s},moveV:hr(function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=dn(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=Ho(n,s,e,t);return"page"==t&&a==r.sel.primary()&&Jn(n,null,hn(n,l,"div").top-s.top),l},Aa),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=this.doc,n=E(t,e.line).text,r=e.ch,i=e.ch;if(n){var o=this.getHelper(e,"wordChars");(e.xRel<0||i==n.length)&&r?--r:++i;for(var a=n.charAt(r),s=w(a,o)?function(e){return w(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!w(e)};r>0&&s(n.charAt(r-1));)--r;for(;i<n.length&&s(n.charAt(i));)++i}return new Pr(O(e.line,r),O(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?a(this.display.cursorDiv,"CodeMirror-overwrite"):xa(this.display.cursorDiv,"CodeMirror-overwrite"),Re(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==o()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:hr(function(e,t){null==e&&null==t||er(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ht(this)-this.display.barHeight,width:e.scrollWidth-Ht(this)-this.display.barWidth,clientHeight:Wt(this),clientWidth:Vt(this)}},scrollIntoView:hr(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:O(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)er(this),this.curOp.scrollToPos=e;else{var n=Kn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:hr(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&on(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){pr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,Re(this,"refresh",this)}),operation:function(e){return cr(this,e)},refresh:hr(function(){var e=this.display.cachedTextHeight;fr(this),this.curOp.forceUpdate=!0,an(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),Tr(this),(null==e||Math.abs(e-gn(this.display))>.5)&&_n(this),Re(this,"refresh",this)}),swapDoc:hr(function(e){var t=this.doc;return t.cm=null,Vr(this,e),an(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,St(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ne(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}function Go(e,t,n,r,i){function o(){var t=s+n;return!(t<e.first||t>=e.first+e.size)&&(s=t,u=E(e,t))}function a(e){var t=(i?Ee:Te)(u,l,n,!0);if(null==t){if(e||!o())return!1;l=i?(n<0?we:xe)(u):n<0?u.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,c=n,u=E(e,s);if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var h=null,d="group"==r,f=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||a(!p);p=!1){var m=u.text.charAt(l)||"\n",v=w(m,f)?"w":d&&"\n"==m?"n":!d||/\s/.test(m)?null:"p";if(!d||p||v||(v="s"),h&&h!=v){n<0&&(n=1,a());break}if(v&&(h=v),n>0&&!a(!p))break}var g=gi(e,O(s,l),t,c,!0);return N(t,g)||(g.hitSide=!0),g}function Ho(e,t,n,r){var i,o=e.doc,a=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(s-.5*gn(e.display),3);i=(n>0?t.bottom:t.top)+n*l}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(var c;c=mn(e,a,i),c.outside;){if(n<0?i<=0:i>=o.height){c.hitSide=!0;break}i+=5*n}return c}function Vo(e,t){var n=Zt(e,t.line);if(!n||n.hidden)return null;var r=E(e.doc,t.line),i=qt(n,r,t.line),o=Ce(r),a="left";if(o){var s=Me(o,t.ch);a=s%2?"right":"left"}var l=Qt(i.map,t.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function Wo(e,t){return t&&(e.bad=!0),e}function Xo(e,t,n,r,i){function o(e){return function(t){return t.id==e}}function a(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return void(s+=""==n?t.textContent.replace(/\u200b/g,""):n);var u,h=t.getAttribute("cm-marker");if(h){var d=e.findMarks(O(r,0),O(i+1,0),o(+h));return void(d.length&&(u=d[0].find())&&(s+=T(e.doc,u.from,u.to).join(c)))}if("false"==t.getAttribute("contenteditable"))return;for(var f=0;f<t.childNodes.length;f++)a(t.childNodes[f]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var p=t.nodeValue;if(!p)return;l&&(s+=c,l=!1),s+=p}}for(var s="",l=!1,c=e.doc.lineSeparator();a(t),t!=n;)t=t.nextSibling;return s}function qo(e,t,n){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[n],!r)return Wo(e.clipPos(O(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return Yo(o,t,n)}}function Yo(e,t,n){function r(t,n,r){for(var i=-1;i<(h?h.length:0);i++)for(var o=i<0?u.map:h[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var l=L(i<0?e.line:e.rest[i]),c=o[a]+r;return(r<0||s!=t)&&(c=o[a+(r?1:0)]),O(l,c)}}}var o=e.text.firstChild,a=!1;if(!t||!i(o,t))return Wo(O(L(e.line),0),!0);if(t==o&&(a=!0,t=o.childNodes[n],n=0,!t)){var s=e.rest?m(e.rest):e.line;return Wo(O(L(s),s.text.length),a)}var l=3==t.nodeType?t:null,c=t;for(l||1!=t.childNodes.length||3!=t.firstChild.nodeType||(l=t.firstChild,n&&(n=l.nodeValue.length));c.parentNode!=o;)c=c.parentNode;var u=e.measure,h=u.maps,d=r(l,c,n);if(d)return Wo(d,a);for(var f=c.nextSibling,p=l?l.nodeValue.length-n:0;f;f=f.nextSibling){if(d=r(f,f.firstChild,0))return Wo(O(d.line,d.ch-p),a);p+=f.textContent.length}for(var v=c.previousSibling,g=n;v;v=v.previousSibling){if(d=r(v,v.firstChild,-1))return Wo(O(d.line,d.ch+g),a);g+=v.textContent.length}}function $o(e,t){function n(){e.value=l.getValue()}if(t=t?c(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=o();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}var i;if(e.form&&(Ua(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var a=e.form;i=a.submit;try{var s=a.submit=function(){n(),a.submit=i,a.submit(),a.submit=s}}catch(e){}}t.finishInit=function(t){t.save=n,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,n(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(Le(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var l=Po(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return l}function Zo(e){e.off=Le,e.on=Ua,e.wheelEventPixels=Gn,e.Doc=ls,e.splitLines=Ba,e.countColumn=u,e.findColumn=f,e.isWordChar=x,e.Pass=Ea,e.signal=Re,e.Line=lt,e.changeEnd=Nr,e.scrollbarModel=rs,e.Pos=O,e.cmpPos=N,e.modes=Ha,e.mimeModes=Va,e.resolveMode=Xe,e.getMode=qe,e.modeExtensions=Wa,e.extendMode=Ye,e.copyState=$e,e.startState=Ke,e.innerMode=Ze,e.commands=ys,e.keyMap=ms,e.keyName=no,e.isModifierKey=to,e.lookupKey=eo,e.normalizeKeyMap=Qi,e.StringStream=Xa,e.SharedTextMarker=Bi,e.TextMarker=Ui,e.LineWidget=Ni,e.e_preventDefault=De,e.e_stopPropagation=Ie,e.e_stop=Fe,e.addClass=a,e.contains=i,e.rmClass=xa,e.keyNames=hs;
}var Ko=navigator.userAgent,Jo=navigator.platform,Qo=/gecko\/\d/i.test(Ko),ea=/MSIE \d/.test(Ko),ta=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ko),na=ea||ta,ra=na&&(ea?document.documentMode||6:ta[1]),ia=/WebKit\//.test(Ko),oa=ia&&/Qt\/\d+\.\d+/.test(Ko),aa=/Chrome\//.test(Ko),sa=/Opera\//.test(Ko),la=/Apple Computer/.test(navigator.vendor),ca=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Ko),ua=/PhantomJS/.test(Ko),ha=/AppleWebKit/.test(Ko)&&/Mobile\/\w+/.test(Ko),da=ha||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Ko),fa=ha||/Mac/.test(Jo),pa=/\bCrOS\b/.test(Ko),ma=/win/i.test(Jo),va=sa&&Ko.match(/Version\/(\d*\.\d*)/);va&&(va=Number(va[1])),va&&va>=15&&(sa=!1,ia=!0);var ga,ya=fa&&(oa||sa&&(null==va||va<12.11)),ba=Qo||na&&ra>=9,xa=function(t,n){var r=t.className,i=e(n).exec(r);if(i){var o=r.slice(i.index+i[0].length);t.className=r.slice(0,i.index)+(o?i[1]+o:"")}};ga=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var wa=function(e){e.select()};ha?wa=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:na&&(wa=function(e){try{e.select()}catch(e){}}),h.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var _a,Ma,Sa=30,Ea={toString:function(){return"CodeMirror.Pass"}},Ta={scroll:!1},Ca={origin:"*mouse"},Aa={origin:"+move"},La=[""],Ra=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Pa=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,ka=!1,Oa=!1,Na=null,Da=function(){function e(e){return e<=247?n.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1785?r.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!i.test(n))return!1;for(var r=n.length,u=[],h=0;h<r;++h)u.push(e(n.charCodeAt(h)));for(var d=0,f=c;d<r;++d){var p=u[d];"m"==p?u[d]=f:f=p}for(var v=0,g=c;v<r;++v){var y=u[v];"1"==y&&"r"==g?u[v]="n":a.test(y)&&(g=y,"r"==y&&(u[v]="R"))}for(var b=1,x=u[0];b<r-1;++b){var w=u[b];"+"==w&&"1"==x&&"1"==u[b+1]?u[b]="1":","!=w||x!=u[b+1]||"1"!=x&&"n"!=x||(u[b]=x),x=w}for(var _=0;_<r;++_){var M=u[_];if(","==M)u[_]="N";else if("%"==M){var S=void 0;for(S=_+1;S<r&&"%"==u[S];++S);for(var E=_&&"!"==u[_-1]||S<r&&"1"==u[S]?"1":"N",T=_;T<S;++T)u[T]=E;_=S-1}}for(var C=0,A=c;C<r;++C){var L=u[C];"L"==A&&"1"==L?u[C]="L":a.test(L)&&(A=L)}for(var R=0;R<r;++R)if(o.test(u[R])){var P=void 0;for(P=R+1;P<r&&o.test(u[P]);++P);for(var k="L"==(R?u[R-1]:c),O="L"==(P<r?u[P]:c),N=k||O?"L":"R",D=R;D<P;++D)u[D]=N;R=P-1}for(var I,U=[],F=0;F<r;)if(s.test(u[F])){var B=F;for(++F;F<r&&s.test(u[F]);++F);U.push(new t(0,B,F))}else{var z=F,j=U.length;for(++F;F<r&&"L"!=u[F];++F);for(var G=z;G<F;)if(l.test(u[G])){z<G&&U.splice(j,0,new t(1,z,G));var H=G;for(++G;G<F&&l.test(u[G]);++G);U.splice(j,0,new t(2,H,G)),z=G}else++G;z<F&&U.splice(j,0,new t(1,z,F))}return 1==U[0].level&&(I=n.match(/^\s+/))&&(U[0].from=I[0].length,U.unshift(new t(0,0,I[0].length))),1==m(U).level&&(I=n.match(/\s+$/))&&(m(U).to-=I[0].length,U.push(new t(0,r-I[0].length,r))),2==U[0].level&&U.unshift(new t(1,U[0].to,U[0].to)),U[0].level!=m(U).level&&U.push(new t(U[0].level,r,r)),U}}(),Ia=[],Ua=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Ia).concat(n)}},Fa=function(){if(na&&ra<9)return!1;var e=r("div");return"draggable"in e||"dragDrop"in e}(),Ba=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");a!=-1?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},za=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},ja=function(){var e=r("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ga=null,Ha={},Va={},Wa={},Xa=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Xa.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t,n=this.string.charAt(this.pos);if(t="string"==typeof e?n==e:n&&(e.test?e.test(n):e(n)))return++this.pos,n},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this,t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++e.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=u(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?u(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return u(this.string,null,this.tabSize)-(this.lineStart?u(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(i(o)==i(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}},Ne(lt),lt.prototype.lineNo=function(){return L(this)};var qa,Ya={},$a={},Za=null,Ka=null,Ja={left:0,right:0,top:0,bottom:0},Qa=0,es=null;na?es=-.53:Qo?es=15:aa?es=-.7:la&&(es=-1/3);var ts=function(e,t,n){this.cm=n;var i=this.vert=r("div",[r("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=r("div",[r("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(o),Ua(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),Ua(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,na&&ra<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ts.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},ts.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},ts.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},ts.prototype.zeroWidthHack=function(){var e=fa&&!ca?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new h,this.disableVert=new h},ts.prototype.enableZeroWidthBar=function(e,t){function n(){var r=e.getBoundingClientRect(),i=document.elementFromPoint(r.left+1,r.bottom-1);i!=e?e.style.pointerEvents="none":t.set(1e3,n)}e.style.pointerEvents="auto",t.set(1e3,n)},ts.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var ns=function(){};ns.prototype.update=function(){return{bottom:0,right:0}},ns.prototype.setScrollLeft=function(){},ns.prototype.setScrollTop=function(){},ns.prototype.clear=function(){};var rs={native:ts,null:ns},is=0,os=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Fn(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Vt(e),this.force=n,this.dims=bn(e),this.events=[]};os.prototype.signal=function(e,t){Oe(e,t)&&this.events.push(arguments)},os.prototype.finish=function(){for(var e=this,t=0;t<this.events.length;t++)Re.apply(null,e.events[t])},Rr.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){var t=this;if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var r=t.ranges[n],i=e.ranges[n];if(0!=N(r.anchor,i.anchor)||0!=N(r.head,i.head))return!1}return!0},deepCopy:function(){for(var e=this,t=[],n=0;n<this.ranges.length;n++)t[n]=new Pr(D(e.ranges[n].anchor),D(e.ranges[n].head));return new Rr(t,this.primIndex)},somethingSelected:function(){for(var e=this,t=0;t<this.ranges.length;t++)if(!e.ranges[t].empty())return!0;return!1},contains:function(e,t){var n=this;t||(t=e);for(var r=0;r<this.ranges.length;r++){var i=n.ranges[r];if(N(t,i.from())>=0&&N(e,i.to())<=0)return r}return-1}},Pr.prototype={from:function(){return U(this.anchor,this.head)},to:function(){return I(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}},ki.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=this,r=e,i=e+t;r<i;++r){var o=n.lines[r];n.height-=o.height,ut(o),St(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){var r=this;this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=r},iterN:function(e,t,n){for(var r=this,i=e+t;e<i;++e)if(n(r.lines[e]))return!0}},Oi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){var n=this;this.size-=t;for(var r=0;r<this.children.length;++r){var i=n.children[r],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e),s=i.height;if(i.removeInner(e,a),n.height-=s-i.height,o==a&&(n.children.splice(r--,1),i.parent=null),0==(t-=a))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ki))){var l=[];this.collapse(l),this.children=[new ki(l)],this.children[0].parent=this}},collapse:function(e){for(var t=this,n=0;n<this.children.length;++n)t.children[n].collapse(e)},insertInner:function(e,t,n){var r=this;this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var o=r.children[i],a=o.chunkSize();if(e<=a){if(o.insertInner(e,t,n),o.lines&&o.lines.length>50){for(var s=o.lines.length%25+25,l=s;l<o.lines.length;){var c=new ki(o.lines.slice(l,l+=25));o.height-=c.height,r.children.splice(++i,0,c),c.parent=r}o.lines=o.lines.slice(0,s),r.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Oi(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=d(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new Oi(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=this,i=0;i<this.children.length;++i){var o=r.children[i],a=o.chunkSize();if(e<a){var s=Math.min(t,a-e);if(o.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=a}}},Ne(Ni),Ni.prototype.clear=function(){var e=this,t=this.doc.cm,n=this.line.widgets,r=this.line,i=L(r);if(null!=i&&n){for(var o=0;o<n.length;++o)n[o]==e&&n.splice(o--,1);n.length||(r.widgets=null);var a=Ft(this);A(r,Math.max(0,r.height-a)),t&&cr(t,function(){Di(t,r,-a),pr(t,i,"widget")})}},Ni.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var r=Ft(this)-e;r&&(A(n,n.height+r),t&&cr(t,function(){t.curOp.forceUpdate=!0,Di(t,n,r)}))};var as=0;Ne(Ui),Ui.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,n=t&&!t.curOp;if(n&&tr(t),Oe(this,"clear")){var r=this.find();r&&St(this,"clear",r.from,r.to)}for(var i=null,o=null,a=0;a<this.lines.length;++a){var s=e.lines[a],l=W(s.markedSpans,e);t&&!e.collapsed?pr(t,L(s),"text"):t&&(null!=l.to&&(o=L(s)),null!=l.from&&(i=L(s))),s.markedSpans=X(s.markedSpans,l),null==l.from&&e.collapsed&&!de(e.doc,s)&&t&&A(s,gn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var u=le(e.lines[c]),h=me(u);h>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=h,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&fr(t,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&pi(t.doc)),t&&St(t,"markerCleared",t,this),n&&nr(t),this.parent&&this.parent.clear()}},Ui.prototype.find=function(e,t){var n=this;null==e&&"bookmark"==this.type&&(e=1);for(var r,i,o=0;o<this.lines.length;++o){var a=n.lines[o],s=W(a.markedSpans,n);if(null!=s.from&&(r=O(t?a:L(a),s.from),e==-1))return r;if(null!=s.to&&(i=O(t?a:L(a),s.to),1==e))return i}return r&&{from:r,to:i}},Ui.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&cr(n,function(){var r=e.line,i=L(e.line),o=Zt(n,i);if(o&&(rn(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!de(t.doc,r)&&null!=t.height){var a=t.height;t.height=null;var s=Ft(t)-a;s&&A(r,r.height+s)}})},Ui.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&d(t.maybeHiddenMarkers,this)!=-1||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Ui.prototype.detachLine=function(e){if(this.lines.splice(d(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Ne(Bi),Bi.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)e.markers[t].clear();St(this,"clear")}},Bi.prototype.find=function(e,t){return this.primary.find(e,t)};var ss=0,ls=function(e,t,n,r){if(!(this instanceof ls))return new ls(e,t,n,r);null==n&&(n=0),Oi.call(this,[new ki([new lt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=O(n,0);this.sel=Or(i),this.history=new Wr(null),this.id=++ss,this.modeOption=t,this.lineSep=r,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Gr(this,{from:i,to:i,text:e}),hi(this,Or(i),Ta)};ls.prototype=b(Oi.prototype,{constructor:ls,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=C(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:dr(function(e){var t=O(this.first,0),n=this.first+this.size-1;wi(this,{from:t,to:O(n,E(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),hi(this,Or(t))}),replaceRange:function(e,t,n,r){t=B(this,t),n=n?B(this,n):t,Ci(this,e,t,n,r)},getRange:function(e,t,n){var r=T(this,B(this,e),B(this,t));return n===!1?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(P(this,e))return E(this,e)},getLineNumber:function(e){return L(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=E(this,e)),le(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return B(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:dr(function(e,t,n){li(this,B(this,"number"==typeof e?O(e,t||0):e),null,n)}),setSelection:dr(function(e,t,n){li(this,B(this,e),B(this,t||e),n)}),extendSelection:dr(function(e,t,n){oi(this,B(this,e),t&&B(this,t),n)}),extendSelections:dr(function(e,t){ai(this,j(this,e),t)}),extendSelectionsBy:dr(function(e,t){var n=v(this.sel.ranges,e);ai(this,j(this,n),t)}),setSelections:dr(function(e,t,n){var r=this;if(e.length){for(var i=[],o=0;o<e.length;o++)i[o]=new Pr(B(r,e[o].anchor),B(r,e[o].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),hi(this,kr(i,t),n)}}),addSelection:dr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new Pr(B(this,e),B(this,t||e))),hi(this,kr(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this,r=this.sel.ranges,i=0;i<r.length;i++){var o=T(n,r[i].from(),r[i].to());t=t?t.concat(o):o}return e===!1?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=this,n=[],r=this.sel.ranges,i=0;i<r.length;i++){var o=T(t,r[i].from(),r[i].to());e!==!1&&(o=o.join(e||t.lineSeparator())),n[i]=o}return n},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:dr(function(e,t,n){for(var r=this,i=[],o=this.sel,a=0;a<o.ranges.length;a++){var s=o.ranges[a];i[a]={from:s.from(),to:s.to(),text:r.splitLines(e[a]),origin:n}}for(var l=t&&"end"!=t&&Fr(this,i,t),c=i.length-1;c>=0;c--)wi(r,i[c]);l?ui(this,l):this.cm&&Qn(this.cm)}),undo:dr(function(){Mi(this,"undo")}),redo:dr(function(){Mi(this,"redo")}),undoSelection:dr(function(){Mi(this,"undo",!0)}),redoSelection:dr(function(){Mi(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Wr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:ri(this.history.done),undone:ri(this.history.undone)}},setHistory:function(e){var t=this.history=new Wr(this.history.maxGeneration);t.done=ri(e.done.slice(0),null,!0),t.undone=ri(e.undone.slice(0),null,!0)},setGutterMarker:dr(function(e,t,n){return Pi(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&_(r)&&(e.gutterMarkers=null),!0})}),clearGutter:dr(function(e){var t=this,n=this.first;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&Pi(t,r,"gutter",function(){return r.gutterMarkers[e]=null,_(r.gutterMarkers)&&(r.gutterMarkers=null),!0}),++n})}),lineInfo:function(e){var t;if("number"==typeof e){if(!P(this,e))return null;if(t=e,e=E(this,e),!e)return null}else if(t=L(e),null==t)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:dr(function(t,n,r){return Pi(this,t,"gutter"==n?"gutter":"class",function(t){var i="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(t[i]){if(e(r).test(t[i]))return!1;t[i]+=" "+r}else t[i]=r;return!0})}),removeLineClass:dr(function(t,n,r){return Pi(this,t,"gutter"==n?"gutter":"class",function(t){var i="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",o=t[i];if(!o)return!1;if(null==r)t[i]=null;else{var a=o.match(e(r));if(!a)return!1;var s=a.index+a[0].length;t[i]=o.slice(0,a.index)+(a.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0})}),addLineWidget:dr(function(e,t,n){return Ii(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Fi(this,B(this,e),B(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=B(this,e),Fi(this,e,e,n,"bookmark")},findMarksAt:function(e){e=B(this,e);var t=[],n=E(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=B(this,e),t=B(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;return o>e?(t=e,!0):(e-=o,void++n)}),B(this,O(n,t))},indexFromPos:function(e){e=B(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new ls(C(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new ls(C(this,t,n),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Gi(r,ji(this)),r},unlinkDoc:function(e){var t=this;if(e instanceof Po&&(e=e.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=t.linked[n];if(r.doc==e){t.linked.splice(n,1),e.unlinkDoc(t),Hi(ji(t));break}}if(e.history==this.history){var i=[e.id];Hr(e,function(e){return i.push(e.id)},!0),e.history=new Wr(null),e.history.done=ri(this.history.done,i),e.history.undone=ri(this.history.undone,i)}},iterLinkedDocs:function(e){Hr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ba(e)},lineSeparator:function(){return this.lineSep||"\n"}}),ls.prototype.eachLine=ls.prototype.iter;for(var cs=0,us=!1,hs={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ds=0;ds<10;ds++)hs[ds+48]=hs[ds+96]=String(ds);for(var fs=65;fs<=90;fs++)hs[fs]=String.fromCharCode(fs);for(var ps=1;ps<=12;ps++)hs[ps+111]=hs[ps+63235]="F"+ps;var ms={};ms.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ms.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ms.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ms.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ms.default=fa?ms.macDefault:ms.pcDefault;var vs,gs,ys={selectAll:bi,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Ta)},killLine:function(e){return io(e,function(t){if(t.empty()){var n=E(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:O(t.head.line+1,0)}:{from:t.head,to:O(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return io(e,function(t){return{from:O(t.from().line,0),to:B(e.doc,O(t.to().line+1,0))}})},delLineLeft:function(e){return io(e,function(e){return{from:O(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return io(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return io(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(O(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(O(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return oo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return so(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return ao(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Aa)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Aa)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?so(e,t.head):r},Aa)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add");
},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=u(e.getLine(o.line),o.ch,r);t.push(p(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return cr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=E(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new O(i.line,i.ch-1)),i.ch>0)i=new O(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),O(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=E(e.doc,i.line-1).text;a&&(i=new O(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),O(i.line-1,a.length-1),i,"+transpose"))}n.push(new Pr(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return cr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Qn(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},bs=new h,xs=null,ws={toString:function(){return"CodeMirror.Init"}},_s={},Ms={};Po.defaults=_s,Po.optionHandlers=Ms;var Ss=[];Po.defineInitHook=function(e){return Ss.push(e)};var Es=null,Ts=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new h,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ts.prototype.init=function(e){function t(e){if(!Pe(i,e)){if(i.somethingSelected())No({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Fo(i);No({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,Ta),i.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var n=Es.text.join("\n");if(e.clipboardData.setData("Text",n),e.clipboardData.getData("Text")==n)return void e.preventDefault()}var a=zo(),s=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),s.value=Es.text.join("\n");var l=document.activeElement;wa(s),setTimeout(function(){i.display.lineSpace.removeChild(a),l.focus(),l==o&&r.showPrimarySelection()},50)}}var n=this,r=this,i=r.cm,o=r.div=e.lineDiv;Bo(o,i.options.spellcheck),Ua(o,"paste",function(e){Pe(i,e)||Io(e,i)||ra<=11&&setTimeout(ur(i,function(){r.pollContent()||fr(i)}),20)}),Ua(o,"compositionstart",function(e){n.composing={data:e.data,done:!1}}),Ua(o,"compositionupdate",function(e){n.composing||(n.composing={data:e.data,done:!1})}),Ua(o,"compositionend",function(e){n.composing&&(e.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),Ua(o,"touchstart",function(){return r.forceCompositionEnd()}),Ua(o,"input",function(){n.composing||n.readFromDOMSoon()}),Ua(o,"copy",t),Ua(o,"cut",t)},Ts.prototype.prepareSelection=function(){var e=Tn(this.cm,!1);return e.focus=this.cm.state.focused,e},Ts.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ts.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=qo(this.cm,e.anchorNode,e.anchorOffset),r=qo(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!r||r.bad||0!=N(U(n,r),t.from())||0!=N(I(n,r),t.to())){var i=Vo(this.cm,t.from()),o=Vo(this.cm,t.to());if(i||o){var a=this.cm.display.view,s=e.rangeCount&&e.getRangeAt(0);if(i){if(!o){var l=a[a.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;o={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else i={node:a[0].measure.map[2],offset:0};var u;try{u=ga(i.node,i.offset,o.offset,o.node)}catch(e){}u&&(!Qo&&this.cm.state.focused?(e.collapse(i.node,i.offset),u.collapsed||(e.removeAllRanges(),e.addRange(u))):(e.removeAllRanges(),e.addRange(u)),s&&null==e.anchorNode?e.addRange(s):Qo&&this.startGracePeriod()),this.rememberSelection()}}},Ts.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ts.prototype.showMultipleSelections=function(e){n(this.cm.display.cursorDiv,e.cursors),n(this.cm.display.selectionDiv,e.selection)},Ts.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ts.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return i(this.div,t)},Ts.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ts.prototype.blur=function(){this.div.blur()},Ts.prototype.getField=function(){return this.div},Ts.prototype.supportsTouch=function(){return!0},Ts.prototype.receivedFocus=function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():cr(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},Ts.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ts.prototype.pollSelection=function(){if(!this.composing&&null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var n=qo(t,e.anchorNode,e.anchorOffset),r=qo(t,e.focusNode,e.focusOffset);n&&r&&cr(t,function(){hi(t.doc,Or(n,r),Ta),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}},Ts.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(0==r.ch&&r.line>e.firstLine()&&(r=O(r.line-1,E(e.doc,r.line-1).length)),i.ch==E(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=O(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;var o,a,s;r.line==t.viewFrom||0==(o=Sn(e,r.line))?(a=L(t.view[0].line),s=t.view[0].node):(a=L(t.view[o].line),s=t.view[o-1].node.nextSibling);var l,c,u=Sn(e,i.line);if(u==t.view.length-1?(l=t.viewTo-1,c=t.lineDiv.lastChild):(l=L(t.view[u+1].line)-1,c=t.view[u+1].node.previousSibling),!s)return!1;for(var h=e.doc.splitLines(Xo(e,s,c,a,l)),d=T(e.doc,O(a,0),O(l,E(e.doc,l).text.length));h.length>1&&d.length>1;)if(m(h)==m(d))h.pop(),d.pop(),l--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),a++}for(var f=0,p=0,v=h[0],g=d[0],y=Math.min(v.length,g.length);f<y&&v.charCodeAt(f)==g.charCodeAt(f);)++f;for(var b=m(h),x=m(d),w=Math.min(b.length-(1==h.length?f:0),x.length-(1==d.length?f:0));p<w&&b.charCodeAt(b.length-p-1)==x.charCodeAt(x.length-p-1);)++p;h[h.length-1]=b.slice(0,b.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(f).replace(/\u200b+$/,"");var _=O(a,f),M=O(l,d.length?m(d).length-p:0);return h.length>1||h[0]||N(_,M)?(Ci(e.doc,h,_,M,"+input"),!0):void 0},Ts.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ts.prototype.reset=function(){this.forceCompositionEnd()},Ts.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.pollContent()||fr(this.cm),this.div.blur(),this.div.focus())},Ts.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}!e.cm.isReadOnly()&&e.pollContent()||cr(e.cm,function(){return fr(e.cm)})},80))},Ts.prototype.setUneditable=function(e){e.contentEditable="false"},Ts.prototype.onKeyPress=function(e){e.preventDefault(),this.cm.isReadOnly()||ur(this.cm,Do)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},Ts.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Ts.prototype.onContextMenu=function(){},Ts.prototype.resetPosition=function(){},Ts.prototype.needsContentAttribute=!0;var Cs=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new h,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null};Cs.prototype.init=function(e){function t(e){if(!Pe(i,e)){if(i.somethingSelected())No({lineWise:!1,text:i.getSelections()}),r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,a.value=Es.text.join("\n"),wa(a));else{if(!i.options.lineWiseCopyCut)return;var t=Fo(i);No({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,Ta):(r.prevInput="",a.value=t.text.join("\n"),wa(a))}"cut"==e.type&&(i.state.cutIncoming=!0)}}var n=this,r=this,i=this.cm,o=this.wrapper=zo(),a=this.textarea=o.firstChild;e.wrapper.insertBefore(o,e.wrapper.firstChild),ha&&(a.style.width="0px"),Ua(a,"input",function(){na&&ra>=9&&n.hasSelection&&(n.hasSelection=null),r.poll()}),Ua(a,"paste",function(e){Pe(i,e)||Io(e,i)||(i.state.pasteIncoming=!0,r.fastPoll())}),Ua(a,"cut",t),Ua(a,"copy",t),Ua(e.scroller,"paste",function(t){Bt(e,t)||Pe(i,t)||(i.state.pasteIncoming=!0,r.focus())}),Ua(e.lineSpace,"selectstart",function(t){Bt(e,t)||De(t)}),Ua(a,"compositionstart",function(){var e=i.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),Ua(a,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},Cs.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=Tn(e);if(e.options.moveInputWithCursor){var i=dn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},Cs.prototype.showSelection=function(e){var t=this.cm,r=t.display;n(r.cursorDiv,e.cursors),n(r.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Cs.prototype.reset=function(e){if(!this.contextMenuPending){var t,n,r=this.cm,i=r.doc;if(r.somethingSelected()){this.prevInput="";var o=i.sel.primary();t=ja&&(o.to().line-o.from().line>100||(n=r.getSelection()).length>1e3);var a=t?"-":n||r.getSelection();this.textarea.value=a,r.state.focused&&wa(this.textarea),na&&ra>=9&&(this.hasSelection=a)}else e||(this.prevInput=this.textarea.value="",na&&ra>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},Cs.prototype.getField=function(){return this.textarea},Cs.prototype.supportsTouch=function(){return!1},Cs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!da||o()!=this.textarea))try{this.textarea.focus()}catch(e){}},Cs.prototype.blur=function(){this.textarea.blur()},Cs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Cs.prototype.receivedFocus=function(){this.slowPoll()},Cs.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Cs.prototype.fastPoll=function(){function e(){var r=n.poll();r||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},Cs.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||za(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(na&&ra>=9&&this.hasSelection===i||fa&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,s=Math.min(r.length,i.length);a<s&&r.charCodeAt(a)==i.charCodeAt(a);)++a;return cr(t,function(){Do(t,i.slice(a),r.length-a,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Cs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Cs.prototype.onKeyPress=function(){na&&ra>=9&&(this.hasSelection=null),this.fastPoll()},Cs.prototype.onContextMenu=function(e){function t(){if(null!=a.selectionStart){var e=i.somethingSelected(),t="​"+(e?a.value:"");a.value="⇚",a.value=t,r.prevInput=e?"":"​",a.selectionStart=1,a.selectionEnd=t.length,o.selForContextMenu=i.doc.sel}}function n(){if(r.contextMenuPending=!1,r.wrapper.style.cssText=h,a.style.cssText=u,na&&ra<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=a.selectionStart){(!na||na&&ra<9)&&t();var e=0,n=function(){o.selForContextMenu==i.doc.sel&&0==a.selectionStart&&a.selectionEnd>0&&"​"==r.prevInput?ur(i,bi)(i):e++<10?o.detectingSelectAll=setTimeout(n,500):o.input.reset()};o.detectingSelectAll=setTimeout(n,200)}}var r=this,i=r.cm,o=i.display,a=r.textarea,s=Mn(i,e),l=o.scroller.scrollTop;if(s&&!sa){var c=i.options.resetSelectionOnContextMenu;c&&i.doc.sel.contains(s)==-1&&ur(i,hi)(i.doc,Or(s),Ta);var u=a.style.cssText,h=r.wrapper.style.cssText;r.wrapper.style.cssText="position: absolute";var d=r.wrapper.getBoundingClientRect();a.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-d.top-5)+"px; left: "+(e.clientX-d.left-5)+"px;\n      z-index: 1000; background: "+(na?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var f;if(ia&&(f=window.scrollY),o.input.focus(),ia&&window.scrollTo(null,f),o.input.reset(),i.somethingSelected()||(a.value=r.prevInput=" "),r.contextMenuPending=!0,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),na&&ra>=9&&t(),ba){Fe(e);var p=function(){Le(window,"mouseup",p),setTimeout(n,20)};Ua(window,"mouseup",p)}else setTimeout(n,50)}},Cs.prototype.readOnlyChanged=function(e){e||this.reset()},Cs.prototype.setUneditable=function(){},Cs.prototype.needsContentAttribute=!1,Co(Po),jo(Po);var As="iter insert remove copy getEditor constructor".split(" ");for(var Ls in ls.prototype)ls.prototype.hasOwnProperty(Ls)&&d(As,Ls)<0&&(Po.prototype[Ls]=function(e){return function(){return e.apply(this.doc,arguments)}}(ls.prototype[Ls]));return Ne(ls),Po.inputStyles={textarea:Cs,contenteditable:Ts},Po.defineMode=function(e){Po.defaults.mode||"null"==e||(Po.defaults.mode=e),Ve.apply(this,arguments)},Po.defineMIME=We,Po.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Po.defineMIME("text/plain","null"),Po.defineExtension=function(e,t){Po.prototype[e]=t},Po.defineDocExtension=function(e,t){ls.prototype[e]=t},Po.fromTextArea=$o,Zo(Po),Po.version="5.22.0",Po})},function(e,t,n){var r=n(72);"string"==typeof r&&(r=[[e.id,r,""]]);n(74)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(73)(),t.push([e.id,'.CodeMirror{font-family:monospace;height:300px;color:#000}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-animate-fat-cursor{width:auto;border:0;-webkit-animation:blink 1.06s steps(1) infinite;-moz-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite;background-color:#7e7}@-moz-keyframes blink{50%{background-color:transparent}}@-webkit-keyframes blink{50%{background-color:transparent}}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:-20px;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:blue}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-invalidchar,.cm-s-default .cm-error{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0f0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#f22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:30px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-30px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper{-webkit-user-select:none;-moz-user-select:none;user-select:none}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre{-moz-border-radius:0;-webkit-border-radius:0;border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;-webkit-font-variant-ligatures:contextual;font-variant-ligatures:contextual}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;overflow:auto}.CodeMirror-code{outline:none}.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer{-moz-box-sizing:content-box;box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}.CodeMirror-focused div.CodeMirror-cursors,div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background:#ffa;background:rgba(255,255,0,.4)}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:""}span.CodeMirror-selectedtext{background:none}',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=f[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(c(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(c(r.parts[o],t));f[r.id]={id:r.id,refs:1,parts:a}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],l=i[3],c={css:a,media:s,sourceMap:l};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function o(e,t){var n=v(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function c(e,t){var n,r,i;if(t.singleton){var o=y++;n=g||(g=s(t)),r=u.bind(null,n,o,!1),i=u.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),r=d.bind(null,n),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=h.bind(null,n),i=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function u(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function h(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var f={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=p(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=i(e);return r(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var s=n[a],l=f[s.id];l.refs--,o.push(l)}if(e){var c=i(e);r(c,t)}for(var a=0;a<o.length;a++){var l=o[a];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete f[l.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(76);"string"==typeof r&&(r=[[e.id,r,""]]);n(74)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(73)(),t.push([e.id,".cm-s-material{background-color:#263238;color:#e9eded}.cm-s-material .CodeMirror-gutters{background:#263238;color:#537f7e;border:none}.cm-s-material .CodeMirror-guttermarker,.cm-s-material .CodeMirror-guttermarker-subtle,.cm-s-material .CodeMirror-linenumber{color:#537f7e}.cm-s-material .CodeMirror-cursor{border-left:1px solid #f8f8f0}.cm-s-material div.CodeMirror-selected{background:hsla(0,0%,100%,.15)}.cm-s-material.CodeMirror-focused div.CodeMirror-selected,.cm-s-material .CodeMirror-line::selection,.cm-s-material .CodeMirror-line>span::selection,.cm-s-material .CodeMirror-line>span>span::selection{background:hsla(0,0%,100%,.1)}.cm-s-material .CodeMirror-line::-moz-selection,.cm-s-material .CodeMirror-line>span::-moz-selection,.cm-s-material .CodeMirror-line>span>span::-moz-selection{background:hsla(0,0%,100%,.1)}.cm-s-material .CodeMirror-activeline-background{background:transparent}.cm-s-material .cm-keyword{color:#c792ea}.cm-s-material .cm-operator{color:#e9eded}.cm-s-material .cm-variable-2{color:#80cbc4}.cm-s-material .cm-variable-3{color:#82b1ff}.cm-s-material .cm-builtin{color:#decb6b}.cm-s-material .cm-atom,.cm-s-material .cm-number{color:#f77669}.cm-s-material .cm-def{color:#e9eded}.cm-s-material .cm-string{color:#c3e88d}.cm-s-material .cm-string-2{color:#80cbc4}.cm-s-material .cm-comment{color:#546e7a}.cm-s-material .cm-variable{color:#82b1ff}.cm-s-material .cm-meta,.cm-s-material .cm-tag{color:#80cbc4}.cm-s-material .cm-attribute{color:#ffcb6b}.cm-s-material .cm-property{color:#80cbae}.cm-s-material .cm-qualifier,.cm-s-material .cm-variable-3{color:#decb6b}.cm-s-material .cm-tag{color:#ff5370}.cm-s-material .cm-error{color:#fff;background-color:#ec5f67}.cm-s-material .CodeMirror-matchingbracket{text-decoration:underline;color:#fff!important}",""])},function(e,t,n){!function(e){e(n(70))}(function(e){"use strict";function t(e,t,n){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}e.defineMode("javascript",function(n,r){function i(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}function o(e,t,n){return Ee=e,Te=n,t}function a(e,n){var r=e.next();if('"'==r||"'"==r)return n.tokenize=s(r),n.tokenize(e,n);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return o("number","number");if("."==r&&e.match(".."))return o("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return o(r);if("="==r&&e.eat(">"))return o("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),o("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),o("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),o("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),o("number","number");if("/"==r)return e.eat("*")?(n.tokenize=l,l(e,n)):e.eat("/")?(e.skipToEnd(),o("comment","comment")):t(e,n,1)?(i(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),o("regexp","string-2")):(e.eatWhile(Ne),o("operator","operator",e.current()));if("`"==r)return n.tokenize=c,c(e,n);if("#"==r)return e.skipToEnd(),o("error","error");if(Ne.test(r))return">"==r&&n.lexical&&">"==n.lexical.type||e.eatWhile(Ne),o("operator","operator",e.current());if(ke.test(r)){e.eatWhile(ke);var a=e.current(),u=Oe.propertyIsEnumerable(a)&&Oe[a];return u&&"."!=n.lastType?o(u.type,u.style,a):o("variable","variable",a)}}function s(e){return function(t,n){var r,i=!1;if(Le&&"@"==t.peek()&&t.match(De))return n.tokenize=a,o("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=e||i);)i=!i&&"\\"==r;return i||(n.tokenize=a),o("string","string")}}function l(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=a;break}r="*"==n}return o("comment","comment")}function c(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=a;break}r=!r&&"\\"==n}return o("quasi","string-2",e.current())}function u(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(Pe){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var i=0,o=!1,a=n-1;a>=0;--a){var s=e.string.charAt(a),l=Ie.indexOf(s);if(l>=0&&l<3){if(!i){++a;break}if(0==--i){"("==s&&(o=!0);break}}else if(l>=3&&l<6)++i;else if(ke.test(s))o=!0;else{if(/["'\/]/.test(s))return;if(o&&!i){++a;break}}}o&&!i&&(t.fatArrowAt=a)}}function h(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function d(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function f(e,t,n,r,i){var o=e.cc;for(Fe.state=e,Fe.stream=i,Fe.marked=null,Fe.cc=o,Fe.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var a=o.length?o.pop():Re?M:_;if(a(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Fe.marked?Fe.marked:"variable"==n&&d(e,r)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)Fe.cc.push(arguments[e])}function m(){return p.apply(null,arguments),!0}function v(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=Fe.state;if(Fe.marked="def",n.context){if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function g(){Fe.state.context={prev:Fe.state.context,vars:Fe.state.localVars},Fe.state.localVars=Be}function y(){Fe.state.localVars=Fe.state.context.vars,Fe.state.context=Fe.state.context.prev}function b(e,t){var n=function(){var n=Fe.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new h(r,Fe.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function x(){var e=Fe.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function w(e){function t(n){return n==e?m():";"==e?p():m(t)}return t}function _(e,t){return"var"==e?m(b("vardef",t.length),J,w(";"),x):"keyword a"==e?m(b("form"),E,_,x):"keyword b"==e?m(b("form"),_,x):"{"==e?m(b("}"),W,x):";"==e?m():"if"==e?("else"==Fe.state.lexical.info&&Fe.state.cc[Fe.state.cc.length-1]==x&&Fe.state.cc.pop()(),m(b("form"),E,_,x,re)):"function"==e?m(ce):"for"==e?m(b("form"),ie,_,x):"variable"==e?m(b("stat"),F):"switch"==e?m(b("form"),E,b("}","switch"),w("{"),W,x,x):"case"==e?m(M,w(":")):"default"==e?m(w(":")):"catch"==e?m(b("form"),g,w("("),ue,w(")"),_,x,y):"class"==e?m(b("form"),de,x):"export"==e?m(b("stat"),ve,x):"import"==e?m(b("stat"),ye,x):"module"==e?m(b("form"),Q,b("}"),w("{"),W,x,x):"type"==e?m(q,w("operator"),q,w(";")):"async"==e?m(_):p(b("stat"),M,w(";"),x)}function M(e){return T(e,!1)}function S(e){return T(e,!0)}function E(e){return"("!=e?p():m(b(")"),M,w(")"),x)}function T(e,t){if(Fe.state.fatArrowAt==Fe.stream.start){var n=t?N:O;if("("==e)return m(g,b(")"),H(Q,")"),x,w("=>"),n,y);if("variable"==e)return p(g,Q,w("=>"),n,y)}var r=t?R:L;return Ue.hasOwnProperty(e)?m(r):"function"==e?m(ce,r):"class"==e?m(b("form"),he,x):"keyword c"==e||"async"==e?m(t?A:C):"("==e?m(b(")"),C,w(")"),x,r):"operator"==e||"spread"==e?m(t?S:M):"["==e?m(b("]"),Me,x,r):"{"==e?V(z,"}",null,r):"quasi"==e?p(P,r):"new"==e?m(D(t)):m();
}function C(e){return e.match(/[;\}\)\],]/)?p():p(M)}function A(e){return e.match(/[;\}\)\],]/)?p():p(S)}function L(e,t){return","==e?m(M):R(e,t,!1)}function R(e,t,n){var r=0==n?L:R,i=0==n?M:S;return"=>"==e?m(g,n?N:O,y):"operator"==e?/\+\+|--/.test(t)?m(r):"?"==t?m(M,w(":"),i):m(i):"quasi"==e?p(P,r):";"!=e?"("==e?V(S,")","call",r):"."==e?m(B,r):"["==e?m(b("]"),C,w("]"),x,r):void 0:void 0}function P(e,t){return"quasi"!=e?p():"${"!=t.slice(t.length-2)?m(P):m(M,k)}function k(e){if("}"==e)return Fe.marked="string-2",Fe.state.tokenize=c,m(P)}function O(e){return u(Fe.stream,Fe.state),p("{"==e?_:M)}function N(e){return u(Fe.stream,Fe.state),p("{"==e?_:S)}function D(e){return function(t){return"."==t?m(e?U:I):p(e?S:M)}}function I(e,t){if("target"==t)return Fe.marked="keyword",m(L)}function U(e,t){if("target"==t)return Fe.marked="keyword",m(R)}function F(e){return":"==e?m(x,_):p(L,w(";"),x)}function B(e){if("variable"==e)return Fe.marked="property",m()}function z(e,t){return"async"==e?(Fe.marked="property",m(z)):"variable"==e||"keyword"==Fe.style?(Fe.marked="property",m("get"==t||"set"==t?j:G)):"number"==e||"string"==e?(Fe.marked=Le?"property":Fe.style+" property",m(G)):"jsonld-keyword"==e?m(G):"modifier"==e?m(z):"["==e?m(M,w("]"),G):"spread"==e?m(M):":"==e?p(G):void 0}function j(e){return"variable"!=e?p(G):(Fe.marked="property",m(ce))}function G(e){return":"==e?m(S):"("==e?p(ce):void 0}function H(e,t){function n(r,i){if(","==r){var o=Fe.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),m(function(n,r){return n==t||r==t?p():p(e)},n)}return r==t||i==t?m():m(w(t))}return function(r,i){return r==t||i==t?m():p(e,n)}}function V(e,t,n){for(var r=3;r<arguments.length;r++)Fe.cc.push(arguments[r]);return m(b(t,n),H(e,t),x)}function W(e){return"}"==e?m():p(_,W)}function X(e,t){if(Pe){if(":"==e)return m(q);if("?"==t)return m(X)}}function q(e){return"variable"==e?(Fe.marked="variable-3",m(K)):"string"==e||"number"==e||"atom"==e?m(K):"{"==e?m(H($,"}")):"("==e?m(H(Z,")"),Y):void 0}function Y(e){if("=>"==e)return m(q)}function $(e){return"variable"==e||"keyword"==Fe.style?(Fe.marked="property",m($)):":"==e?m(q):void 0}function Z(e){return"variable"==e?m(Z):":"==e?m(q):void 0}function K(e,t){return"<"==t?m(b(">"),H(q,">"),x,K):"|"==t||"."==e?m(q):"["==e?m(w("]"),K):void 0}function J(){return p(Q,X,te,ne)}function Q(e,t){return"modifier"==e?m(Q):"variable"==e?(v(t),m()):"spread"==e?m(Q):"["==e?V(Q,"]"):"{"==e?V(ee,"}"):void 0}function ee(e,t){return"variable"!=e||Fe.stream.match(/^\s*:/,!1)?("variable"==e&&(Fe.marked="property"),"spread"==e?m(Q):"}"==e?p():m(w(":"),Q,te)):(v(t),m(te))}function te(e,t){if("="==t)return m(S)}function ne(e){if(","==e)return m(J)}function re(e,t){if("keyword b"==e&&"else"==t)return m(b("form","else"),_,x)}function ie(e){if("("==e)return m(b(")"),oe,w(")"),x)}function oe(e){return"var"==e?m(J,w(";"),se):";"==e?m(se):"variable"==e?m(ae):p(M,w(";"),se)}function ae(e,t){return"in"==t||"of"==t?(Fe.marked="keyword",m(M)):m(L,se)}function se(e,t){return";"==e?m(le):"in"==t||"of"==t?(Fe.marked="keyword",m(M)):p(M,w(";"),le)}function le(e){")"!=e&&m(M)}function ce(e,t){return"*"==t?(Fe.marked="keyword",m(ce)):"variable"==e?(v(t),m(ce)):"("==e?m(g,b(")"),H(ue,")"),x,X,_,y):void 0}function ue(e){return"spread"==e?m(ue):p(Q,X,te)}function he(e,t){return"variable"==e?de(e,t):fe(e,t)}function de(e,t){if("variable"==e)return v(t),m(fe)}function fe(e,t){return"extends"==t||"implements"==t?m(Pe?q:M,fe):"{"==e?m(b("}"),pe,x):void 0}function pe(e,t){return"variable"==e||"keyword"==Fe.style?("static"==t||"get"==t||"set"==t||Pe&&("public"==t||"private"==t||"protected"==t||"readonly"==t||"abstract"==t))&&Fe.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Fe.marked="keyword",m(pe)):(Fe.marked="property",m(Pe?me:ce,pe)):"*"==t?(Fe.marked="keyword",m(pe)):";"==e?m(pe):"}"==e?m():void 0}function me(e,t){return"?"==t?m(me):":"==e?m(q,te):p(ce)}function ve(e,t){return"*"==t?(Fe.marked="keyword",m(_e,w(";"))):"default"==t?(Fe.marked="keyword",m(M,w(";"))):"{"==e?m(H(ge,"}"),_e,w(";")):p(_)}function ge(e,t){return"as"==t?(Fe.marked="keyword",m(w("variable"))):"variable"==e?p(S,ge):void 0}function ye(e){return"string"==e?m():p(be,xe,_e)}function be(e,t){return"{"==e?V(be,"}"):("variable"==e&&v(t),"*"==t&&(Fe.marked="keyword"),m(we))}function xe(e){if(","==e)return m(be,xe)}function we(e,t){if("as"==t)return Fe.marked="keyword",m(be)}function _e(e,t){if("from"==t)return Fe.marked="keyword",m(M)}function Me(e){return"]"==e?m():p(H(S,"]"))}function Se(e,t){return"operator"==e.lastType||","==e.lastType||Ne.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}var Ee,Te,Ce=n.indentUnit,Ae=r.statementIndent,Le=r.jsonld,Re=r.json||Le,Pe=r.typescript,ke=r.wordCharacters||/[\w$\xa1-\uffff]/,Oe=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"},a={if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:e("new"),delete:r,throw:r,debugger:r,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:i,typeof:i,instanceof:i,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r,async:e("async")};if(Pe){var s={type:"variable",style:"variable-3"},l={interface:e("class"),implements:r,namespace:r,module:e("module"),enum:e("module"),type:e("type"),public:e("modifier"),private:e("modifier"),protected:e("modifier"),abstract:e("modifier"),as:i,string:s,number:s,boolean:s,any:s};for(var c in l)a[c]=l[c]}return a}(),Ne=/[+\-*&%=<>!?|~^]/,De=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ie="([{}])",Ue={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Fe={state:null,column:null,marked:null,cc:null},Be={name:"this",next:{name:"arguments"}};return x.lex=!0,{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new h((e||0)-Ce,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),u(e,t)),t.tokenize!=l&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==Ee?n:(t.lastType="operator"!=Ee||"++"!=Te&&"--"!=Te?Ee:"incdec",f(t,n,Ee,Te,e))},indent:function(t,n){if(t.tokenize==l)return e.Pass;if(t.tokenize!=a)return 0;var i,o=n&&n.charAt(0),s=t.lexical;if(!/^\s*else\b/.test(n))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==x)s=s.prev;else if(u!=re)break}for(;("stat"==s.type||"form"==s.type)&&("}"==o||(i=t.cc[t.cc.length-1])&&(i==L||i==R)&&!/^[,\.=+\-*:?[\(]/.test(n));)s=s.prev;Ae&&")"==s.type&&"stat"==s.prev.type&&(s=s.prev);var h=s.type,d=o==h;return"vardef"==h?s.indented+("operator"==t.lastType||","==t.lastType?s.info+1:0):"form"==h&&"{"==o?s.indented:"form"==h?s.indented+Ce:"stat"==h?s.indented+(Se(t,n)?Ae||Ce:0):"switch"!=s.info||d||0==r.doubleIndentSwitch?s.align?s.column+(d?0:1):s.indented+(d?0:Ce):s.indented+(/^(?:case|default)\b/.test(n)?Ce:2*Ce)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Re?null:"/*",blockCommentEnd:Re?null:"*/",lineComment:Re?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Re?"json":"javascript",jsonldMode:Le,jsonMode:Re,expressionAllowed:t,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=M&&t!=S||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},function(e,t,n){!function(e){e(n(70))}(function(e){"use strict";function t(e){for(var t={},n=0;n<e.length;++n)t[e[n].toLowerCase()]=!0;return t}function n(e,t){for(var n,r=!1;null!=(n=e.next());){if(r&&"/"==n){t.tokenize=null;break}r="*"==n}return["comment","comment"]}e.defineMode("css",function(t,n){function r(e,t){return p=t,e}function i(e,t){var n=e.next();if(g[n]){var i=g[n](e,t);if(i!==!1)return i}return"@"==n?(e.eatWhile(/[\w\\\-]/),r("def",e.current())):"="==n||("~"==n||"|"==n)&&e.eat("=")?r(null,"compare"):'"'==n||"'"==n?(t.tokenize=o(n),t.tokenize(e,t)):"#"==n?(e.eatWhile(/[\w\\\-]/),r("atom","hash")):"!"==n?(e.match(/^\s*\w*/),r("keyword","important")):/\d/.test(n)||"."==n&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),r("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?r(null,"select-op"):"."==n&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?r("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?r(null,n):"u"==n&&e.match(/rl(-prefix)?\(/)||"d"==n&&e.match("omain(")||"r"==n&&e.match("egexp(")?(e.backUp(1),t.tokenize=a,r("property","word")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),r("property","word")):r(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),r("number","unit")):e.match(/^-[\w\\\-]+/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?r("variable-2","variable-definition"):r("variable-2","variable")):e.match(/^\w+-/)?r("meta","meta"):void 0}function o(e){return function(t,n){for(var i,o=!1;null!=(i=t.next());){if(i==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==i}return(i==e||!o&&")"!=e)&&(n.tokenize=null),r("string","string")}}function a(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=o(")"),r(null,"(")}function s(e,t,n){this.type=e,this.indent=t,this.prev=n}function l(e,t,n,r){return e.context=new s(n,t.indentation()+(r===!1?0:v),e.context),n}function c(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function u(e,t,n){return R[n.context.type](e,t,n)}function h(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return u(e,t,n)}function d(e){var t=e.current().toLowerCase();m=C.hasOwnProperty(t)?"atom":T.hasOwnProperty(t)?"keyword":"variable"}var f=n.inline;n.propertyKeywords||(n=e.resolveMode("text/css"));var p,m,v=t.indentUnit,g=n.tokenHooks,y=n.documentTypes||{},b=n.mediaTypes||{},x=n.mediaFeatures||{},w=n.mediaValueKeywords||{},_=n.propertyKeywords||{},M=n.nonStandardPropertyKeywords||{},S=n.fontProperties||{},E=n.counterDescriptors||{},T=n.colorKeywords||{},C=n.valueKeywords||{},A=n.allowNested,L=n.supportsAtComponent===!0,R={};return R.top=function(e,t,n){if("{"==e)return l(n,t,"block");if("}"==e&&n.context.prev)return c(n);if(L&&/@component/.test(e))return l(n,t,"atComponentBlock");if(/^@(-moz-)?document$/.test(e))return l(n,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(e))return l(n,t,"atBlock");if(/^@(font-face|counter-style)/.test(e))return n.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return l(n,t,"at");if("hash"==e)m="builtin";else if("word"==e)m="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return l(n,t,"interpolation");if(":"==e)return"pseudo";if(A&&"("==e)return l(n,t,"parens")}return n.context.type},R.block=function(e,t,n){if("word"==e){var r=t.current().toLowerCase();return _.hasOwnProperty(r)?(m="property","maybeprop"):M.hasOwnProperty(r)?(m="string-2","maybeprop"):A?(m=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(m+=" error","maybeprop")}return"meta"==e?"block":A||"hash"!=e&&"qualifier"!=e?R.top(e,t,n):(m="error","block")},R.maybeprop=function(e,t,n){return":"==e?l(n,t,"prop"):u(e,t,n)},R.prop=function(e,t,n){if(";"==e)return c(n);if("{"==e&&A)return l(n,t,"propBlock");if("}"==e||"{"==e)return h(e,t,n);if("("==e)return l(n,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)d(t);else if("interpolation"==e)return l(n,t,"interpolation")}else m+=" error";return"prop"},R.propBlock=function(e,t,n){return"}"==e?c(n):"word"==e?(m="property","maybeprop"):n.context.type},R.parens=function(e,t,n){return"{"==e||"}"==e?h(e,t,n):")"==e?c(n):"("==e?l(n,t,"parens"):"interpolation"==e?l(n,t,"interpolation"):("word"==e&&d(t),"parens")},R.pseudo=function(e,t,n){return"word"==e?(m="variable-3",n.context.type):u(e,t,n)},R.documentTypes=function(e,t,n){return"word"==e&&y.hasOwnProperty(t.current())?(m="tag",n.context.type):R.atBlock(e,t,n)},R.atBlock=function(e,t,n){if("("==e)return l(n,t,"atBlock_parens");if("}"==e||";"==e)return h(e,t,n);if("{"==e)return c(n)&&l(n,t,A?"block":"top");if("interpolation"==e)return l(n,t,"interpolation");if("word"==e){var r=t.current().toLowerCase();m="only"==r||"not"==r||"and"==r||"or"==r?"keyword":b.hasOwnProperty(r)?"attribute":x.hasOwnProperty(r)?"property":w.hasOwnProperty(r)?"keyword":_.hasOwnProperty(r)?"property":M.hasOwnProperty(r)?"string-2":C.hasOwnProperty(r)?"atom":T.hasOwnProperty(r)?"keyword":"error"}return n.context.type},R.atComponentBlock=function(e,t,n){return"}"==e?h(e,t,n):"{"==e?c(n)&&l(n,t,A?"block":"top",!1):("word"==e&&(m="error"),n.context.type)},R.atBlock_parens=function(e,t,n){return")"==e?c(n):"{"==e||"}"==e?h(e,t,n,2):R.atBlock(e,t,n)},R.restricted_atBlock_before=function(e,t,n){return"{"==e?l(n,t,"restricted_atBlock"):"word"==e&&"@counter-style"==n.stateArg?(m="variable","restricted_atBlock_before"):u(e,t,n)},R.restricted_atBlock=function(e,t,n){return"}"==e?(n.stateArg=null,c(n)):"word"==e?(m="@font-face"==n.stateArg&&!S.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==n.stateArg&&!E.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},R.keyframes=function(e,t,n){return"word"==e?(m="variable","keyframes"):"{"==e?l(n,t,"top"):u(e,t,n)},R.at=function(e,t,n){return";"==e?c(n):"{"==e||"}"==e?h(e,t,n):("word"==e?m="tag":"hash"==e&&(m="builtin"),"at")},R.interpolation=function(e,t,n){return"}"==e?c(n):"{"==e||";"==e?h(e,t,n):("word"==e?m="variable":"variable"!=e&&"("!=e&&")"!=e&&(m="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:f?"block":"top",stateArg:null,context:new s(f?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var n=(t.tokenize||i)(e,t);return n&&"object"==typeof n&&(p=n[1],n=n[0]),m=n,t.state=R[t.state](p,e,t),m},indent:function(e,t){var n=e.context,r=t&&t.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),n.prev&&("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type?(")"!=r||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"atBlock"!=n.type)||(i=Math.max(0,n.indent-v),n=n.prev):(n=n.prev,i=n.indent)),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var r=["domain","regexp","url","url-prefix"],i=t(r),o=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=t(o),s=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],l=t(s),c=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],u=t(c),h=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=t(h),f=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],p=t(f),m=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],v=t(m),g=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],y=t(g),b=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],x=t(b),w=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],_=t(w),M=r.concat(o).concat(s).concat(c).concat(h).concat(f).concat(b).concat(w);e.registerHelper("hintWords","css",M),e.defineMIME("text/css",{documentTypes:i,mediaTypes:a,mediaFeatures:l,mediaValueKeywords:u,propertyKeywords:d,nonStandardPropertyKeywords:p,fontProperties:v,counterDescriptors:y,colorKeywords:x,valueKeywords:_,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=n,n(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:l,mediaValueKeywords:u,propertyKeywords:d,nonStandardPropertyKeywords:p,colorKeywords:x,valueKeywords:_,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:l,mediaValueKeywords:u,propertyKeywords:d,nonStandardPropertyKeywords:p,colorKeywords:x,valueKeywords:_,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=n,n(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),
e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:i,mediaTypes:a,mediaFeatures:l,propertyKeywords:d,nonStandardPropertyKeywords:p,fontProperties:v,counterDescriptors:y,colorKeywords:x,valueKeywords:_,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=n,n(e,t))}},name:"css",helperType:"gss"})})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=i(o),s=n(3),l=i(s),c=n(5),u=r(c);t.default=l.default.component("three-renderer",{props:["type","camera","scene"],data:function(){return{renderer:null}},created:function(){this.renderer=new u[this.type],this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=u.PCFSoftShadowMap},mounted:function(){var e=this;this.$el.appendChild(this.renderer.domElement),window.addEventListener("resize",function(){return e.onResize()}),this.onResize(),this.animate()},methods:{onResize:(0,a.default)(function(){this.renderer.domElement.style={},this.renderer.domElement.removeAttribute("width");var e=[this.$el.offsetWidth,this.$el.offsetHeight],t=e[0],n=e[1];this.renderer.setSize(t,n),this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.renderFrame()},200),renderFrame:function(){var e=this.scene,t=this.camera,n=this.renderer;n.render(e,t)},animate:function(){this.renderFrame(),requestAnimationFrame(this.animate)}},render:function(e){return e("div")}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=r(o);t.default=a.default.component("resizable-panel",{props:["flow"],methods:{onResize:function(e,t,n){var r=n.deltaX,i=n.deltaY,o="horizontal"===this.flow?"offsetWidth":"offsetHeight",a=e.elm[o]+t.elm[o],s=Number(e.elm.style.flexGrow)+Number(t.elm.style.flexGrow),l="horizontal"===this.flow?r:i,c=l/a*s;0!==c&&(e.elm.style.flexGrow=Number(e.elm.style["flex-grow"])+c,t.elm.style.flexGrow=Number(t.elm.style["flex-grow"])-c,this.$emit("resize"))}},mounted:function(){this.$slots.default.filter(function(e){var t=e.tag;return void 0!==t}).forEach(function(e){var t=e.elm;return t.style.flexGrow=Number(getComputedStyle(t).flexGrow||1)})},render:function(e){var t,n,r=this,o=this.$slots.default.filter(function(e){return void 0!==e.tag}),a=this.flow;return e("div",{class:"resizable-container resize-"+a},(t=[]).concat.apply(t,[o[0]].concat(i((n=[]).concat.apply(n,i(o.slice(1).map(function(t,n){return[e("resize-widget",{props:{flow:a},on:{resize:function(e){return r.onResize.apply(r,i(o.slice(n,n+2)).concat([e]))},resizeStart:function(){return o.slice(n,n+2).forEach(function(e){var t=e.elm;return t.classList.add("resizing")})},resizeStop:function(){return o.slice(n,n+2).forEach(function(e){var t=e.elm;return t.classList.remove("resizing")})}}}),t]})))))))}}),a.default.component("resize-widget",{data:function(){return{lastPosition:null}},methods:{startHandler:function(e){e.preventDefault(),window.addEventListener("mousemove",this.moveHandler),window.addEventListener("mouseup",this.endHandler),window.addEventListener("touchmove",this.moveHandler),window.addEventListener("touchend",this.endHandler),this.lastPosition={clientX:e.clientX,clientY:e.clientY},this.$emit("resizeStart")},moveHandler:function(e){var t="touchmove"===e.type?e.touches[0]:e,n=t.clientX,r=t.clientY,i={deltaX:n-this.lastPosition.clientX,deltaY:r-this.lastPosition.clientY};this.$emit("resize",i),this.lastPosition={clientX:n,clientY:r}},endHandler:function(){window.removeEventListener("touchmove",this.moveHandler),window.removeEventListener("mousemove",this.moveHandler),window.removeEventListener("touchend",this.endHandler),window.removeEventListener("mouseup",this.endHandler),this.$emit("resizeStop")}},render:function(e){return e("div",{class:"resize-widget",on:{mousedown:this.startHandler,touchstart:this.startHandler}})}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(70),o=r(i),a=n(61),s=o.default.resolveMode("text/css");o.default.defineMIME("text/threejs+css",Object.assign({},s,{name:"css",helperType:"threestyle",propertyKeywords:Object.assign({},s.propertyKeywords,Object.keys(a.PROPERTIES).map(function(e){return e.toLowerCase()}).reduce(function(e,t){return e[t.toLowerCase()]=!0,e},{}))}))},function(e,t){e.exports="let base = new three.Mesh(\n  new three.PlaneGeometry(40, 40)\n);\nbase.userData.className = 'floor';\nbase.rotation.x = -Math.PI/2;\nbase.receiveShadow = true;\n\nlet sphere = new three.Mesh(\n  new three.SphereGeometry(5, 20, 20)\n);\nsphere.userData.className = 'dull';\nsphere.castShadow = true;\nsphere.position.set(-5, 5, 0);\nsphere.onBeforeRender = () => {\n  sphere.rotation.y += 0.005;\n}\n\nlet box = new three.Mesh(\n  new three.BoxGeometry(5, 5, 5)\n);\nbox.userData.className = 'ghost'\nbox.userData.ticks = 0;\nbox.position.set(5, 5, -2);\nbox.castShadow = true;\nbox.onBeforeRender = () => {\n  box.userData.ticks += 0.016;\n  box.rotation.y += 0.005;\n  if (box.userData.ticks > 1) {\n    box.userData.ticks = 0;\n    box.userData.className =\n      box.userData.className.indexOf('selected') === -1\n        ? 'ghost selected'\n        : 'ghost';\n  }\n}\n\nlet ring = new three.Mesh(\n  new three.TorusGeometry(4, 1, 8, 20)\n);\nring.userData.className = 'matrix';\nring.position.set(2, 2, 7);\nring.rotation.x = Math.PI / 2;\nring.castShadow = true;\nring.onBeforeRender = () => {\n  ring.rotation.z -= 0.005;\n}\n\nlet light = new three.PointLight();\nlight.position.set(5, 15, 0);\n\nlet spot = new three.SpotLight();\nspot.position.set(-15, 15, 15);\nspot.target.position.set(0, 0, 0);\nspot.castShadow = true;\nspot.penumbra = 0.6;\nspot.distance = 130;\n\nscene.add(\n  light,\n  spot, spot.target,\n  base,\n  sphere,\n  box,\n  ring\n);\n"},function(e,t){e.exports="SphereGeometry {\n  color: white;\n  map: url(assets/ROCKY_GROUND_DIFF.png)\n    MirroredRepeatWrapping 2 1;\n  specularMap: url(assets/ROCKY_GROUND_SPEC.png)\n    MirroredRepeatWrapping 2 1;\n  displacementMap: url(assets/ROCKY_GROUND_DISP.png)\n    MirroredRepeatWrapping 2 1;\n  normalMap: url(assets/ROCKY_GROUND_NORM.png)\n    MirroredRepeatWrapping 2 1;\n}\n\nBoxGeometry {\n  color: blue;\n}\n\n.floor {\n  color: grey;\n}\n\n.dull {\n  shininess: 1;\n}\n.ghost {\n  transparent: true;\n  opacity: 0.5;\n}\n\n.selected {\n  color: yellow;\n}\n\n.matrix {\n  wireframe: true;\n  color: green;\n}\n"}]);